<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Foreman | Lifecyclemanagement for Server</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>

  
  <link rel="icon" href="image/global/favicon.ico"/>
  

  <link rel="stylesheet" type="text/css" href=".//css/highlight/default.css"  />
  <link rel="stylesheet" type="text/css" href=".//css/mermaid-6.0.0.css" />
  <link rel="stylesheet" type="text/css" href=".//css/font-awesome-4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href=".//css/introjs-2.5.local.css">
  <link rel="stylesheet" type="text/css" href=".//css/jquery-ui-1.12.1.css">
  <link rel="stylesheet" type="text/css" href=".//css/showoff.css?v=0.19.6" />
  <link rel="stylesheet" type="text/css" href=".//css/zoomline-0.0.1.css">

  <script type="text/javascript" src=".//js/jquery-2.1.4.min.js"></script>
  <script type="text/javascript" src=".//js/jquery-ui-1.12.1.js"></script>

  <script type="text/javascript" src=".//js/jquery.cycle.all-2.8.0.js"></script>
  <script type="text/javascript" src=".//js/jquery.batchImageLoad-1.0.0.js"></script>
  <script type="text/javascript" src=".//js/jquery.parsequery.min-6a20f83.js"></script>
  <script type="text/javascript" src=".//js/jquery.doubletap-4ff02c5.js"></script>
  <script type="text/javascript" src=".//js/highlight.pack-9.2.0.js"></script>
  <script type="text/javascript" src=".//js/jTypeWriter-1.1.js"></script>
  <script type="text/javascript" src=".//js/bigtext-0.1.8.js"></script>
  <script type="text/javascript" src=".//js/zoomline-0.0.1.js"></script>
  <script type="text/javascript" src=".//js/simpleStrings-0.0.1.js"></script>
  <script type="text/javascript" src=".//js/mermaid-6.0.0-min.js"></script>

  <!-- waiting on https://github.com/usablica/intro.js/pull/727 -->
  <script type="text/javascript" src=".//js/intro-2.5.local.js"></script>

  <script type="text/javascript" src=".//js/coffee-script-1.1.3-pre.js"></script>

  <script type="text/javascript" src=".//js/annotations.js?v=0.19.6"></script>
  <script type="text/javascript" src=".//js/showoff.js?v=0.19.6"></script>

  
    <link rel="stylesheet" href=".//file/foreman.css" type="text/css"/>
  

  

  <script type="text/javascript">
    $(function(){
      setupPreso(false, './');
    });

    editUrl     = "";
    interactive = false;
    master      = false;
    presenter   = false;

    keymap               = {
  "d": "DEBUG",
  "space": "NEXT",
  "down": "NEXT",
  "right": "NEXT",
  "pagedown": "NEXT",
  "up": "PREV",
  "left": "PREV",
  "pageup": "PREV",
  "SPACE": "NEXTSEC",
  "DOWN": "NEXTSEC",
  "RIGHT": "NEXTSEC",
  "PAGEDOWN": "NEXTSEC",
  "UP": "PREVSEC",
  "LEFT": "PREVSEC",
  "PAGEUP": "PREVSEC",
  "R": "RELOAD",
  "r": "REFRESH",
  "c": "CONTENTS",
  "t": "CONTENTS",
  "h": "HELP",
  "/": "HELP",
  "?": "HELP",
  "b": "BLANK",
  ".": "BLANK",
  "F": "FOOTER",
  "f": "FOLLOW",
  "n": "NOTES",
  "esc": "CLEAR",
  "p": "PAUSE",
  "P": "PRESHOW",
  "x": "EXECUTE",
  "f5": "EXECUTE"
};
    keycode_dictionary   = {
  "0": "\\",
  "8": "backspace",
  "9": "tab",
  "12": "num",
  "13": "enter",
  "16": "shift",
  "17": "ctrl",
  "18": "alt",
  "19": "pause",
  "20": "caps",
  "27": "esc",
  "32": "space",
  "33": "pageup",
  "34": "pagedown",
  "35": "end",
  "36": "home",
  "37": "left",
  "38": "up",
  "39": "right",
  "40": "down",
  "44": "print",
  "45": "insert",
  "46": "delete",
  "48": "0",
  "49": "1",
  "50": "2",
  "51": "3",
  "52": "4",
  "53": "5",
  "54": "6",
  "55": "7",
  "56": "8",
  "57": "9",
  "59": ";",
  "61": "=",
  "65": "a",
  "66": "b",
  "67": "c",
  "68": "d",
  "69": "e",
  "70": "f",
  "71": "g",
  "72": "h",
  "73": "i",
  "74": "j",
  "75": "k",
  "76": "l",
  "77": "m",
  "78": "n",
  "79": "o",
  "80": "p",
  "81": "q",
  "82": "r",
  "83": "s",
  "84": "t",
  "85": "u",
  "86": "v",
  "87": "w",
  "88": "x",
  "89": "y",
  "90": "z",
  "91": "cmd",
  "92": "cmd",
  "93": "cmd",
  "96": "num_0",
  "97": "num_1",
  "98": "num_2",
  "99": "num_3",
  "100": "num_4",
  "101": "num_5",
  "102": "num_6",
  "103": "num_7",
  "104": "num_8",
  "105": "num_9",
  "106": "num_multiply",
  "107": "num_add",
  "108": "num_enter",
  "109": "num_subtract",
  "110": "num_decimal",
  "111": "num_divide",
  "112": "f1",
  "113": "f2",
  "114": "f3",
  "115": "f4",
  "116": "f5",
  "117": "f6",
  "118": "f7",
  "119": "f8",
  "120": "f9",
  "121": "f10",
  "122": "f11",
  "123": "f12",
  "124": "print",
  "144": "num",
  "145": "scroll",
  "173": "-",
  "186": ";",
  "187": "=",
  "188": ",",
  "189": "-",
  "190": ".",
  "191": "/",
  "192": "`",
  "219": "[",
  "220": "\\",
  "221": "]",
  "222": "'",
  "223": "`",
  "224": "cmd",
  "225": "alt",
  "57392": "ctrl",
  "63289": "num"
};
    keycode_shifted_keys = {
  "0": ")",
  "1": "!",
  "2": "@",
  "3": "#",
  "4": "$",
  "5": "%",
  "6": "^",
  "7": "&",
  "8": "*",
  "9": "(",
  "/": "?",
  ".": ">",
  ",": "<",
  "'": "\"",
  ";": ":",
  "[": "{",
  "]": "}",
  "\\": "|",
  "`": "~",
  "=": "+",
  "-": "_",
  "space": "SPACE",
  "down": "DOWN",
  "right": "RIGHT",
  "pagedown": "PAGEDOWN",
  "up": "UP",
  "left": "LEFT",
  "pageup": "PAGEUP"
};
    user_translations    = {
};

    I18n = new translation({"name":"Showoff Presentation","menu":{"title":"Showoff Menu","table_of_contents":"Table of Contents","downloads":"Downloads","feedback":{"label":"Send Feedback","description":"This slide is...","worst":"Terrible","best":"Awesome","why":"Why...?","send":"Send"},"pace":{"label":"The presenter should...","slower":"Slow Down","faster":"Speed Up"},"question":{"label":"Ask a Question","placeholder":"Ask a question..."},"edit":"Edit Current Slide","clear_annotations":"Clear Annotations","language":"Content Language","close":"Close","help":"Press <code>?</code> for help.","anonymous":"All features are anonymous.","sending":"Sending..."},"navigation":{"next":"Next","previous":"Previous","sync":"Sync Presentation"},"loading":"loading presentation...","activity_complete":"Activity complete","follow":{"label":"Follow Mode:"},"refresh":"Are you sure you want to refresh the slide content?\n\n(Use `RELOAD` to fully reload the entire UI)","reload":"Are you sure you want to reload Showoff?","preshow":{"prompt":"Minutes from now to start?","resume":"Resuming in:"},"tour":{"show":"See the Tour","reset":"Reset Hints","welcome":"<h3>Welcome to Showoff</h3>Let me show you around. After you finish this tour, it won't show again.","displayview":"Start by clicking this button to open the Display Window; then drag it onto the projector.","annotations":"Draw on your slides everywhere the presentation is displayed.","timer":"Set a countdown timer to help you stay on pace.","pace":"Audience members can use this to tell you if you're moving too quickly. Try to keep the indicator centered.","questions":"Questions asked by audience members are displayed here. You'll also see a count indicator on the Display Window when you have questions to answer.","notes":"Configure the notes display by zooming text, resizing the pane, or even popping it out into a new window.","slidesource":"The name of the slide is displayed here.","settings":"Would you like a different presenter layout? Choose that and other settings here.","edit":"This button will open your web-based editor--usually something like GitHub.","report":"Don't forget to report issues when you see them.","activity":{"count":"This will count down as audience members mark their activity complete. Their presentations will pause until completed.","complete":"Check this box when you're ready to move on. The presentation will pause while you're working."},"form":{"responses":"As questions are answered, they'll show up as a bar chart with the number of answers to each question on the right.","display":"Press this button to present a snapshot of the live responses on slide.","save":"Press this button to save your responses. The presentation will pause while answering."},"menu":{"start":"Click here to open the menu.","navigation":"Quickly navigate to any slide.","download":"Download presentation support files.","pace":"Provide pace feedback.","questions":"Ask live questions of the presenter.","feedback":"Provide suggestions for improving the content."}},"downloads":{"title":"File Downloads"},"help":{"title":"Help","next":"Move to the next slide.","prev":"Move to the previous slide.","nextsec":"Move to the next section.","prevsec":"Move to the previous section.","contents":"Show the table of contents menu.","follow":"Toggle follow mode.","help":"Show this help dialog.","refresh":"Refresh slide content.","reload":"Completely reload Showoff.","blank":"Blank the screen.","footer":"Toggle the display footer.","notes":"Toggle notes display.","clear":"Clear code execution results.","pause":"Pause the presentation.","preshow":"Display slideshow of <tt>preshow</tt> images on a timer.","execute":"Execute the first visible code block.","debug":"Show debugging information.","close":"Close"},"stats":{"title":"Viewing Statistics","stray":"of your audience is not viewing the same slide you are.","idle":"of your audience is idle.","current":"Slides currently being viewed","elapsed":"Elapsed time spent on each slide","nodata":"No data to display.","allcurrent":"All audience members are viewing the presenter's slide."},"forms":{"display":"Display Results","save":"Save"},"presenter":{"topbar":{"annotations":"Annotations","edit":"Edit Slide","report":"Report Issue With Slide","stats":"Viewing Statistics","downloads":"Downloads","display":"Display Window","print":"Print Slides","settings":"Settings","newpage":"Open in a new page...","tooltip":{"annotations":"Enable the annotations subsystem.","edit":"Edit current slide in new window.","report":"Report an issue with the current slide.","stats":"See the slides your audience is interacting with.","downloads":"Open the file downloads in a menu or new page.","display":"Enable the Display Window; you should put this on the projector.","print":"Print slides using a new window.","settings":"Open the Settings dialog."}},"preview":{"next":"Next","previous":"Previous"},"mobile":{"update":"Update"},"notes":{"label":"Showoff Notes","personal":"Personal Notes"},"timer":{"label":"Timer:","start":"Start","pause":"Pause","resume":"Resume","cancel":"Cancel","unit":"minutes"},"pace":{"faster":"Speed Up!","slower":"Slow Down!"},"questions":"Audience Questions","annotation":{"tools":"Tools","lines":"Lines","shapes":"Shapes"},"status":{"label":"Slides:"},"settings":{"label":"Settings","close":"Close","follower":{"label":"Update Follower","tooltip":"Send slide change notifications.","description":"When this is enabled, the Showoff server will track your slide changes. Disable it to observe the presentation without inadvertently causing slide changes."},"remote":{"label":"Enable Remote","tooltip":"Enables tracking of other presenters.","description":"When this is enabled, you can load the presenter in another browser (typically on your mobile phone) to control the presentation."},"layout":{"label":"Layout","default":"Default Layout","thumbs":"Display thumbnail previews of the next and previous slides.","beside":"Display the next slide as a large preview in the main presenter view.","floating":"Open the next slide as a floating window.","confirmation":"Browser security requires confirmation before opening a new window.","open":"Open Window","cancel":"cancel","reset":{"label":"Clear Showoff settings.","tooltip":"Reset Showoff UI settings to default values."}},"language":{"label":"Content Language","tooltip":"Select from available translations, or autoselect based on your browser settings.","description":"This presentation is available in different languages. Choose the language you would like to view or leave it at <tt>automatic</tt> to use your browser settings."}},"print":{"label":"Choose type of printed notes","description":"Select the content you'd like to show under the slides.","none":"Don't include notes","notes":"Presenter Notes","handouts":"Audience Handouts"}},"language":{"auto":"Automatic","disable":"Disable Translations"},"error":{"file_not_found":"File Not Found!"}});

  </script>

</head>

<body>
<div id="questionsIndicator"></div>

<i id="hamburger" class="fa fa-bars fa-2x"></i>
<div id="sidebarWrapper">
    <div id="navigationHover"></div>
    <div id="feedbackSidebar" class="sideMenu">
    <img id="disconnected" src=".//css/disconnected.png">
    <h3>Showoff Menu</h3>
    <div id="navToggle" class="buttonWrapper"><i class=" fa fa-bookmark"></i> Table of Contents</div>
    <div id="navigation" class="submenu"></div>
    
    <hr>

    

    

    <div id="closeMenu" class="buttonWrapper"><i class="fa fa-close"></i> Close</div>
    <hr>

    <small>
        <p>Press <code>?</code> for help.</p>
        <p>All features are anonymous.</p>
    </small>
    </div>
    <div id="sidebarExit"></div>
</div>
<div id="help-modal" title="Help">
  <div id="help">
    <div>
      <span class="description">Move to the next slide.</span>
      <span class="action">NEXT</span>
      <span class="hotkeys"><span class="key">space</span><span class="key">down</span><span class="key">right</span><span class="key">pagedown</span></span>
    </div>
    <div>
      <span class="description">Move to the previous slide.</span>
      <span class="action">PREV</span>
      <span class="hotkeys"><span class="key">up</span><span class="key">left</span><span class="key">pageup</span></span>
    </div>
    <div>
      <span class="description">Move to the next section.</span>
      <span class="action">NEXTSEC</span>
      <span class="hotkeys"><span class="key">SPACE</span><span class="key">DOWN</span><span class="key">RIGHT</span><span class="key">PAGEDOWN</span></span>
    </div>
    <div>
      <span class="description">Move to the previous section.</span>
      <span class="action">PREVSEC</span>
      <span class="hotkeys"><span class="key">UP</span><span class="key">LEFT</span><span class="key">PAGEUP</span></span>
    </div>
    <div>
      <span class="description">Show the table of contents menu.</span>
      <span class="action">CONTENTS</span>
      <span class="hotkeys"><span class="key">c</span><span class="key">t</span></span>
    </div>
    <div>
      <span class="description">Toggle follow mode.</span>
      <span class="action">FOLLOW</span>
      <span class="hotkeys"><span class="key">f</span></span>
    </div>
    <div>
      <span class="description">Show this help dialog.</span>
      <span class="action">HELP</span>
      <span class="hotkeys"><span class="key">h</span><span class="key">/</span><span class="key">?</span></span>
    </div>

    <hr />

    <div>
      <span class="description">Refresh slide content.</span>
      <span class="action">REFRESH</span>
      <span class="hotkeys"><span class="key">r</span></span>
    </div>
    <div>
      <span class="description">Completely reload Showoff.</span>
      <span class="action">RELOAD</span>
      <span class="hotkeys"><span class="key">R</span></span>
    </div>
    <div>
      <span class="description">Blank the screen.</span>
      <span class="action">BLANK</span>
      <span class="hotkeys"><span class="key">b</span><span class="key">.</span></span>
    </div>
    <div>
      <span class="description">Toggle the display footer.</span>
      <span class="action">FOOTER</span>
      <span class="hotkeys"><span class="key">F</span></span>
    </div>
    <div>
      <span class="description">Toggle notes display.</span>
      <span class="action">NOTES</span>
      <span class="hotkeys"><span class="key">n</span></span>
    </div>
    <div>
      <span class="description">Clear code execution results.</span>
      <span class="action">CLEAR</span>
      <span class="hotkeys"><span class="key">esc</span></span>
    </div>
    <div>
      <span class="description">Pause the presentation.</span>
      <span class="action">PAUSE</span>
      <span class="hotkeys"><span class="key">p</span></span>
    </div>
    <div>
      <span class="description">Display slideshow of <tt>preshow</tt> images on a timer.</span>
      <span class="action">PRESHOW</span>
      <span class="hotkeys"><span class="key">P</span></span>
    </div>
    <div>
      <span class="description">Execute the first visible code block.</span>
      <span class="action">EXECUTE</span>
      <span class="hotkeys"><span class="key">x</span><span class="key">f5</span></span>
    </div>

    <hr />

    <div>
      <span class="description">Show debugging information.</span>
      <span class="action">DEBUG</span>
      <span class="hotkeys"><span class="key">d</span></span>
    </div>
  </div>
</div>

<div id="preso"><center>loading presentation...</center></div>
<a id="synchronize"><i class="fa fa-link" aria-hidden="true" href="#"></i> Sync Presentation</a>
<div id="notes"></div>

<footer id="footer">
  <span id="followLabel" class="container">Follow Mode: <i id="followMode" class="fa fa-ban" aria-hidden="true"></i></span>
  <span id="slideInfo" class="container"></span>
  <span id="debugInfo" class="container"></span>
  <span id="notesInfo" class="container"></span>
  <span id="slideFilename" class="container"></span>
  <img id="disconnected" src=".//css/disconnected.png" />
</footer>

<div id="slides" class="offscreen" style="display:none;">
<div data-section="global/Pre/Title" data-title="01_Title" id="global_Pre_Title_01_Title1" class="slide noprint" data-transition="none">
<div class="content noprint" ref="global/Pre/Title/01_Title:1">
<div class="title-name"><p>Foreman | Lifecyclemanagement for Server</p></div>

<div class="title-subtitle"><p>created by NETWAYS GmbH</p></div>

<div class="title-author"><p>Original Author: Dirk Götz</p></div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Pre/Training" data-title="01_Netways" id="global_Pre_Training_01_Netways" class="slide noprint" data-transition="none">
<div class="content noprint" ref="global/Pre/Training/01_Netways">
<h1>Author</h1>

<p>Provided by: </p>

<p><img src="./file//global/_images/netways-logo-1366.png" style="max-width:400px; max-height: 200px; width: auto; height: auto; margin-left: 50px" alt="NETWAYS Logo"></p>

<p><a href="https://www.netways.de" target="_blank">www.netways.de</a> - <a href="https://github.com/NETWAYS" target="_blank">github.com/NETWAYS</a> - <a href="https://twitter.com/netways" target="_blank">@netways</a></p>

<p>To Support:</p>

<p><img src="./file//global/_images/foreman/foremanhelmet.png" style="max-width:400px; max-height: 150px; width: auto; height: auto; margin-left: 50px" alt="Foreman Logo"></p>

<p><a href="https://www.theforeman.org" target="_blank">www.theforeman.org</a> - <a href="https://github.com/theforeman" target="_blank">github.com/theforeman</a> - <a href="https://twitter.com/ForemanProject" target="_blank">@ForemanProject</a></p>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Pre/Training" data-title="02_Forthcoming_Training" id="global_Pre_Training_02_Forthcoming_Training1" class="slide noprint" data-transition="none">
<div class="content noprint" ref="global/Pre/Training/02_Forthcoming_Training:1">
<h1>Forthcoming Hands-on Training</h1>

<ul>
<li>09.04.2019 - 10.04.2019 <a href="https://www.netways.de/trainings/foreman/" target="_blank">NETWAYS</a> (German)</li>
<li>16.07.2019 - 17.07.2019 <a href="https://www.netways.de/trainings/foreman/" target="_blank">NETWAYS</a> (German)</li>
<li>12.11.2019 - 13.11.2019 <a href="https://www.netways.de/trainings/foreman/" target="_blank">NETWAYS</a> (German)</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Pre/Training" data-title="02_Forthcoming_Training" id="global_Pre_Training_02_Forthcoming_Training2" class="slide center noprint" data-transition="none">
<div class="content center noprint" ref="global/Pre/Training/02_Forthcoming_Training:2">
<h1>Forthcoming Hands-on Training</h1>

<p>For other events and trainings hosted by NETWAYS see our</p>

<p><a href="https://www.netways.de/en/events/" target="_blank">event calendar</a></p>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="training" data-title="01_training" id="training_01_training1" class="slide subsection" data-transition="none">
<div class="content subsection" ref="training/01_training:1">
<h1>1 Introduction</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="training" data-title="01_training" id="training_01_training2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="training/01_training:2">
<h1>Training</h1>

<h3>This training course will introduce the architectual concepts of Foreman, will cover installation, usage and administration.
The configuration management solution used will be Puppet.</h3>

<ul>
<li>Foreman architecture</li>
<li>Installation</li>
<li>Provisioning</li>
<li>Configuration management</li>
<li>User management</li>
<li>Advanced Use</li>
</ul>


</div>
<div class="notes-section handouts">

<div class="pagebreak">continued...</div>

<h2>Foreman architecture</h2>

<p>This chapter will give you a basic understanding of the architecture of Foreman, its Smart proxies and Compute Resources.</p>

<h2>Installation</h2>

<p>In this chapter you will get an idea on the different setups you can create, what is required for running foreman, 
how the installer works and will create an All-in-one setup including DNS and DHCP in preparation for unattended installations.</p>

<h2>Provisioning</h2>

<p>This chapter provides basic knowledge on automated installation mechnism for Linux. You will learn how to configure them
in the Foreman Web GUI. Afterwards several installation scenarios will be covered from bare metal installation using PXE
over creating virtual machines using Compute Resources and metal as a service with Foreman's Discovery Plugin to creating
a setup using installation media instead of PXE.</p>

<div class="pagebreak">continued...</div>

<h2>Configuration management</h2>

<p>Some basic explainations will give you enough knowledge to understand how Puppet works and to use it to configure newly provisioned
systems to your needs. Some existing Puppet modules will be imported, parameterized and assigned to the systems directly or
via a host group. Configuration runs will be reported back to Foreman so the administrator can see success and failure.
Furthermore similar exercises are provided for Ansible.</p>

<h2>User management</h2>

<p>To give more users access to the Foreman Web GUI LDAP authentication will be added. Privileges will be added to the new users.
Also the auditing capabilities of Foreman will be covered so you can see what your new users do.</p>

<div class="pagebreak">continued...</div>

<h2>Advanced Use</h2>

<p>Some advanced topics like debugging, clean up, backup and restore will be covered in this chapter. Also the usage of the API
and CLI will be shown. Furthermore additional plugins helpful in some environments will be introduced. And last but not least
the trainer will show you Katello. This project adds content and subscription management to Foreman and is the upstream project
for Red Hat Satellite 6.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="training" data-title="02_hints" id="training_02_hints" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="training/02_hints">
<h1>Training Hints</h1>

<ul>
<li>Ask questions! Dumb questions do not exist.</li>
<li>Add your own notes! Having learnt something is reflected best with your own additions.</li>
<li>Join the conversation! Many of these exercises require real world scenarios and your feedback and questions.</li>
<li><p>Work together! Be part of the training team and find solutions together.</p></li>
<li><p>Additional documentation in your browser at <a href="http://theforeman.org/manuals/latest" target="_blank">http://theforeman.org/manuals/latest</a></p></li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="training" data-title="03_environment" id="training_03_environment1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="training/03_environment:1">
<h1>Training Environment</h1>

<div style="text-align: center"><img src="./file//training/_images/environment.png" style="float: center; margin-left: 115px; width: 794px; height: 428px;" alt="Training Environment"></div>


</div>
<div class="notes-section notes">

<ul>
<li>Note on the flipchart the address of the repos you are hosting</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="00_overview" id="architecture_00_overview1" class="slide subsection" data-transition="none">
<div class="content subsection" ref="architecture/00_overview:1">
<h1>2 Foreman Architecture</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="00_overview" id="architecture_00_overview2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/00_overview:2">
<h1>Foreman Project</h1>

<ul>
<li>Open Source Project

<ul>
<li>Homepage: <a href="http://theforeman.org" target="_blank">http://theforeman.org</a>
</li>
<li>Initial release: 10 September 2009</li>
<li>Written in Ruby and Javascript</li>
</ul>
</li>
<li>Lifecyclemanagement for servers

<ul>
<li>provisioning</li>
<li>configuration</li>
<li>orchestration</li>
<li>monitoring</li>
</ul>
</li>
<li>Web based GUI</li>
<li>Utilizes other tools via smart proxy</li>
</ul>




</div>
<div class="notes-section handouts">

<hr>

<p>Foreman was originally writen by Paul Kelly and Ohad Levy and initially released on 10 September 2009.<br>
Now it is sponsored by Red Hat who use it as base for many of their Enterprise solutions like Red Hat Network Satellite and Red Hat OpenStack distribution.</p>

<p>It is writen in Ruby and Javascript to provide a Web based GUI for server lifecyclemanagement, from provisioning and
configuration to orchestration and monitoring. For integration in the IT infrastructure it utilizes other tools via
its smart proxy architecture.</p>

<p>The project provides an open bug tracker for bug reporting and feature requests, its code on github, IRC support to 
help the community and consists of more than 200 contributors.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Original authors are Paul Kelly and Ohad Levy, now working for Red Hat.</li>
<li>More than 200 contributors, open bug tracker, IRC support.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="00_overview" id="architecture_00_overview3" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="architecture/00_overview:3">
<h1>Architecture</h1>

<p><img src="./file//architecture/_images/foreman_architecture.png" style="float: center; margin-left: 100px; width: 772px; height: 466px;" alt="Foreman - Architecture"></p>


</div>
<div class="notes-section notes">

<ul>
<li>Only required Foreman, all other optional</li>
<li>Next slides provide deeper information on Smart proxies and Compute resources </li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="01_foreman" id="architecture_01_foreman" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/01_foreman">
<h1>Foreman</h1>

<ul>
<li>Web Interface + API + CLI</li>
<li>Supported platforms:

<ul>
<li>Server: RHEL/CentOS, Debian/Ubuntu, (Linux)</li>
<li>DB: PostgreSQL, MySQL, SQLite</li>
<li>Provisioning: RHEL/Fedora, Debian/Ubuntu, Solaris, SuSE, CoreOS, FreeBSD, Juniper Junos, Cisco NX-OS, (Windows, MacOS)</li>
</ul>
</li>
<li>Usermanagement:

<ul>
<li>Users and Groups</li>
<li>Internal / LDAP / Kerberos (via Apache Authentication)</li>
<li>Fine role based privileges</li>
</ul>
</li>
</ul>

<div style="float:right">
<img src="./file//architecture/_images/foreman_loginscreen.png" style="max-width3200px; max-height: 200px; width: 300px; height: 120px; margin: 1px; margin-right: 100px" alt="Foreman Loginscreen">
</div>




</div>
<div class="notes-section handouts">

<div class="pagebreak">continued...</div>

<p>Foreman provides in addition to the Web Interface an API and CLI.</p>

<p>It supports as platform RHEL/CentOS and Debian/Ubuntu via packages and via installation from source
also other Linux distribution. </p>

<p>As database backend PostgreSQL, MySQL and SQLite are supported, while the default is PostgreSQL, 
SQLite is not recommended for productive usage.</p>

<p>The following operating systems are known to successfully install from Foreman: <br>
* RHEL/Fedora <br>
* Debian/Ubuntu <br>
* Solaris <br>
* SuSE <br>
* CoreOS <br>
* FreeBSD <br>
* Juniper Junos <br>
* Cisco NX-OS</p>

<p>Also reported by the community are: <br>
* Windows <br>
* MacOS</p>

</div>
<div class="notes-section notes">

<ul>
<li>Other Linux distributions are supported via source installation</li>
<li>Windows and MacOS are not officially supported but reported by the community</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="02_smart_proxy" id="architecture_02_smart_proxy1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/02_smart_proxy:1">
<h1>Smart Proxy</h1>

<ul>
<li>Autonomous web-based component

<ul>
<li>Restful API to connect to various systems from Foreman</li>
<li>Decentralisation of some Foreman features (templates) for isolated networks</li>
</ul>
</li>
<li>Supported Platforms: RHEL/CentOS, Debian/Ubuntu, (Linux, Windows)</li>
<li>Supported Subsystems:

<ul>
<li>DHCP - ISC DHCP, MS DHCP Servers, Libvirt</li>
<li>DNS - Bind, PowerDNS, Route53, MS DNS Server, Libvirt</li>
<li>BMC - IPMI</li>
<li>Puppet &amp; Puppet CA / Salt / Chef / Ansible</li>
<li>Realm - FreeIPA</li>
<li>TFTP </li>
</ul>
</li>
</ul>




</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The smart proxy is an autonomous web-based component providing a restful API to connect to varios
systems from higher ochestration tools such as Foreman. </p>

<p>The Project provides packages for installation on RHEL/CentOS and Debian/Ubuntu. Installing from
source allows to support other Linux distributions and also Windows which is required for some 
implementations of subsystems.</p>

<p>There are different implementations of various subsystems included in the smart proxy by default
and it easily allows to add additional subsystems and implementations as plugins. For configuration
management the solutions differ to much to be covered by one subsystem. For joining a realm support
for active directory is in development but for now only FreeIPA (an Open Source aquivalent to Active
Directory focused on Linux) is supported.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Support for the realm subsystem to join an active directory is in development</li>
<li>Additional subsystems are added by plugins</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="02_smart_proxy" id="architecture_02_smart_proxy2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/02_smart_proxy:2">
<h1>Smart Proxy - DHCP</h1>

<ul>
<li>Adds and removes host reservations</li>
<li>Requires subnets to be configured</li>
<li>Supports: ISC DHCP, MS DHCP, Libvirt</li>
<li>ISC DHCP:

<ul>
<li>uses OMAPI </li>
</ul>
</li>
<li>MS DHCP:

<ul>
<li>uses netsh on a windows server</li>
<li>needs administrative privileges</li>
</ul>
</li>
<li>Libvirt:

<ul>
<li>not for productive use</li>
<li>uses libvirt API to manage dnsmasq for libvirt</li>
</ul>
</li>
</ul>




</div>
<div class="notes-section handouts">

<hr>

<p>The Smart Proxy DHCP is used to add and remove host reservations to preconfigured subnets and allows to
import them to foreman.</p>

<div class="pagebreak">continued...</div>

<p>On Linux typically a ISC compatible implementation is used to manage DHCP which allows to send commands
via OMAPI. For Microsoft DHCP installation of the Smart Proxy on Windows Server system is required which
needs netsh command installed and the user running the service needs administrative privileges, but the
server does not need to be the DHCP server. For testing enviroments also an implementation for Libvirt
using libvirt API to manage the dnsmasq underneath is available, a productive use is not recommended.</p>

<p>Additional providers like infoblox or remote connection to ISC DHCP are available as plugins.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Libvirt is recommended for local test environments (desktop running kvm and libvirt)</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="02_smart_proxy" id="architecture_02_smart_proxy3" class="slide small smbullets" data-transition="none">
<div class="content small smbullets" ref="architecture/02_smart_proxy:3">
<h1>Smart Proxy - DNS</h1>

<ul>
<li>Adds and removes dns records of type A, AAAA and PTR</li>
<li>Requires zone to be configured as dynamic zones</li>
<li>Supports: Bind, PowerDNS, Route53, MS DNS, Libvirt</li>
<li>Bind:

<ul>
<li>uses nsupdate with preshared key or Kerberos principal</li>
</ul>
</li>
<li>MS DNS:

<ul>
<li>uses nsupdate with Kerberos principal</li>
<li>alternativly: uses dnscmd on a windows server</li>
</ul>
</li>
<li>PowerDNS:

<ul>
<li>directly connects to the database backend</li>
</ul>
</li>
<li>Route53 (DNS in AWS cloud):

<ul>
<li>requires Amazon Web Service account</li>
<li>access and secret key of IAM account with access to Route53</li>
</ul>
</li>
</ul>

<div class="pagebreak">continued...</div>

<ul>
<li>Libvirt:

<ul>
<li>not for productive use</li>
<li>uses libvirt API to manage dnsmasq for libvirt</li>
</ul>
</li>
</ul>




</div>
<div class="notes-section handouts">

<hr>

<p>The Smart Proxy DNS is used to add and remove dns records of type A and PTR, Foreman 1.12 introduced
support for IPv6, but there is no support for additional records. For doing such updates it requires
the zone to be a dynamic zone.</p>

<p>Commonly used on Linux is Bind which takes updates via nsupdate with preshared keys or if used in FreeIPA
with Kerberos principal. The same mechanism could be used for sending updates to Microsofts DNS. Another
possibilty is to install the Smart Proxy on a Windows server and give it the privileges to run dnscmd.
Other implementations like PowerDNS and Route53 are also supported. Libvirt is again only supported as a
testing environment.</p>

<p>Additional providers like infoblox or powerdns are available as plugins.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Foreman does support IPv6 from 1.12 onwards</li>
<li>No support for additional records like CNAME (Support in Smart Proxy exists, GUI WIP)</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="02_smart_proxy" id="architecture_02_smart_proxy4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/02_smart_proxy:4">
<h1>Smart Proxy - TFTP</h1>

<ul>
<li>Used to provide boot-images for PXE boot</li>
<li>Downloads the required files with wget</li>
<li>Creates and deletes PXE configuration based on MAC address</li>
<li>Automatically configured during installation</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The Smart Proxy TFTP provides boot-images for PXE boot, these files are simply downloaded using wget the
first time needed. PXE configuration is created during provisioning based on MAC address. For this subsystem
in the most cases no manual configuration is required because it is completly included in the basic setup.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="02_smart_proxy" id="architecture_02_smart_proxy5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/02_smart_proxy:5">
<h1>Smart Proxy - Puppet / Puppet CA</h1>

<ul>
<li>
<p>Puppet:</p>

<ul>
<li>connects to Puppets API</li>
<li>allows to import puppet environments and classes</li>
<li>optionally triggers immediate Puppet runs</li>
<li>accepts facts and reports</li>
<li>uses Foreman as ENC</li>
</ul>
</li>
<li>
<p>Puppet CA:</p>

<ul>
<li>requires access to ssl directory, autosign configuration and puppet cert command</li>
<li>allows certificate management using the Web GUI</li>
<li>creates autosign entry for hosts during provisioning</li>
</ul>
</li>
</ul>




</div>
<div class="notes-section handouts">

<hr>

<p>The Smart Proxy Puppet connects to the API of Puppet to query puppet environments and classes for import. It
optionally triggers immediate Puppet runs using the deprecated puppet kick command, mcollective, executing puppet
agent command via ssh on the remote system, salt or any custom script. </p>

<div class="pagebreak">continued...</div>

<p>Also it automatically allows a Puppet master known to Foreman as Smart Proxy to upload facts and reports. In addition
the Puppet master can access Foreman as an External Node Classifier to build its catalog.</p>

<p>The Smart Proxy Puppet CA is independent from the one for Puppet. It requires access to Puppet's ssl directory, the 
autosign configuration and puppet cert command via sudo. The Web GUI utilizes the Smart Proxy for certificate management
and creates autosign entry for hosts during provisioning for accessing puppet without manual intervention.</p>

</div>
<div class="notes-section notes">

<p>WIP: Tokenbased autosigning - <a href="https://github.com/theforeman/smart-proxy/pull/592" target="_blank">https://github.com/theforeman/smart-proxy/pull/592</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="03_compute_resource" id="architecture_03_compute_resource" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/03_compute_resource">
<h1>Compute Resource</h1>

<ul>
<li>Plugin to create and manage virtual hosts

<ul>
<li>based on fog (ruby cloud service library)</li>
</ul>
</li>
<li>Depending on virtualization provider

<ul>
<li>Unattended / Image-based installation</li>
<li>Console access</li>
<li>Power management</li>
<li>Changing virtual machine configuration</li>
</ul>
</li>
<li>Compute Profiles - predefined template for virtual hardware</li>
</ul>


</div>
<div class="notes-section handouts">

<p>Compute Resource refers to a virtualization or cloud service which is integrate into Foreman
as a plugin. Those plugins are based on the ruby cloud service library named fog and allows
to create and manage virtual hosts. Depending on the provider machines are installed from an
image or unattended in the same fashion like a bare metal host. It allows to access the console
and do power management operations like shutting down or resetting the system. Some providers
also allow to change the virtual hardware afterwards.</p>

<div class="pagebreak">continued...</div>

<p>The table shows the providers directly supported by the Foreman Project and its capabilities,
additional providers like OpenNebula are community contributed.</p>

<table>
<thead>
<tr>
<th>Provider</th>
<th>Package</th>
<th>Unattended installation</th>
<th>Image-based</th>
<th>Console</th>
<th>Power management</th>
</tr>
</thead>
<tbody>
<tr>
<td>EC2</td>
<td>foreman-ec2</td>
<td>no</td>
<td>yes</td>
<td>read-only</td>
<td>yes</td>
</tr>
<tr>
<td>Google Compute Engine</td>
<td>foreman-gce</td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>Libvirt</td>
<td>foreman-libvirt</td>
<td>yes</td>
<td>yes</td>
<td>VNC or SPICE</td>
<td>yes</td>
</tr>
<tr>
<td>OpenStack Nova</td>
<td>foreman-compute</td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>oVirt / RHEV</td>
<td>foreman-ovirt</td>
<td>yes</td>
<td>yes</td>
<td>VNC or SPICE</td>
<td>yes</td>
</tr>
<tr>
<td>Rackspace</td>
<td>foreman-compute</td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>VMware</td>
<td>foreman-vmware</td>
<td>yes</td>
<td>yes</td>
<td>VNC</td>
<td>yes</td>
</tr>
</tbody>
</table>

<p>Compute Profiles allow to predefine the virtual hardware as a template to select for provisioning.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="00_overview" id="installation_00_overview" class="slide subsection" data-transition="none">
<div class="content subsection" ref="installation/00_overview">
<h1>3 Installation</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="01_requirements" id="installation_01_requirements1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/01_requirements:1">
<h1>Requirements - Operating System</h1>

<ul>
<li>Red Hat Enterprise Linux 7

<ul>
<li>EPEL repository</li>
<li>Optional and RHSCL Channel</li>
<li>optionally: Puppetlabs Repository</li>
</ul>
</li>
<li>CentOS, Scientific Linux, Oracle Linux 7

<ul>
<li>EPEL repository</li>
<li>SCLorg SIG repository</li>
<li>optionally: Puppetlabs Repository</li>
</ul>
</li>
<li>Debian 8 &amp; 9

<ul>
<li>optionally: Puppetlabs Repository</li>
</ul>
</li>
<li>Ubuntu 16.04

<ul>
<li>optionally: Puppetlabs Repository</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>On the mentioned operating systems packages are provided by the project, a installation from source
is not recommended. On all platforms all updates should be applied before installation. Using the
Puppetlabs Repository providing an up-to-date version of Puppet is preferred which of the supported
versions touse is based on user requirements.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="01_requirements" id="installation_01_requirements2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/01_requirements:2">
<h1>Requirements - Puppet &amp; Facter</h1>

<ul>
<li>All-in-one and FHS packaging model are both supported for Puppet 4 and 5

<ul>
<li>Puppet 3 is no longer supported with Foreman 1.17 and higher</li>
<li>Puppet Enterprise is not supported</li>
</ul>
</li>
<li>Puppet Master and Puppet Server are both supported</li>
<li>Structured Facts are supported with Foreman &gt;= 1.12</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Puppet 4.x and 5.x is supported with current versions for All-in-one and Filesystem-Hierarchy-Standard packaging standard.
Puppet 3.x support was dropped with Foreman 1.17.
Puppet Enterprise is not supported, but can work with manual tweaking of the setup.</p>

<div class="pagebreak">continued...</div>

<p>Both versions of the central server in a Puppet environment are supported. If the All-in-on package of Puppet 4 or 5
is found it will use the Puppet Server, in all other cases it will setup Puppet Master using Apache and Passenger.</p>

<p>Support for structured facts provided by Facter 2.x was added with Foreman 1.12.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="01_requirements" id="installation_01_requirements3" class="slide small" data-transition="none">
<div class="content small" ref="installation/01_requirements:3">
<h1>Requirements - Communication</h1>

<p>Port matrix (depending on installation)</p>

<table>
<thead>
<tr>
<th>Port</th>
<th>Protocol</th>
<th>Required For</th>
</tr>
</thead>
<tbody>
<tr>
<td>53</td>
<td>TCP &amp; UDP</td>
<td>DNS Server</td>
</tr>
<tr>
<td>67, 68</td>
<td>UDP</td>
<td>DHCP Server</td>
</tr>
<tr>
<td>69</td>
<td>UDP</td>
<td>TFTP Server</td>
</tr>
<tr>
<td>80, 443</td>
<td>TCP</td>
<td>HTTP &amp; HTTPS access to Foreman web UI - using Apache + Passenger</td>
</tr>
<tr>
<td>3000</td>
<td>TCP</td>
<td>HTTP access to Foreman web UI - using standalone WEBrick service</td>
</tr>
<tr>
<td>3306</td>
<td>TCP</td>
<td>Separate MySQL database</td>
</tr>
<tr>
<td>5910 - 5930</td>
<td>TCP</td>
<td>Server VNC Consoles</td>
</tr>
<tr>
<td>5432</td>
<td>TCP</td>
<td>Separate PostgreSQL database</td>
</tr>
<tr>
<td>8140</td>
<td>TCP</td>
<td>Puppet Master</td>
</tr>
<tr>
<td>8443</td>
<td>TCP</td>
<td>Smart Proxy, open only to Foreman</td>
</tr>
</tbody>
</table>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Depending on your installation the ports above are required to be accessable on the Foreman server,
by Foreman and the managed systems.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="02_installer" id="installation_02_installer" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/02_installer">
<h1>Foreman Installer</h1>

<ul>
<li>Based on a separate project named kafo (ruby gem)</li>
<li>Recommended way of installation</li>
<li>Utilizes Puppet modules to install and configure

<ul>
<li>Foreman web UI</li>
<li>Smart Proxy</li>
<li>Passenger (for Puppet master and Foreman)</li>
<li>TFTP</li>
<li>DNS</li>
<li>DHCP</li>
</ul>
</li>
<li>Runs parameterized or interactively

<ul>
<li>command line flags</li>
<li>answers file</li>
<li>scenarios</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The Foreman installer is based on a separate project named kafo (Katello/Foreman Installer) which could also
be used by other projects. It utilizes existing Puppet modules to install and configure all required
components. Module parameters are provided as commandline arguments to the installer,
as an answers file formatted in yaml (can be autosaved) or by running the installer
in interactive mode. The installer supports also predefined scenarios which is only used by Katello for now.</p>

<p>In a default installation this would be:</p>

<ul>
<li>Apache HTTP with SSL (using a certificate signed by Puppet CA)</li>
<li>Foreman running under mod_passenger</li>
<li>Puppet master running under mod_passenger</li>
<li>TFTP server (on RHEL and derivates under xinetd)</li>
<li>Smart Proxy using SSL configured for Puppet and TFTP</li>
</ul>

<p>Depending on provided parameters other modules are enabled:</p>

<ul>
<li>ISC DHCP server</li>
<li>Bind DNS server</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/03_scenarios:1">
<h1>Scenarios</h1>

<ul>
<li>All-in-one</li>
<li>All-in-one with additional Puppet masters</li>
<li>Separate Puppet masters</li>
<li>Smart proxies</li>
<li>Integration of PuppetDB</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The Foreman installer allows to setup different scenarios depending on its parameters or answers in interactive mode.
All the scenarios above are explained in the course material, commands required can be found in the Foreman manual on
the project homepage. For the training we will stick to the default all-in-one setup and add additional Smart proxies.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios2" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:2">
<h1>All-in-one</h1>

<ul>
<li>Default setup on unparameterized run</li>
</ul>

<div style="text-align:center"><img src="./file//installation/_images/installation_all-in-one.png" style="float: center; margin-left: 50px; width: 680px; height: 377px;" alt="Installation All-in-one"></div>

<ul>
<li>Expandable with additional plugins and Smart proxies</li>
</ul>


</div>
<div class="notes-section notes">

<ul>
<li>Plugins can be added simply as parameter during installation or later on</li>
<li>Smart proxies are covered later because it is same procedure for installation on Foreman host or others</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios3" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:3">
<h1>All-in-one with additional Puppet masters</h1>

<ul>
<li>Default setup on Foreman host</li>
<li>Precreate certificates on Puppet CA</li>
<li>Run installer with parameters to disable Foreman on additional Puppet Masters</li>
</ul>

<div style="text-align:center"><img src="./file//installation/_images/installation_additional-masters.png" style="float: center; margin-left: 50px; width: 616px; height: 393px;" alt="Installation Additional Puppet Masters"></div>


</div>
<div class="notes-section notes">

<ul>
<li>Preferred scenario for growing the Infrastructure and making Puppet Master high available.</li>
<li>But all Puppet Master depend on Foreman so place it on a high available machine.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios4" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:4">
<h1>Separate Puppet masters</h1>

<ul>
<li>Setup on Foreman host with Puppet Master and Smart Proxies disabled</li>
<li>Run installer with parameters to disable Foreman on separate Puppet Masters</li>
</ul>

<div style="text-align:center"><img src="./file//installation/_images/installation_separate-masters.png" style="float: center; margin-left: 50px; width: 616px; height: 446px;" alt="Installation Separate Puppet Masters"></div>


</div>
<div class="notes-section notes">

<ul>
<li>Same as the scenario before but removes load created by Puppet Master from the Foreman server</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios5" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:5">
<h1>Smart Proxies</h1>

<ul>
<li>Foreman installer helps to setup Smart Proxies</li>
</ul>

<div style="text-align:center"><img src="./file//installation/_images/installation_smart-proxies.png" style="float: center; margin-left: 50px; width: 771px; height: 301px;" alt="Installation Smart proxies"></div>


</div>
<div class="notes-section notes">

<ul>
<li>Smart Proxies can also be added to the All-in-one Foreman host - we will do so in the Training</li>
<li>Requires certificate for communication and OAuth provided in the settings of Foreman.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios6" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:6">
<h1>Integration of PuppetDB</h1>

<ul>
<li>Foreman installer helps to integrate PuppetDB</li>
</ul>

<div style="text-align:center"><img src="./file//installation/_images/installation_puppetdb.png" style="float: center; margin-left: 50px; width: 773px; height: 302px;" alt="Installation PuppetDB"></div>


</div>
<div class="notes-section notes">

<ul>
<li>Integration of existing PuppetDB, no installation!</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="04_installation" id="installation_04_installation1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/04_installation:1">
<h1>Lab 3.1: Prepare Installation</h1>

<ul>
<li>Objective:

<ul>
<li>Prepare the installation of Foreman</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Start the virtual machine "foreman.localdomain" and connect via SSH</li>
<li>Make Puppet vendor repository for Puppet 5 available</li>
<li>Make EPEL repository available</li>
<li>Make Foreman repository available</li>
<li>Install foreman-installer</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="04_installation" id="installation_04_installation2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/04_installation:2">
<h1>Lab 3.2: Install an All-in-one setup</h1>

<ul>
<li>Objective:

<ul>
<li>Install an All-in-one setup of Foreman with DNS and DHCP</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Run foreman-installer with additional parameters</li>
</ul>
</li>
<li>Notes:

<ul>
<li>DNS (interface=eth0, zone=localdomain, reverse=0.10.in-addr.arpa, forwarders=8.8.8.8,8.8.4.4)</li>
<li>DHCP (interface=eth0, gateway=10.0.0.1, range=10.0.0.100-10.0.0.200, nameserver=10.0.0.2)</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section notes">

<ul>
<li>Show the students the interactive mode in advance - we will not use it to prevent typos</li>
<li>Show the students the answer file - it provides information for further runs of the installer</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="04_installation" id="installation_04_installation3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/04_installation:3">
<h1>Lab 3.3: Add DNS configuration to Foreman</h1>

<ul>
<li>Objective:

<ul>
<li>Create the domain 'localdomain' and associate Smart proxy</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Login to Foreman</li>
<li>Navigate to 'Infrastructure &gt; Domains'</li>
<li>Add the domain 'localdomain' and associate Smart Proxy 'foreman.localdomain'</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section notes">

<ul>
<li>If the Puppet agent on the Foreman server has already run the domain will already be created
but not associated.</li>
<li>With Foreman 1.21 multi-tenancy is active by default, but not all objects get it assigned by default.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="04_installation" id="installation_04_installation4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/04_installation:4">
<h1>Lab 3.4: Add DHCP configuration to Foreman</h1>

<ul>
<li>Objective:

<ul>
<li>Create the subnet 'foreman' and associate Smart proxies</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Navigate to 'Infrastructure &gt; Smart proxies'</li>
<li>Add the subnet 'foreman' by importing from the Smart Proxy </li>
<li>Adjust additional settings via 'Infrastructure &gt; Subnets'</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section notes">

<ul>
<li>Subnets are not automatically created like domains.</li>
<li>The Smart Proxy should be moved into organization and location before creating the subnet.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics1" class="slide subsection" data-transition="none">
<div class="content subsection" ref="provisioning/01_basics:1">
<h1>4 Provisioning</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/01_basics:2">
<h1>Provisioning</h1>

<ul>
<li>
<p>Definition:</p>

<ul>
<li>Server provisioning is a set of actions to prepare a server with appropriate systems, data and software,
and make it ready for network operation.* </li>
</ul>
</li>
<li>
<p>Task:</p>

<ul>
<li>Automate it!</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Wikipedia defines server provisioning as <em>a set of actions to prepare a server with appropriate systems, data and software,
and make it ready for network operation</em> and your task will be to automated it.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/01_basics:3">
<h1>Basics on automated installation</h1>

<ul>
<li>Installer asks questions during installation</li>
<li>Answer file could be provided in several ways

<ul>
<li>Basic configuration like timezone and language settings</li>
<li>Partition layout</li>
<li>Software installation</li>
<li>Registration to management tools</li>
</ul>
</li>
<li>Additional scripts during and after installation</li>
</ul>




</div>
<div class="notes-section handouts">

<hr>

<p>For an automated installation it is required that the installer of the operating system allows to answer the questions
normally asked to the users by providing an answer file. </p>

<div class="pagebreak">continued...</div>

<p>The different Linux installers can handle answer files provided via network protocols like http and ftp, network file
systems or placed on the installation media. In this way basic configuration like timezone, language or network settings 
can be handled, furthermore partition layout can be created, software is installed and depending on the solution also 
registration to management tools is directly integrated. </p>

<p>If the installer could not solve requirements directly, scripts could be provided to be executed during and after installation.</p>

<p>The mechanism differs for the distributions.</p>

<table>
<thead>
<tr>
<th>Operating system family</th>
<th>Installer</th>
<th>Answer files</th>
</tr>
</thead>
<tbody>
<tr>
<td>Red Hat</td>
<td>Anaconda</td>
<td>Kickstart</td>
</tr>
<tr>
<td>Debian</td>
<td>Debian-Installer</td>
<td>Preseed</td>
</tr>
<tr>
<td>SuSE</td>
<td>YaST2</td>
<td>AutoYaST2</td>
</tr>
</tbody>
</table>

<div class="pagebreak">continued...</div>

<p>Other operating systems have similar mechanisms but not all the capabilities. Microsoft Windows for example requires
answer file to be placed on the installation media or a "physical" disk mounted during installation like floppy or usb.</p>

<p>Regardless of the capabilities with configuration management in place do a simple installation and let the configuration
management solution do its work.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Simple installation than use configuration management</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/01_basics:4">
<h1>Kickstart</h1>

<ul>
<li>Simple textfile with different sections

<ul>
<li>Main section with commands for basic configuration and partitioning</li>
<li>Package section for software installation</li>
<li>Pre and post scripts during installation</li>
<li>Additional sections can be added by addons</li>
</ul>
</li>
<li>Added as kernel parameter to boot media</li>
</ul>




</div>
<div class="notes-section handouts">

<hr>

<p>Kickstart is the answer file to the installer used by Red Hat Enterprise Linux, CentOS, Scientific Linux, other
derivates and Fedora.</p>

<p>It is basicly a simple text file providing commands for basic configuration and partitioning in its main section
and a list of packages and package groups to install in addition to the core system in a package section. Skripts
can be added in separate sections to run as pre-installation task or post-installation on the installer or using
chroot on the installed system.</p>

<div class="pagebreak">continued...</div>

<p>Lastest versions allow to extend the installer with addons which can also provide its own kickstart section for
automation. One example is the OSCAP Anaconda Addon which allows to validate against a security profile already
during installation.</p>

<p>The URL to the kickstart file can be provided during installation or for automation added as a kernel parameter
to the boot media. Necessary answers missing will be queried.</p>

<p>Additional information: <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/chap-kickstart-installations.html" target="_blank">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/chap-kickstart-installations.html</a></p>

</div>
<div class="notes-section notes">

<ul>
<li>If someone asks show them the file in Foreman, but we will have a look into in the exercise, too</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/01_basics:5">
<h1>Preseed</h1>

<ul>
<li>Simple textfile with answers

<ul>
<li>Basic configuration and partitioning</li>
<li>Software installation</li>
<li>Scripts after installation</li>
</ul>
</li>
<li>Added as kernel parameter to boot media</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Preseed is the answer file for the Debian Installer used by Debian and Ubuntu.</p>

<p>It is basicly a simple text file providing answers to the installation questions. It uses for all types of 
configuration the same syntax. Scripts can be downloaded to the system and be executed after the installation.</p>

<p>The URL to the preseed file can be added to the boot menu entry or as a kernel parameter to the boot media for
automation, an additional parameter tells the installer to run unattended or use the answers only as default.</p>

<p>Additional information: <a href="https://wiki.debian.org/DebianInstaller/Preseed" target="_blank">https://wiki.debian.org/DebianInstaller/Preseed</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics6" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/01_basics:6">
<h1>AutoYaST2</h1>

<ul>
<li>Structured XML file

<ul>
<li>Basic configuration and partitioning</li>
<li>Software installation</li>
<li>Scripts during and after installation on different times</li>
<li>Configuration of selected software and devices</li>
</ul>
</li>
<li>Added as kernel parameter to boot media</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>AutoYaST2 is the answer file for SuSE Linux Enterprise Server, Desktop and openSuSE using YaST2 as installer.</p>

<p>It is a structured XML file meant to be created by YaST and not by hand which provides answers to the installer
quests. Different data structures are used for all kinds of configuration. It can run scripts before installation
starts, after partitioning, after package installation using chroot, post installation on first boot before 
and after starting services. In addition it can configure selected software and devices like printing service
or soundcards. Other services can be configured with an file based configuration management.</p>

<p>The URL to the autoyast file has to be added as a kernel parameter to the boot media. Furthermore it allows
to create a control server providing rules to automatically select autoyast files.</p>

<p>Additional information: <a href="http://doc.opensuse.org/projects/autoyast/" target="_blank">http://doc.opensuse.org/projects/autoyast/</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="02_configuration" id="provisioning_02_configuration1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/02_configuration:1">
<h1>Configuration in Foreman</h1>

<ul>
<li>Operating System Version must be associated to:

<ul>
<li>Architecture</li>
<li>Installation media</li>
<li>Partition tables</li>
<li>Provisioning templates</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>In Foreman the provisioning is centred on the operating system which has to be associated to
the hardware architectures like i386 or x86_64, the installation media being the URL where
to find the boot media and software packages, partition tables and provisioning templates.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="02_configuration" id="provisioning_02_configuration2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/02_configuration:2">
<h1>Provisioning templates</h1>

<ul>
<li>ERB-Templates allow scripting and inclusion of snippets</li>
<li>Types:

<ul>
<li>PXELinux / PXEGrub / PXEGrub2 / iPXE</li>
<li>Provision</li>
<li>Finish</li>
<li>user_data</li>
<li>Script</li>
</ul>
</li>
<li>Selected on best match:

<ul>
<li>Host group and Environment</li>
<li>Host group</li>
<li>Environment</li>
<li>Operating system</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The templates are using ERB (embedded ruby) which allows to use parameters in the files, basic scripting
like conditionals and inclusion of snippets. Snippets can be everything from scripts to configuration files
you want to maintain independently because it is the same configuration for inclusion in different other
files or it will bloat up one file to render it unmaintainable.</p>

<p>Depending on different provisioning mechanisms and methods other kinds of templates are required.</p>

<ul>
<li>PXELinux - Deployed to the TFTP server to ensure the Host boots the correct installer with the correct kernel options for BIOS boot</li>
<li>PXEGrub / PXEGrub2 - Used in PXE environments in place of PXELinux for EFI boot</li>
<li>iPXE - Used in {g,i}PXE environments in place of PXELinux</li>
<li>Provision - The main unattended installation file, e.g. Kickstart or Preseed</li>
<li>Finish - A post-install script used to make custom actions after the main provisioning is complete</li>
<li>user_data - Similar to a Finish script, this can be assigned to hosts built on user_data-capable images (e.g. Openstack, EC2, etc)</li>
<li>Script - An arbitrary script, not used by default, useful for certain custom tasks</li>
</ul>

<p>Templates can be associated to operating systems, host groups, environments or combinations of host group and environment.
It will then select the templates to use on best match.
Partition tables are handled separately to allow the usage of the same host template with different disk layouts.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="02_configuration" id="provisioning_02_configuration3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/02_configuration:3">
<h1>Lab 4.1: Prepare PXE installation of CentOS</h1>

<ul>
<li>Objective:

<ul>
<li>Prepare the installation of CentOS using PXE</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Change the Installation media "CentOS mirror" to the local repo</li>
<li>Associate the PXELinux template "Kickstart default PXELinux" with CentOS</li>
<li>Associate the Provision template "Kickstart default" with CentOS</li>
<li>Associate the operating system with the Partition table "Kickstart default", Installation media "CentOS mirror",
select the Templates and set Parameter "enable-puppetlabs-puppet5-repo" to "true"</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="02_configuration" id="provisioning_02_configuration4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/02_configuration:4">
<h1>Lab 4.2: Prepare PXE installation of Debian</h1>

<ul>
<li>Objective:

<ul>
<li>Prepare the installation of Debian using PXE</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Change the Installation media "Debian mirror" to the local repo</li>
<li>Create the Operating system "Debian" with Major version "9", Description "Debian stretch", Family "Debian", Release name "stretch"</li>
<li>Associate the PXELinux template "Preseed default PXELinux" with Debian</li>
<li>Associate the Provision template "Preseed default" with Debian</li>
<li>Associate the finish template "Preseed default finish" with Debian</li>
<li>Associate the operating system with the Templates and set Architecture "x86_64", Partition table "Preseed custom LVM" and "Preseed default", Installation media "Debian mirror" and set parameter "enable-puppetlabs-puppet5-repo" to "true"</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<ul>
<li>Tell the students to skip Debian if only providing a local CentOS-Mirror.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="02_configuration" id="provisioning_02_configuration5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/02_configuration:5">
<h1>Foreman Setup</h1>

<ul>
<li>Designed to help with the initial setup

<ul>
<li>Subnet and Domain information as input</li>
<li>Foreman-Installer commands as output</li>
<li>Configuration of Foreman host</li>
<li>Templates and Operating systems association</li>
<li>Installation media</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The Foreman Plugin Setup is created to help with the initial setup (the steps we did manually).
It asks for domain and subnet information as input and will output Foreman-Installer commands. In addition
it will ensure configuration of the Foreman host, association of templates and operating systems and existence
of installation media.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="03_pxe" id="provisioning_03_pxe1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="provisioning/03_pxe:1">
<h1>Provisioning using PXE</h1>

<ul>
<li>Identifier is the mac address</li>
</ul>

<div style="text-align:center"><img src="./file//provisioning/_images/pxe.png" style="float: center; margin-left: 125px; width: 760px; height: 340px;" alt="Provisioning PXE"></div>


</div>
<div class="notes-section notes">

<ul>
<li>Additional communication to Foreman, Puppet and other systems depending on the PXE configuration/answer file</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="03_pxe" id="provisioning_03_pxe2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/03_pxe:2">
<h1>Lab 4.3: Create a virtual machine "pxe"</h1>

<ul>
<li>Objective:

<ul>
<li>Create a virtual machine "pxe" for PXE installation</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Open "Virtual Machine Manager" application</li>
<li>Select "New virtual machine" from the menu or by pressing the button</li>
<li>Select PXE boot</li>
<li>Select "Linux" and "Red Hat Enterprise Linux 7.5" for CentOS or "Debian Stretch" for Debian according to your preferences</li>
<li>Keep the minimum requirements for RAM, CPU and Disk</li>
<li>Name your VM "pxe" and select the network "foreman"</li>
<li>Create the VM and immediately pause it so in the next lab the required configuration in Foreman can be created</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section notes">

<ul>
<li>If a student did not pause the system, he has to add the NIC as Boot media and change the boot order, shutdown the machine
and start it up again later</li>
<li>CentOS will require 1.5 GB at least</li>
<li>If the environment is not avialable, assign it to "Default Organization" and "Default Location".</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="03_pxe" id="provisioning_03_pxe3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/03_pxe:3">
<h1>Lab 4.4: Configure the system "pxe" in Foreman</h1>

<ul>
<li>Objective:

<ul>
<li>Configure the system "pxe" in Foreman and start the installation</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Open Foreman's host dialog using "Host &gt; Create Host"</li>
<li>On the Host tab name it "pxe" and select the Environment, Puppet CA and Master</li>
<li>On the Operating system tab select the Architecture, Operating System, Media, Partition table and set a Root password.</li>
<li>On the Interface tab click edit to configure the interface with the MAC address, identifier "eth0", select Domain and Subnet and keep the suggested IP address.</li>
<li>Unpause the VM</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>In the Interface tab it is possible to add multiple interfaces and also virtual interfaces like VLAN tagged interfaces or aliases.
Only one can be assigned as the primary interface mapped to the DNS record and only one as provisioning interface for PXE configuration
or connecting for executing scripts during installation. This can be the same interface but does not have to be in cases you have a
dedicated installation network.</p>

<p>Instead of setting the root password for every host created, a default can be set by providing a password hash on "Administer &gt; Settings"
in the Provisioning tab as Root password. This is an MD5 hash for being supported by every Linux distribution.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="03_pxe" id="provisioning_03_pxe4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/03_pxe:4">
<h1>Hostgroups</h1>

<ul>
<li>Grouping Hosts

<ul>
<li>Nested groups in a hierarchical way</li>
</ul>
</li>
<li>Adds defaults to hosts

<ul>
<li>Required options for provisioning</li>
<li>Options for configuration management</li>
<li>Options for compute resources</li>
<li>Parameters</li>
</ul>
</li>
<li>Allows to associate templates</li>
</ul>


</div>
<div class="notes-section handouts">

<p>Hostgroups are used to group hosts, the groups can be organized in a hierarchical way by nesting them.</p>

<p>The Hostgroups allows to add defaults for all options required by Foreman for provisioning and depending on your environment also
for configuration management and compute resources. Additional parameters can be set.</p>

<p>Furthermore to providing defaults configured at the hostgroup "Provisioning templates" can be associated to change from the operating
system default.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="provisioning/04_compute_resource:1">
<h1>Provisioning using Compute resource libvirt</h1>

<ul>
<li>Identifier is the name of the system</li>
</ul>

<div style="text-align: center"><img src="./file//provisioning/_images/compute_resource.png" style="float: center; margin-left: 110px; width: 795px; height: 445px;" alt="Provisioning Compute resource libvirt"></div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/04_compute_resource:2">
<h1>Lab 4.5: Prepare Compute resource libvirt</h1>

<ul>
<li>Objective:

<ul>
<li>Prepare Compute resource libvirt to install a virtual machine</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Compute resource using the Foreman installer</li>
<li>Create a passphraseless ssh-key for user foreman</li>
<li>Copy the public key to the root account of the host "host.localdomain"</li>
<li>Configure the Compute resource in Foreman Web GUI</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The Compute resource does not only provide the possibility to provision virtual machines, it also allows access to power management of
unmanaged systems and to deleted them from the virtualization platform. Also associating an unmanaged system to an already existing one
is possible.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/04_compute_resource:3">
<h1>Lab 4.6: Create the virtual machine "compute" from Foreman</h1>

<ul>
<li>Objective:

<ul>
<li>Create the virtual machine "compute" from Foreman Web GUI and start an unattended installation</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Open Foreman's host dialog using "Host &gt; Create Host"</li>
<li>In the Virtual Machine tab change the Storage type to "QCOW2"</li>
<li>In the Host tab name it "compute" and select to deploy on the Compute resource, the Environment, Puppet CA and Master</li>
<li>In the Operating system tab select the Architecture, Operating System, Media, Partition table and set a Root password.</li>
<li>In the Interface tab click edit to configure the interface with identifier "eth0", select Domain and Subnet and keep 
the suggested IP address, for the Libvirt options choose the virtual network "foreman"</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Compute resource options depend on the used Compute resource so other options will be available for VMware than for libvirt.</p>

<p>Defaults for the Compute resource options can be set using a Compute profile.</p>

<p>Storage type "QCOW2" enables you to use snapshots unlike "RAW".</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/04_compute_resource:4">
<h1>Compute profiles</h1>

<ul>
<li>Used to provide defaults for virtual machine creation</li>
<li>Default provides three for different sized VMs</li>
<li>Same profile names could be used for different Compute resources

<ul>
<li>Different defaults for same type of systems based on virtualization platform</li>
<li>Only available to Compute resource if configured</li>
</ul>
</li>
<li>Available in "New Host" dialog</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Compute profiles are used to provide defaults for the virtual machine creation. Per default three profiles
are available and only have to be configured, but you can create as many as needed. The same profile can differ
based on the Compute resource used to provide defaults matching the virtualization platform.</p>

<p>If one is configured for a Compute resource option to choose from it is available on new host dialog after choosing
the Compute resource to deploy on.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/04_compute_resource:5">
<h1>Images</h1>

<ul>
<li>Available to install from instead of unattended installation</li>
<li>Image has to be configured

<ul>
<li>On Compute resource using "New image"</li>
<li>Has to provide access via ssh to run finish scripts</li>
<li>API can allow to run user_data scripts for additional changes</li>
</ul>
</li>
<li>Available in "Create host" dialog

<ul>
<li>Speeds up installation</li>
<li>Should be very basic image, but of course can be very featureful if required</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Images are available as install source to all Compute resources, for some as the only source. To be available to Foreman
it has also to be configured using the "New image" dialog after selecting a Compute resource. The image has to be created
with an user which has shell access to run finish scripts and depending on the Compute resource also user_data scripts can run
during virtual machine creation to change settings.</p>

<p>If a image is configured it is possible to choose it from the "Create host" dialog on the "Operating system" tab. In some cases
it can speed up the installation process, but of course an unattended installation will give you a cleaner and more up to date
system. If using a configuration management a very basic image should be prefered, but if required a image can be very featureful
like having some proprietary software installed which is quite complicated to install with configuration management.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource6" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/04_compute_resource:6">
<h1>Console</h1>

<ul>
<li>Direct console access on virtual machines</li>
<li>Javascript library noVNC</li>
<li>Protocols: VNC or SPICE</li>
<li>Depending on Compute Resource provider</li>
<li>Encryption and Authentication based on environment</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Foreman uses the javascript library noVNC to give the user direct access to the console
of a virtual machine depending on the Compute Resource provider. The Foreman manual
explains additional steps required on the Compute Resource if not available by default.</p>

<p>The protocols available are VNC and SPICE, encryption and authentication depends on
your setup.</p>

<p>If you want to try it in the training environment you have to enable the connection by
executing the following command on the laptop.</p>

<pre><code># iptables -I INPUT -p tcp -m multiport --dports 5901:6000 -i virbr1 -j ACCEPT
</code></pre>

<p><br></p>

<p>Furthermore Firefox will block the websocket connection unless you change setting 
network.websocket.allowInsecureFromHTTPS to true in about:config.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="provisioning/05_discovery:1">
<h1>Provisioning using Discovery plugin</h1>

<ul>
<li>Identifies itself as discovered host with its mac address</li>
</ul>

<div style="text-align: center"><img src="./file//provisioning/_images/discovery.png" style="float: center; margin-left: 125px; width: 767px; height: 437px;" alt="Provisioning Discovery"></div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/05_discovery:2">
<h1>Lab 4.7: Install and configure the Discovery plugin</h1>

<ul>
<li>Objective:

<ul>
<li>Install and configure the Discovery plugin</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Run the Foreman installer to install the Discovery plugin for Foreman and the Smart Proxy and download the image</li>
<li>Adjust and deploy the PXE default configuration</li>
<li>Enable the discovery widget in the dashboard</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/05_discovery:3">
<h1>Lab 4.8: Create a virtual machine "discovery"</h1>

<ul>
<li>Objective:

<ul>
<li>Create a virtual machine "discovery" for PXE installation</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Open "Virtual Machine Manager" application</li>
<li>Select "New virtual machine" from the menu or by pressing the button</li>
<li>Select PXE boot</li>
<li>Select "Linux" and "Red Hat Enterprise Linux 7.5" for CentOS or "Debian Stretch" for Debian according to your preferences</li>
<li>Keep the minimum requirements for RAM, CPU and Disk</li>
<li>Name your virtual machine "discovery" and select the network "foreman"</li>
<li>Select "Adjust Virtual Machine settings" and add the nic and disk as boot options</li>
<li>Create the virtual machine and when the PXE menu appears select "Foreman Discovery Image"</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section notes">

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/05_discovery:4">
<h1>Lab 4.9: Configure the system "discovery" in Foreman</h1>

<ul>
<li>Objective:

<ul>
<li>Configure the system "discovery" in Foreman and start installation</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Select the newly discovered host from the widget</li>
<li>On the Discovered host view select the action "Provision" and then "Customize Host"</li>
<li>On the Host tab name it "discovery" and select the Environment, Puppet CA and Master</li>
<li>On the Operating system tab select the Architecture, Operating System, Media, Partition table and set a Root password</li>
<li>On the Interface tab click edit to configure the interface add the Domain "localdomain"</li>
<li>Submit to start the installation</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/05_discovery:5">
<h1>Discovery rules</h1>

<ul>
<li>Automatic rule based installation

<ul>
<li>Located in "Configure &gt; Discovery rules"</li>
<li>Match on facts provided by the discovery image</li>
<li>Naming based on template</li>
<li>Installation and configuration based on hostgroup</li>
<li>Provides a limit and a priority for ordering </li>
</ul>
</li>
<li>Not enabled by default

<ul>
<li>Requires "Discovered" setting "Auto provisioning" changed to "true"</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Discovery rules allow an automatic rule based installation. Depending on facts provided by the discovery image a rule is selected
and the system is installed based on the configuration of the selected hostgroup. Naming is done based on a template using ERB which
allows to use facts or random numbers, by default the macaddress is used. Setting a limit and a priority allows some ordering like
deploy first two backend systems of this size and then two frontend systems.</p>

<p>Usage of the rule based installation is not enabled by default but simple switched on by changing the "Discovered" setting "Auto provisioning" to "true".</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery6" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/05_discovery:6">
<h1>Discovery image</h1>

<ul>
<li>Provided by the project

<ul>
<li>Allows to add custom facts</li>
<li>Allows to add custom extensions like drivers</li>
<li>Could be remastered to provide defaults</li>
<li>Can use kexec to directly boot a new kernel</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The discovery image is provided by the project also with corresponding tools and documentation on extending and remastering it.</p>

<p>It also allows to add custom facts in its interface, as boot parameter or as an extension which enables a workflow like booting the image
and adding desired system type as fact.</p>

<p>Furthermore it could be used in enviroments without PXE and DHCP by providing all settings including an ip address and boot directly
into a new kernel with kexec. This is only available for Red Hat derivates at the moment.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="06_bootdisk" id="provisioning_06_bootdisk1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/06_bootdisk:1">
<h1>Provisioning using Bootdisk plugin</h1>

<ul>
<li>Foreman Plugin Bootdisk provides 4 kinds of boot images

<ul>
<li>Host images</li>
<li>Full host image</li>
<li>Generic image</li>
<li>Subnet image</li>
</ul>
</li>
<li>Based on iPXE for environments without control over network</li>
<li>Adds disk based provisioning to Compute resources</li>
</ul>


</div>
<div class="notes-section handouts">

<p>For the installation in an environment you do not have total control over the network infrastructure the
Foreman Plugin Bootdisk provides 4 kinds of boot images based on iPXE.</p>

<p>The host image contains a static network configuration, loads the installer from the media configured in Foreman
and the Provisioning configuration from Foreman itself. So it requires no DHCP and TFTP in the network.</p>

<div class="pagebreak">continued...</div>

<p>The full host image contains the operating system specific installer so it requires no downloading of it, but is
configured to boot from DHCP instead of having a static network configuration. To get its Provisioning configuration
from Foreman it identifies itself with a token only valid for one deployment.</p>

<p>The generic image boots from a dynamic IP address of the DHCP pool and is identified by the MAC address for Foreman
providing the correct installer via TFTP and Provisioning configuration to load.</p>

<p>The subnet image is basicly the same as the generic image but uses another TFTP server specified for the subnet.</p>

<p>Depending on the Compute resource used the plugin adds disk based provisioning.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="06_bootdisk" id="provisioning_06_bootdisk2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/06_bootdisk:2">
<h1>Lab 4.10: Install and configure the Bootdisk plugin</h1>

<ul>
<li>Objective:

<ul>
<li>Install and configure the Bootdisk plugin</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Run the Foreman installer to install the Bootdisk plugin</li>
<li>Associate iPXE template for operating systems</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="06_bootdisk" id="provisioning_06_bootdisk3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/06_bootdisk:3">
<h1>Lab 4.11: Reinstall the virtual machine "pxe"</h1>

<ul>
<li>Objective:

<ul>
<li>Reinstall the virtual machine "pxe" from a host image</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Set the Host in "Build" mode and download image</li>
<li>Configure virtual machine to boot from image</li>
<li>Boot and reinstall the virtual machine</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="01_overview" id="configmanagement_01_overview1" class="slide subsection" data-transition="none">
<div class="content subsection" ref="configmanagement/01_overview:1">
<h1>5 Configuration management</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="01_overview" id="configmanagement_01_overview2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/01_overview:2">
<h1>Configuration management</h1>

<ul>
<li>
<p>Definition:</p>

<ul>
<li>Configuration management is a systems engineering process for establishing and maintaining consistency of a product performance, functional, and physical attributes with its requirements, design and operational information throughout its life.</li>
</ul>
</li>
<li>
<p>Tools integrated in Foreman:</p>

<ul>
<li>Puppet</li>
<li>Chef</li>
<li>Salt</li>
<li>Ansible</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Wikipedia defines configuration management as a <em>systems engineering process for establishing and maintaining consistency of a 
product's performance, functional, and physical attributes with its requirements, design and operational information throughout
its life.</em></p>

<p>So configuration management software is used to describe a desired state, configure a system to be in this state and recognize
drifts from this state to revert them.</p>

<p>Foreman integrates different tools to solve this task. Puppet is deeply integrated because Foreman started as a WebGUI for it,
but it is planned to move on to a state being a plugin equal to all the other solutions. The features of the plugins differ depending
on the capabilities based ont the tools they depend on. For example some can only report system information and state while others can assign a configuration
using the web interface. Some tools also have a focus more on rapid deployment than on managing the system state.</p>

<p>We will use puppet in this training because it provides the complete feature set and its descriptive language is also quite accessible/readable
without knowing puppet in-depth.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:1">
<h1>Puppet</h1>

<ul>
<li>Written in ruby</li>
<li>Choice between Open Source or Enterprise version

<ul>
<li>Enterprise edition is not supported by Foreman</li>
</ul>
</li>
<li>Runs on Linux, Unix, Windows, …</li>
<li>Describes desired state in its own declarative language</li>
</ul>

<pre>
    package { 'openssh':
      ensure =&gt; 'installed',
    }
</pre>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:2">
<h1>Puppet</h1>

<ul>
<li>Workflow

<ul>
<li>Manifests stored on a central server "Puppet Master"</li>
<li>Agent collects system information using facter</li>
<li>Agent contacts central server with this information</li>
<li>Master compiles catalog for agent to realize using an abstraction layer</li>
<li>Agent reports back to master</li>
<li>Master transfers reports to other tools</li>
</ul>
</li>
</ul>




</div>
<div class="notes-section handouts">

<hr>

<p>Puppet is written in ruby and provided as a true Open Source version and as an Enterprise version with additional features and
packages with a defined software stack for easier support.</p>

<div class="pagebreak">continued...</div>

<p>Independently of the version it runs on Linux, Unix and Windows it can also configure some network devices. For configuration
it uses its own declarative language called Puppet DSL (Domain Specific Language) you can see above (example).
The desired state is described in so called manifests which are stored on one or multiple central servers. To connect the different
configuration items with the node to be configured these central servers can use an ENC (External Node Classifier). The agent runs
on the nodes and collects system information using a tool named facter before contacting the central server. The master compiles then
a catalog based on the facts provided by the agent and the manifests. This catalog is then realized by the agent using an
abstraction layer and also sends a report to the master. The master uses different handlers to send the report to other tools.</p>

<p>A diagram showing this workflow is provided on the next page.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Next slide provides a diagram of the workflow.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet3" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="configmanagement/02_puppet:3">
<h1>Puppet Workflow</h1>

<p></p>
<center><img src="./file//configmanagement/_images/puppet_workflow.png" style="width: 720px; height: 354px; margin-top: 100px;" alt="Puppet Workflow"></center>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:4">
<h1>Foreman Puppet Integration</h1>

<ul>
<li>
<p>Foreman -&gt; Puppet</p>

<ul>
<li>Smart proxy Puppet allows to import Puppet modules</li>
<li>Smart proxy Puppet allows to trigger agent runs</li>
<li>Smart proxy Puppet CA integrates certificate handling</li>
</ul>
</li>
<li>
<p>Puppet -&gt; Foreman</p>

<ul>
<li>Puppet uploads facts to Foreman</li>
<li>Puppet uses Foreman as ENC</li>
<li>Puppet transfers reports to Foreman</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Foreman integrates Puppet in several ways and also integrates itself into Puppet. Communication from the WebGUI to Puppet is handled 
using the Smart proxy for Puppet. It allows to import Puppet modules known to Puppet and to trigger Puppet agent runs using several protocols.
The Smart Proxy Puppet CA integrates certificate handling into provisioning so auto signing of the agents certificate requests during build
is allowed and also allows to manage the complete CA in the WebGUI.</p>

<p>On the Puppet master a script is deployed which integrates Foreman as an ENC so classes selected in the WebGUI are deployed on the system.
This mechanism is also used to upload the facts provided by the agent during Puppet agent run and creating a host entry if facts are provided
for an not already existing system. Also Puppet is integrated as a reporting target to enable the web interface to show reports.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:5">
<h1>Lab 5.1: Import of Puppet classes</h1>

<ul>
<li>Objective:

<ul>
<li>Make Puppet code available to Puppet and Foreman</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Place Puppet modules in Puppet environment "production"</li>
<li>Import classes in Foreman</li>
</ul>
</li>
<li>Optional:

<ul>
<li>Configure Foreman to ignore specific classes</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet6" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:6">
<h1>Parameters vs. Smart class parameters vs. Smart Variables</h1>

<ul>
<li>Parameters

<ul>
<li>Simple string</li>
<li>Usable in Foreman's Provisioning Templates</li>
<li>Usable in Puppet as global parameters</li>
<li>Override by creating one of the same name in a more specific scope</li>
</ul>
</li>
<li>Smart class parameters

<ul>
<li>Available from Puppet classes</li>
<li>Different types</li>
<li>Validators</li>
<li>Override options to handle override order and behaviour</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet7" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:7">
<h1>Parameters vs. Smart class parameters vs. Smart Variables</h1>

<ul>
<li>Smart variables

<ul>
<li>Global parameters assigned to a Puppet class</li>
<li>Same options like Smart class parameters</li>
</ul>
</li>
<li>All are hideable from unprivileged users</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Foreman does differentiate between three kinds of parameters.</p>

<p>Parameters are global parameters in a very simple fashion. Their values can only be strings and override is simply
done by creating a parameter with the same name in a more specific scope. To Puppet they are presented as a global
parameter via the ENC, in Foreman they can also be used in the Provisioning Templates.</p>

<p>Smart class parameters become available from imported Puppet classes and can have different types like boolean, hash
or yaml. For this types an input validator can be created to verify user input. An override behavior and order can be
defined to enable merging values depending on facts.</p>

<p>Smart variable provides the same options as Smart class parameters but are manually assigned to a Puppet Class and
provided to Puppet as global parameters and not class parameters.</p>

<p>All types have to be created on the global scope to be available in more specific scopes and all allow to hide them
from unprivileged users.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet8" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:8">
<h1>Lab 5.2: Parameterize and assign Puppet classes</h1>

<ul>
<li>Objective:

<ul>
<li>Parameterize and assign Puppet classes to at least one host</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Set defaults to the Smart class parameters provided by the imported class</li>
<li>Assign the Puppet class in the host menu to one host</li>
</ul>
</li>
<li>Optional:

<ul>
<li>Assign the Puppet class to another host and override the defaults</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet9" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:9">
<h1>Lab 5.3: Trigger Puppet agent run and inspect the report</h1>

<ul>
<li>Objective:

<ul>
<li>Trigger an Puppet agent run and inspect the report</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Run the Puppet agent on the host you assigned the class</li>
<li>Inspect the report of the Puppet agent run</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet10" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:10">
<h1>Config Groups</h1>

<ul>
<li>Allows to group classes</li>
<li>Assign like single classes</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Config Groups allow to group classes and assign them in the same way you would use single classes.
This follows the same ideas like the very popular Roles-Profiles-Pattern used in Puppet to simplify
assignment via another layer of abstraction.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet11" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:11">
<h1>Triggering an Puppet agent run</h1>

<ul>
<li>
<p>Multiple protocols available</p>

<ul>
<li>Puppet kick - requires Puppet agent to listen for incoming events</li>
<li>Mcollective - requires a message queue and the Mcollective framework</li>
<li>Puppetssh - runs Puppet agent command via ssh</li>
<li>Salt - uses Salts remote execution to trigger a Puppet agent run</li>
<li>Customrun - runs whatever script you provide</li>
</ul>
</li>
<li><p>Has to be enabled via a setting</p></li>
<li><p>Remote Execution plugin provides more flexibility</p></li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The Smart proxy Puppet allows to trigger the Puppet run we manually triggered in the last exercise from the WebGUI.
For this we enable it by setting the option "Puppetrun" to true and configure the Smart Proxy to use one of the mentioned
providers, but all of them will also require some configuration on the agent side.</p>

<p>The Foreman plugin Remote Execution is more flexible and also handles the agent configuration but only provides SSH for now.
We will have a deeper look into this instead of configuring the "Puppetrun" feature.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet12" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:12">
<h1>Managing Foreman with Puppet</h1>

<ul>
<li>Puppet modules provided by Foreman Project

<ul>
<li>Already utilized by Foreman Installer</li>
<li>Compatible with all supported platforms</li>
<li>Version compatibility to observe</li>
</ul>
</li>
<li>Configuration of:

<ul>
<li>Foreman</li>
<li>Smart Proxy</li>
<li>Puppet</li>
<li>Depending and managed services</li>
</ul>
</li>
</ul>




</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>It is also possible to manage Foreman and/or its Smart Proxies using Puppet. The modules to do so are provided by the
Foreman Project itself and are already used in the Foreman Installer. The modules are written to be compatible with
all supported platforms. For compatibility of the modules with the Foreman or Smart Proxy version observe the notes
in the README. File.</p>

<p>The modules provided can configure Foreman, the Smart Proxy and Puppet in the way it is required by Foreman and the services
required to run Foreman or managed by the Smart Proxy.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Show the students "puppet module list --modulepath=/usr/share/foreman-installer/modules" for a list of the modules</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_puppet" id="configmanagement_02_puppet13" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_puppet:13">
<h1>Utilizing Foreman within Puppet</h1>

<ul>
<li>Function to query the API

<ul>
<li>Alternative to exported resources and PuppetDB query</li>
<li>Login data and query as hash</li>
<li>Returns hash</li>
</ul>
</li>
</ul>

<pre>
$foreman = foreman({ item =&gt; 'hosts',
                     search =&gt; 'status.failed = 0',
                     per_page =&gt; 1000,
                     foreman_url =&gt; 'https://foreman.localdomain',
                     foreman_user =&gt; 'admin',
                     foreman_pass =&gt; 'PASSWORD' })
</pre>


</div>
<div class="notes-section handouts">

<hr>

<p>The Puppet module "foreman" provided by the Foreman project includes a function to query the Foreman API in a puppet class.
This is an alternative for exported resources or a PuppetDB query. It takes a hash with the login data and the query and returns
a result hash including an array of hashes describing the hosts. 
The hash is best used with a defined resource and create_resource function or within a template.
Next release of the function will also allow to provide a filter for reducing the data for easier handling.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_ansible" id="configmanagement_03_ansible1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_ansible:1">
<h1>Ansible</h1>

<ul>
<li>Written in python</li>
<li>Runs on Linux, Unix, Windows</li>
<li>Describes desired state in yaml files</li>
</ul>

<pre>
    ---
    - name: Install package vim
      become: true
      yum: name={{ item }} state=installed
      with_items:
      - vim-enhanced
</pre>

<ul>
<li>Workflow

<ul>
<li>Roles or Playbook stored on a system with Ansible installed</li>
<li>Inventory is managed for Ansible</li>
<li>Ansible connects to a system and collects system information</li>
<li>Ansible runs tasks on the system</li>
<li>Ansible can report back to other tools via callback plugin</li>
</ul>
</li>
</ul>




</div>
<div class="notes-section handouts">

<p>Ansible is written in python and its control machine runs on Linux while it is possible to manage Linux, Unix and Windows.</p>

<div class="pagebreak">continued...</div>

<p>For configuration it uses yaml format for simple playbooks and some additional structure for roles. An example for one
task is shown above. Those files are stored on one or more control machines which also need an inventory as a static
file or script for dynamic inventory. There is no agent required as it utilizes SSH (or winrm for Windows), so the control machine
connects to one or more systems to collect system information and run tasks on them. Afterwards callback plugins are used to report
back to other tools.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_ansible" id="configmanagement_03_ansible2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_ansible:2">
<h1>Foreman Ansible Integration</h1>

<ul>
<li>
<p>Foreman -&gt; Ansible</p>

<ul>
<li>Smart proxy Ansible allows to import Ansible roles</li>
<li>Smart proxy Ansible allows to play Ansible roles</li>
</ul>
</li>
<li>
<p>Ansible -&gt; Foreman</p>

<ul>
<li>Ansible uploads facts to Foreman via callback</li>
<li>Ansible transfers reports to Foreman via callback</li>
<li>Ansible uses Foreman as dynamic inventory</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Foreman can integrate Ansible in several ways and can also integrate itself into Ansible. Communication from the WebGUI to Ansible is handled
using the Smart proxy for Ansible. It allows to import Ansible roles known to Ansible and to play Ansible roles.</p>

<p>On the Ansible control machine a callback plugin can be activated to upload facts and reports to Foreman. Forthermore a script could be deployed
to use Foreman as dynamic inventory.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_ansible" id="configmanagement_03_ansible3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_ansible:3">
<h1>Lab 5.4: Configure Ansible Callback</h1>

<ul>
<li>Objective:

<ul>
<li>Install Ansible and configure the callback plugin for Foreman</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install Ansible</li>
<li>Configure callback plugin</li>
<li>Add your host to the inventory</li>
<li>Create and distribute a SSH key</li>
<li>Download the role "geerlingguy.ntp"</li>
<li>Create a playbook and run it</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_ansible" id="configmanagement_03_ansible4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_ansible:4">
<h1>Lab 5.5: Configure Ansible Dynamic Inventory</h1>

<ul>
<li>Objective:

<ul>
<li>Configure Ansible Dynamic Inventory</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Download Dynamic Inventory and sample configuration</li>
<li>Adjust configuration</li>
<li>Test Dynamic Inventory</li>
</ul>
</li>
<li>Optional:

<ul>
<li>Distribute the SSH key and change the playbook to all hosts</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_ansible" id="configmanagement_03_ansible5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_ansible:5">
<h1>Lab 5.6: Configure Graphical Integration</h1>

<ul>
<li>Objective:

<ul>
<li>Configure Foreman Plugin and Smart Proxy Plugin</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install Foreman Plugin and Smart Proxy Plugin</li>
<li>Import roles and assign them</li>
<li>Prepare Smart proxy to play roles</li>
<li>Play roles using the webinterface </li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Graphical integration uses Remote-Execution plugin which will be covered later in more depth.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="00_overview" id="usermanagement_00_overview" class="slide subsection" data-transition="none">
<div class="content subsection" ref="usermanagement/00_overview">
<h1>6 User management</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="01_ldap" id="usermanagement_01_ldap1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/01_ldap:1">
<h1>LDAP</h1>

<ul>
<li>Natively supported including webbased configuration</li>
<li>Supports:

<ul>
<li>Protocol: LDAP, LDAPS, no StartTLS</li>
<li>Schema: POSIX, Active Directory, FreeIPA</li>
</ul>
</li>
<li>Allows multiple backends</li>
<li>Autocreation of user possible</li>
<li>Optional synchronisation of group membership</li>
<li>Getting stored avatars</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Foreman supports LDAP authentication natively and provides a webbased configuration for it.</p>

<div class="pagebreak">continued...</div>

<p>Supported are LDAP and LDAPS as protocol, (at the moment) for now no StartTLS. If using certificate based encyrption
trust to the certificate is mandatory. It supports the POSIX, Active Directory and FreeIPA schema
for storing users and groups, but attribute mapping can be configured manually. For the autocreation
of users the attributes "Login Name", "First Name", "Surname" and "Email" are required, optionally a
avatar can be stored as base64 encoded string in a "Photo" attribute.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="01_ldap" id="usermanagement_01_ldap2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/01_ldap:2">
<h1>Lab 6.1: LDAP Authentication</h1>

<ul>
<li>Objective:

<ul>
<li>Allow the administrative accounts from the LDAP to work as Foreman admins</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Configure the LDAP authentication including group synchronisation</li>
<li>Add a administrative group to grant the administrative accounts from the LDAP privileges</li>
</ul>
</li>
<li>Optional:

<ul>
<li>Add a photo to the administrator account</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="02_external" id="usermanagement_02_external" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/02_external">
<h1>External Authentication</h1>

<ul>
<li>External authentication utilizing the webserver</li>
<li>Kerberos

<ul>
<li>Foreman Installer can handle FreeIPA automatically</li>
<li>Manual configuration and tell Foreman to trust</li>
</ul>
</li>
<li>PAM

<ul>
<li>Apache module to validate login form input against PAM</li>
</ul>
</li>
<li>Autocreation of user possible</li>
<li>Differentiates between WebGUI and API</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Foreman can also be configure to use an external authentication provided by the webserver.</p>

<p>In most cases this will be Kerberos to achieve a true Single Sign-On. If you use FreeIPA as your
authentication provider the Foreman Installer can create the required configuration by passing the
corresponding parameters to it.</p>

<p>If you use another provider like Active Directory or a manually managed Kerberos it is possible to
create the required Kerberos and PAM authentication on your own and tell Foreman to accept external
users.</p>

<p>Another way to configure Foreman to use external authentication providers is by using the Apache
module "intercept_form_submit" to pass the login form input to PAM for validation.</p>

<p>It is also possible to enable autocreation of users in Foreman for external authentication.</p>

<p>Also note that Foreman differentiates between WebGUI and API login for external authentication
so it is possible to allow external users to only connect to one or both.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="03_permissions" id="usermanagement_03_permissions1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/03_permissions:1">
<h1>Permissions</h1>

<ul>
<li>Fine granular permission system</li>
<li>Abstracted to roles</li>
<li>Complemented by filters</li>
<li>Plugins can add items to the permission system</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="03_permissions" id="usermanagement_03_permissions2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/03_permissions:2">
<h1>Lab 6.2: Add unprivileged users</h1>

<ul>
<li>Objective:

<ul>
<li>Grant access and privileges for some unprivileged users</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Assign the role "Viewer" to the user "viewer"</li>
<li>Create a role "Selfservice" to allow creation of new hosts and management of own hosts</li>
<li>Assign the new role "Selfservice" to the user "selfservice"</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="04_auditing" id="usermanagement_04_auditing" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/04_auditing">
<h1>Auditing</h1>

<ul>
<li>Almost all changes from WebGUI and API</li>
<li>User, timestamp, change and parent object</li>
<li>For templates additional diff of the changes</li>
<li>Browse and searchable in the WebGUI</li>
</ul>

<div style="text-align:right">
<img src="./file//usermanagement/_images/foreman_auditing.png" style="float: right, max-width:200px; max-height: 250px; width: auto; height: auto; margin-top: 50px; margin-right: 151px" alt="Foreman Auditing">
</div>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Foreman logs almost all changes from the WebGUI and API including the user, a timestamp, the change and
the parent object like the host or a parameter got changed. For templates an additional diff of the changes
is provided.</p>

<p>All this auditing data are browse and searchable in the WebGUI via "Monitor &gt; Audits". To get detailed
auditing data or specific change history simply select an entry.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="05_email" id="usermanagement_05_email1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/05_email:1">
<h1>Internal Notifications</h1>

<ul>
<li>Notification for own actions</li>
<li>New feature since 1.15</li>
<li>Used by Foreman and many plugins</li>
</ul>

<div style="text-align:right">
<img src="./file//usermanagement/_images/foreman_notification.png" style="float: right, max-width:200px; max-height: 250px; width: auto; height: auto; margin-top: 95px; margin-right: 95px" alt="Foreman Notification">
</div>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Foreman provides a new notification feature to notify about your own actions since 1.15 which is already used by Foreman and
many plugins. This allows to keep track of actions run independently.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="05_email" id="usermanagement_05_email2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/05_email:2">
<h1>Email Notifications</h1>

<ul>
<li>General configuration via Foreman Installer or configuration file </li>
<li>Optional setting by user</li>
<li>Frequent summary of specific audit events</li>
<li>Finished host provisioning</li>
<li>Puppet run with error on every run or as frequent summary</li>
</ul>

<div style="text-align:right">
<img src="./file//usermanagement/_images/foreman_email.png" style="float: right, max-width:200px; max-height: 250px; width: auto; height: auto; margin-top: 50px; margin-right: 265px" alt="Foreman Email">
</div>


</div>
<div class="notes-section handouts">

<hr>

<p>Foreman can send email notifications to the user. This requires email settings configured in Foreman via the Foreman Installer
or manual editing of the configuration file "/etc/foreman/email.yaml". With this configuration in place a user can decide to
opt-in for several kinds of notification. It can send a daily, weekly or monthly summary of audit events which allows to add a
search to specify a subset of events. It also can notify on every successful host build and for Puppet runs on every failed run
or as a frequent summary.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="06_sshkeys" id="usermanagement_06_sshkeys" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/06_sshkeys">
<h1>SSH Key Management</h1>

<ul>
<li>SSH Keys provided by Users</li>
<li>New feature since 1.15</li>
<li>Available as parameter on hosts owned</li>
<li>Used in snippet "create_users" during provisioning</li>
</ul>

<div style="text-align:right">
<img src="./file//usermanagement/_images/foreman_usersshkey.png" style="float: right, max-width:200px; max-height: 250px; width: auto; height: auto; margin-top: 90px; margin-right: 151px" alt="Foreman User SSH Keys">
</div>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Foreman provides a new notification feature allowing users to manage their own SSH keys since 1.15 which is made available as parameter on
hosts owned by the user or its groups. An example for usage during provisioning is provided in the snippet "create_users".</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="00_overview" id="plugins_00_overview1" class="slide subsection" data-transition="none">
<div class="content subsection" ref="plugins/00_overview:1">
<h1>7 Plugins</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="00_overview" id="plugins_00_overview2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/00_overview:2">
<h1>Plugins</h1>

<ul>
<li>
<p>Extend Foreman</p>

<ul>
<li>Add permissions and roles</li>
<li>Alter the menu </li>
<li>Provide dashboard widgets and pagelets</li>
<li>Add URLs and actions</li>
<li>Deface existing views and add new ones</li>
<li>Add parameters to a host</li>
<li>Authenticate a Smart proxy</li>
<li>Add to the database</li>
<li>Create their own logging</li>
<li>Create their own notification</li>
</ul>
</li>
<li>
<p>Extend Smart Proxy</p>

<ul>
<li>Additional providers for existing services</li>
<li>Additional services</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Plugins can extend Foreman and the Smart proxy in many different ways and depending on the needs
it can be very simple or highly complex.</p>

<p>Some of the options will be shown in the next slides where some of the plugins are introduced.</p>

<p>For all options have a look at the "how to create a plugin" at <a href="http://projects.theforeman.org/projects/foreman/wiki/How_to_Create_a_Plugin" target="_blank">http://projects.theforeman.org/projects/foreman/wiki/How_to_Create_a_Plugin</a> or "how to create a Smart Proxy plugin" at <a href="https://projects.theforeman.org/projects/foreman/wiki/How_to_Create_a_Smart-Proxy_Plugin" target="_blank">https://projects.theforeman.org/projects/foreman/wiki/How_to_Create_a_Smart-Proxy_Plugin</a>.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="01_default_hostgroup" id="plugins_01_default_hostgroup" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/01_default_hostgroup">
<h1>Default Hostgroup</h1>

<ul>
<li>Sets a default hostgroup on host creation</li>
<li><p>Configured as a yaml hash</p></li>
<li><p><u>Use case:</u> Introduce Foreman in an already puppetized environment</p></li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>If a host does not already exist, it will be created when the first puppet run triggers
the upload of the facts. Normally the host is added without any additional configuration
in Foreman, the plugin "Default Hostgroup" simply adds the possibility to set a default
hostgroup to assign to these newly created hosts. This allows to add a classification
via the hostgroup already on the first run and without manual intervention.</p>

<div class="pagebreak">continued...</div>

<p>To use it simply install the package and create a file "/etc/foreman/plugins/default_hostgroup.yaml"
containing a hash which maps facts to hostgroups to assign.</p>

<pre><code>---
:default_hostgroup:
  :facts_map:
    "Default":
      "hostname": ".*"
</code></pre>

<p><br></p>

<p>The plugin is very useful if you plan to embed Foreman in an already puppetized
environment as Puppet ENC.</p>

<p>More details on: <a href="https://github.com/theforeman/foreman_default_hostgroup" target="_blank">https://github.com/theforeman/foreman_default_hostgroup</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="02_templates" id="plugins_02_templates1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/02_templates:1">
<h1>Templates</h1>

<ul>
<li>
<p>Creates a synchronisation job for templates</p>

<ul>
<li>Community Templates</li>
<li>Your own git repository</li>
</ul>
</li>
<li>
<p><u>Use case:</u></p>

<ul>
<li>Get additional templates maintained by the community</li>
<li>Manage your own templates with external versioning</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<p>By installing the plugin you get a synchronisation job for templates which per default
import the community templates from <a href="https://github.com/theforeman/community-templates" target="_blank">https://github.com/theforeman/community-templates</a>
matching your Foreman version and adding support for more operating systems. This job can
also be used to import your own git repository if you want to manage the templates on
an external version control system. In addition the imported templates will also be associated
to the existing operating systems.</p>

<p>More details on: <a href="https://theforeman.org/plugins/foreman_templates/6.0/index.html" target="_blank">https://theforeman.org/plugins/foreman_templates/6.0/index.html</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="02_templates" id="plugins_02_templates2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/02_templates:2">
<h1>Lab 7.1: Templates</h1>

<ul>
<li>Objective:

<ul>
<li>Import the Community templates</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman Plugin Templates</li>
<li>Run the synchronisation job</li>
</ul>
</li>
<li>Optional:

<ul>
<li>Change settings to add a prefix during import</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="03_dhcp_browser" id="plugins_03_dhcp_browser1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/03_dhcp_browser:1">
<h1>DHCP Browser</h1>

<ul>
<li>
<p>Adds the DHCP management interface</p>

<ul>
<li>Browse DHCP reservations</li>
<li>Create DHCP reservations for hosts not managed by Foreman</li>
</ul>
</li>
<li><p><u>Use case:</u> More transparency for the DHCP management</p></li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The Foreman Plugin DHCP Browser adds a DHCP management interface to the Foreman WebGUI next to the
subnets which allows to browse DHCP reservations and it is also quite useful for managing reservations
for hosts not managed by the Foreman.</p>

<p>More details on: <a href="https://github.com/theforeman/foreman_dhcp_browser" target="_blank">https://github.com/theforeman/foreman_dhcp_browser</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="03_dhcp_browser" id="plugins_03_dhcp_browser2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/03_dhcp_browser:2">
<h1>Lab 7.2: DHCP Browser</h1>

<ul>
<li>Objective:

<ul>
<li>Inspect DHCP reservations</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman Plugin DHCP Browser</li>
<li>Inspect DHCP reservations via the Plugin</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="04_hooks" id="plugins_04_hooks" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/04_hooks">
<h1>Hooks</h1>

<ul>
<li>
<p>Adds hooks to events in Foreman</p>

<ul>
<li>Run additional scripts on events</li>
<li>Show status of the scripts during orchestration</li>
<li>Handles failure and rollback</li>
</ul>
</li>
<li>
<p><u>Use case:</u> </p>

<ul>
<li>Extend the Foreman without writing a plugin</li>
<li>Work around the limitations and problems of existing tools</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The Foreman Plugin Hooks allows to add scripts on events handled by the Foreman. Typically it is used
to integrate other tools during the orchestration process of deploying new hosts instead of writing
a new plugin. For this the status of a script executed is also shown in the WebGUI and handling for
failures and rollback is also provided.</p>

<div class="pagebreak">continued...</div>

<p>Another use case is to work around the limitations and problems of tools like changing parameters of
VMs which is only available after the creation but are required before starting them.</p>

<p>More details on: <a href="https://github.com/theforeman/foreman_hooks" target="_blank">https://github.com/theforeman/foreman_hooks</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="05_puppetdb" id="plugins_05_puppetdb" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/05_puppetdb">
<h1>PuppetDB</h1>

<ul>
<li>Disable hosts in the PuppetDB during deletion</li>
<li><p>Display the PuppetDB in the dashboard</p></li>
<li><p><u>Use case:</u> Should always be installed when using PuppetDB with Foreman</p></li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>When PuppetDB is used with Foreman there is normally no interaction between both, they are completely
two different independent report targets. With this plugin a host is also disabled in PuppetDB when it is deleted in
Foreman.</p>

<p>In addition the PuppetDB dashboard is also integrated in the Foreman WebGUI to display the performance of
the backend.</p>

<p>More details on: <a href="https://github.com/theforeman/puppetdb_foreman" target="_blank">https://github.com/theforeman/puppetdb_foreman</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="06_column_view" id="plugins_06_column_view1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/06_column_view:1">
<h1>Column View</h1>

<ul>
<li><p>Adds additional columns to the "All Hosts" view</p></li>
<li>
<p><u>Use case:</u> </p>

<ul>
<li>Present more information in the WebGUI</li>
<li>Add links to the other webinterfaces</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The Foreman Plugin Column View is a very simple example of enhancement an existing view
in Foreman but could be verify useful in combination with some custom facts like
showing the responsible team or project. It is also capable of adding additional links to
other webinterfaces providing additional information.</p>

<p>More details on: <a href="https://github.com/theforeman/foreman_column_view" target="_blank">https://github.com/theforeman/foreman_column_view</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="06_column_view" id="plugins_06_column_view2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/06_column_view:2">
<h1>Lab 7.3: Column View</h1>

<ul>
<li>Objective:

<ul>
<li>Add Architecture and Uptime to the "All Hosts" view</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman Plugin Column View</li>
<li>Configure it to show the facts for architecture and uptime</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="08_openscap" id="plugins_08_openscap1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/08_openscap:1">
<h1>OpenSCAP</h1>

<ul>
<li>Open Source implementation of Security Content Automation Protocol</li>
<li>Combines different security standards</li>
<li>Validate systems for security compliance

<ul>
<li>Provides guides</li>
<li>Provides reports and remediation</li>
</ul>
</li>
<li>
<p>Profiles provided by different resources</p>

<ul>
<li>Files to start with included</li>
<li>Other resources like the "National Institute of Standards and Technology"</li>
</ul>
</li>
<li><p><u>Use case:</u> Collect security compliance reports in the WebGUI</p></li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>OpenSCAP is the Open Source implementation of Security Content Automation Protocol which combines
different pre-existing security standards like CVE, CCE, CPE, CVSS, XCCDF, OVAL, OCIL, AI, ARF, CCSS
and TMSAD.  All these informations are combined in datastream files which can contain different profiles
a system can be validated against. To get a compliant system a guide can be created or a compliance report
including some remediation scripts. The required files can be created by hand but are in XML so best practice is to use
a tool like the Workbench to tailor the existing files to the like of the one provided by the OpenSCAP project or
the "National Institute of Standards and Technology" (NIST).</p>

<p>Not used by Foreman for now is the Anaconda Plugin OpenSCAP which can also add security compliance
as part of the installation process.</p>

<p>With Foreman 1.11 the Plugin got a rewrite to remove the dependency on "scaptimony"! With Foreman 1.15 the Plugin was
enhanced to support tailoring files.</p>

<p>More details on: <a href="https://theforeman.org/plugins/foreman_openscap/0.8/index.html" target="_blank">https://theforeman.org/plugins/foreman_openscap/0.8/index.html</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="08_openscap" id="plugins_08_openscap2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/08_openscap:2">
<h1>Lab 7.4: OpenSCAP</h1>

<ul>
<li>Objective:

<ul>
<li>Inspect the Security compliance of your system</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman and Smart Proxy Plugin OpenSCAP</li>
<li>Make the Puppet Module "foreman_scap_client" available</li>
<li>Create a Policy for CentOS 7 and assign it to a host</li>
<li>Make the Foreman client repository available to one host</li>
<li>Initiate a Puppet agent run on the host</li>
<li>Create a report on the host and upload it to the Smart proxy</li>
<li>Upload the report from the Smart proxy to the Foreman</li>
</ul>
</li>
<li>Optional:

<ul>
<li>Customize the Policy with a tailor file</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="09_cockpit" id="plugins_09_cockpit1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/09_cockpit:1">
<h1>Cockpit</h1>

<ul>
<li>WebGUI to manage your server</li>
<li>Available on RHEL, CentOS, Fedora, Arch Linux and Ubuntu</li>
<li><p>Available as native package or docker container for atomic</p></li>
<li>
<p><u>Use case:</u> </p>

<ul>
<li>Manage atomic installations</li>
<li>Manage servers via WebGUI instead of direct console access</li>
</ul>
</li>
</ul>




</div>
<div class="notes-section handouts">

<p>The Cockpit project provides a WebGUI to manage Linux servers. It is available as native package or
priviledged docker container for atomic on RHEL, CentOS, Fedora, Arch Linux and Ubuntu.</p>

<p>The Foreman plugin searches for an existing installation and integrates it into the Foreman WebGUI.</p>

<p>More details on: <a href="https://github.com/theforeman/foreman_cockpit" target="_blank">https://github.com/theforeman/foreman_cockpit</a></p>

</div>
<div class="notes-section notes">

<ul>
<li>Cockpit runs on Port 9090 and encryption depends on the protocol used to connect</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="09_cockpit" id="plugins_09_cockpit2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/09_cockpit:2">
<h1>Lab 7.5: Cockpit</h1>

<ul>
<li>Objective:

<ul>
<li>Inspect your system using Cockpit integrated in the Foreman</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install and enable Cockpit</li>
<li>Install the Foreman Plugin Cockpit</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section notes">

<p>Requires <a href="https://github.com/theforeman/foreman_cockpit/pull/15" target="_blank">https://github.com/theforeman/foreman_cockpit/pull/15</a> to be applied via patch as it is not a part of release</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="10_remote_execution" id="plugins_10_remote_execution1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/10_remote_execution:1">
<h1>Remote Execution</h1>

<ul>
<li>Execute jobs on remote systems from the Foreman WebGUI</li>
<li>
<p>It can handle different protocols</p>

<ul>
<li>SSH</li>
<li>Ansible</li>
</ul>
</li>
<li>
<p><u>Use case:</u> </p>

<ul>
<li>Trigger configuration management runs immediately</li>
<li>Execute one-time or irregular commands</li>
<li>Orchestrate operations on servers</li>
<li>OpenSCAP scans on demand</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The Foreman Plugin Remote Execution adds WebGUI and workflow for executing jobs on remote systems.
It utilizes different providers, which are SSH and Ansible for now.</p>

<p>The SSH provider runs per default command as root, but can also be configure to run as unpriviledged
user and run sudo to accquire elevated privileges.</p>

<div class="pagebreak">continued...</div>

<p>It is usefully to trigger configuration management runs immediately to get an adhoc deployment,
execute one-time or irregular commands and also to orchestrate operations like updates on your servers.
It also allows to schedule jobs or reoccurring execution.</p>

<p>With the OpenSCAP plugin installed in addition an option to run scans on demand is added.</p>

<p>More details on: <a href="https://theforeman.org/plugins/foreman_remote_execution/1.3/index.html" target="_blank">https://theforeman.org/plugins/foreman_remote_execution/1.3/index.html</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="10_remote_execution" id="plugins_10_remote_execution2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/10_remote_execution:2">
<h1>Lab 7.6: Remote Execution</h1>

<ul>
<li>Objective:

<ul>
<li>Trigger a Puppet run on a remote system</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman Plugin Remote Execution</li>
<li>Bring out the SSH key</li>
<li>Initiate the Puppet run</li>
</ul>
</li>
<li>Optional:

<ul>
<li>Run OpenSCAP scan</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="10_remote_execution" id="plugins_10_remote_execution3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/10_remote_execution:3">
<h1>Remote Execution - Job Templates</h1>

<ul>
<li>Similar to Provisioning Templates</li>
<li>Input

<ul>
<li>User Input - free-form or list of values</li>
<li>Fact value</li>
<li>Variable</li>
<li>Puppet parameter</li>
<li>Reference on other templates</li>
<li>Special ERB function "input"</li>
</ul>
</li>
<li>Default Templates:

<ul>
<li>Puppet Run Once</li>
<li>Package Action</li>
<li>Service Action</li>
<li>Run Command</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>It is also possible to write templates for jobs in a similar manner like Provisioning Templates. In this
templates you can use a special function "input" to get the value of input fields associated to it. These
fields can be a free-form or list of values for a user to add, facts, variables or Puppet parameters. </p>

<p>Furthermore you can reference another template, which you can also render in your newly created one with the
"render_template" function.</p>

<p>The default templates provided are "Puppet Run Once" to trigger a puppet run, "Package Action" for handling
package management and "Service Action" for managing service which both include operating system specific 
handling and "Run Command" to run a simple commandline.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="10_remote_execution" id="plugins_10_remote_execution4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/10_remote_execution:4">
<h1>Lab 7.7: Remote Execution - Job Template</h1>

<ul>
<li>Objective:

<ul>
<li>Create a Job Template "ping" to run the ping command on remote hosts</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Create a Job Template to run ping with default values and input field</li>
<li>Run it without input</li>
<li>Run it with input</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="11_expire_hosts" id="plugins_11_expire_hosts1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/11_expire_hosts:1">
<h1>Expire Hosts</h1>

<ul>
<li>
<p>Set an expiration date on hosts</p>

<ul>
<li>Notify owners and admins in advance</li>
<li>Shutdown on expiration date</li>
<li>Delete afterwards</li>
</ul>
</li>
<li>
<p><u>Use case:</u> </p>

<ul>
<li>Autoremove virtual machines of developers and testers</li>
<li>At least notify for hardware machines no longer required</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<p>The Foreman Plugin Expire Hosts allows to add an expiration date on hosts and to
configure notifications for owners and admins in advance, automatically shutdown
when the hosts is expired and delete it also automatically afterwards. This is
quite useful on virtual machines used for development and testing, for hardware
shutdown and deletion can not be automated but it will at least notify.</p>

<p>More details on: <a href="https://github.com/theforeman/foreman_expire_hosts" target="_blank">https://github.com/theforeman/foreman_expire_hosts</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="11_expire_hosts" id="plugins_11_expire_hosts2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/11_expire_hosts:2">
<h1>Lab 7.8: Expire Hosts</h1>

<ul>
<li>Objective:

<ul>
<li>Set a host to expire</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman Plugin Expire Hosts</li>
<li>Configure notifications</li>
<li>Set a host to expire</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section notes">

<p>Settings tabs is not shown: <a href="https://github.com/theforeman/foreman_expire_hosts/issues/27" target="_blank">https://github.com/theforeman/foreman_expire_hosts/issues/27</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="12_monitoring" id="plugins_12_monitoring1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/12_monitoring:1">
<h1>Monitoring</h1>

<ul>
<li>
<p>Integrates a monitoring solution</p>

<ul>
<li>Shows monitoring status in Foreman</li>
<li>Manages monitoring objects during provisioning</li>
</ul>
</li>
<li>
<p>Supported monitoring solutions</p>

<ul>
<li>Icinga 2</li>
<li>Icinga 2 and Icinga Web 2 Director</li>
</ul>
</li>
<li>
<p><u>Use case:</u></p>

<ul>
<li>Integrate monitoring into provisioning</li>
<li>Get state for running systems from Foreman</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The Monitoring integration is done via a Foreman plugin for the graphical part and a
Smart proxy plugin for the communication. So it shows a global and detailed monitoring
status for hosts, manages monitoring objects during provisioning and deprovisioning and
allows to set downtimes.</p>

<p></p>
<div class="pagebreak">continued...</div>~~PAGEBREAK~~~~

<p>For now it only supports Icinga 2 as monitoring solution and if requiring a more comfortable
administration Icinga 2 and in addition its graphical frontend Icinga Web 2 Director.</p>

<p>More details on: <br>
* <a href="https://github.com/theforeman/foreman_monitoring" target="_blank">https://github.com/theforeman/foreman_monitoring</a> <br>
* <a href="https://github.com/theforeman/smart_proxy_monitoring" target="_blank">https://github.com/theforeman/smart_proxy_monitoring</a> <br></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="12_monitoring" id="plugins_12_monitoring2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/12_monitoring:2">
<h1>Lab 7.9: Monitoring Integration</h1>

<ul>
<li>Objective:

<ul>
<li>Integrate Monitoring into Foreman</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install Foreman plugin and Smart proxy plugin</li>
<li>Configure Smart proxy to communicate with Icinga 2 and Icinga Web 2 Director</li>
<li>Configure Foreman default actions for monitoring</li>
<li>Active integration for one host</li>
<li>Verify monitoring integration</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="00_overview" id="advanced_00_overview" class="slide subsection" data-transition="none">
<div class="content subsection" ref="advanced/00_overview">
<h1>8 Advanced Topics</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="01_web" id="advanced_01_web1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/01_web:1">
<h1>WebGUI</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="01_web" id="advanced_01_web2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/01_web:2">
<h1>Searches</h1>

<ul>
<li>Almost all views are simple lists</li>
<li>Some views like "Reports" have a default filter</li>
<li>Most views provide additional searches</li>
<li>Bookmark and share your own search</li>
</ul>

<div style="text-align:right">
<img src="./file//advanced/_images/foreman-searches.png" style="float: right, max-width:200px; max-height: 250px; width: auto; height: auto; margin-top: 50px; margin-right: 290px" alt="Foreman Searches">
</div>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>In the Foreman WebGUI almost all views are simple unfiltered lists, some views like the "Reports" view are filtered by
default using a search and most provide additional searches to quickly filter for typically views like 'all hosts
out of sync'. But the WebGUI is not limited to these searches you can always create your own and bookmark it for later.
Setting a bookmark to public allows to share it with other users.</p>

<p>The search field can be used for a free text search but gets more powerful if using the autosuggestions. It provides
different comparison operators depending on the type of the field compared including SQL like wildcard matching.</p>

<p>For more details see: <a href="http://theforeman.org/manuals/latest/index.html#4.1.5Searching" target="_blank">http://theforeman.org/manuals/latest/index.html#4.1.5Searching</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="01_web" id="advanced_01_web3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/01_web:3">
<h1>Trends</h1>

<ul>
<li>Graphs changes in your enviroment</li>
<li>Configured in the WebGUI and collected by a cronjob</li>
<li>Internal Host parameters or Facts provided by Configuration Management</li>
</ul>

<div style="text-align:right">
<img src="./file//advanced/_images/foreman-trend-puppetversion.png" style="float: right, max-width:200px; max-height: 300px; width: auto; height: auto; margin-top: 50px; margin-right: 260px" alt="Foreman Trends">
</div>


</div>
<div class="notes-section handouts">

<hr>

<p><br>
Foreman can provide graphs about changes in your environment. Those are configured and displayed in the WebGUI in
"Monitor &gt; Trends" and a cronjob is performs the data collection. By default this cronjob runs every 30 minutes matching 
Puppet's default run interval because most trends will be based on the facts collected by the configuration management
solution, another source are Foreman's internal parameters like the operatingsystem of the host.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/02_cleanup:1">
<h1>Cleanup / Backup / Restore / Upgrade</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/02_cleanup:2">
<h1>Cleanup</h1>

<ul>
<li>
<p>Reports are send to the Foreman and stored in the database</p>

<ul>
<li>Puppet reports every 30 minutes</li>
<li>Chef reports every 30 minutes</li>
<li>Salt reports every 10 minutes</li>
<li>Ansible reports on every run</li>
<li>Requires a lot of space</li>
</ul>
</li>
<li>
<p>Cleanup job is provided by the Foreman</p>

<ul>
<li>Execute via cron</li>
<li>Can run with different parameters</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The configuration management solution sends reports to Foreman which are then stored in the database afterwards.
Depending on the solution, configuration and interval the required storage space can differ.</p>

<p>Foreman provides a cleanup job for this. Best Practice would be an execution as a cronjob. The command takes parameters
for the maximum age to keep the status of the reports.</p>

<p>Depending on your needs configure a daily cronjob like this to delete all reports 'without event', 'after one day' or
those with events 'after 7 days'.</p>

<pre><code>#!/bin/sh
foreman-rake reports:expire days=1 status=0
foreman-rake reports:expire days=7
</code></pre>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/02_cleanup:3">
<h1>Backup</h1>

<ul>
<li><p><u>In a regular interval, at least before an upgrade!</u></p></li>
<li>
<p>Foreman </p>

<ul>
<li>Configuration - Archive the configuration directory</li>
<li>Database - Backupjob provided by Foreman</li>
</ul>
</li>
<li>
<p>Puppet </p>

<ul>
<li>CA - Archive the certificates </li>
<li>Puppet Code - Archive the modules</li>
</ul>
</li>
<li>
<p>Smart proxies </p>

<ul>
<li>Smart proxies itself - Archive the Smart proxy configuration </li>
<li>Managed Service - Follow instructions for the service</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Backup should be done in a regular interval, but at least performed before any upgrade, and it should cover all components.</p>

<div class="pagebreak">continued...</div>

<p>Foreman backup can be done by archiving the configuration directory "/etc/foreman" and for the database a dump can
be generated with the following command "foreman-rake db:dump" provided by the Foreman.</p>

<p>The Puppet backup should include the certificates which are located in "/var/lib/puppet/ssl" on the Puppet CA server and the
Puppet Code underneath "/etc/puppet/environments". Other configuration management solutions will be handled in a similar
way.</p>

<p>To backup the Smart proxy, archive the folder "/etc/foreman-proxy" and do not forget about the managed service. 
For this follow the instructions for the service. With the "Orchestration rebuilder" feature, the Foreman can also rebuild all configuration issued via the Smart proxy from the "All Hosts" menu as an action.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/02_cleanup:4">
<h1>Restore</h1>

<ul>
<li><p><u>Always stop the service before doing any restore!</u></p></li>
<li>
<p>Foreman </p>

<ul>
<li>Configuration - Restore the configuration directory</li>
<li>Database - Restorejob provided by Foreman</li>
</ul>
</li>
<li>
<p>Puppet </p>

<ul>
<li>CA - Restore the certificates </li>
<li>Puppet Code - Restore the modules</li>
</ul>
</li>
<li>
<p>Smart proxies </p>

<ul>
<li>Smart proxies itself - Restore the Smart proxy configuration </li>
<li>Managed Service - Follow instructions for the service</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Before starting a restore always stop the service!</p>

<div class="pagebreak">continued...</div>

<p>Restore the configuration directory of the Foreman carefully and inspect it before overwritting the current one. The database
dump can be restored with the command "foreman-rake db:import_dump file=/usr/share/foreman/db/foreman.TIMESTAMP.sql". Drop
an existing database in advance to have a clean restore.</p>

<p>For Puppet restore simply copy back the files, the same goes for the Smart proxy. The managed services should be restored according to
their instructions.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/02_cleanup:5">
<h1>Upgrade</h1>

<ul>
<li><p><u>Always follow the instructions in the Foreman manual!</u></p></li>
<li>
<p>In General:</p>

<ul>
<li><u>Backup</u></li>
<li>Change package repository to the new release</li>
<li>Update the packages</li>
<li>Run Database migration and seed script</li>
<li>Clear the cache and sessions</li>
<li>Optionally run the foreman-installer to verify</li>
<li>Restart the service</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Always follow the instructions in the Foreman manual providing release and operating system specific steps to do.</p>

<div class="pagebreak">continued...</div>

<p>In general you should start by creating an up to date backup of the old configuration. Afterwards you have to change the package repository to the newest release because Foreman is always providing a separate repository for any major release. Then cleanup the package metadata and update the packages. It should run the database migration and seed script during the package update but if running them manually will show you any error then clear the cache and existing sessions. As a last step
before restarting the service you can optionally run the foreman-installer in simulation mode to verify the installation
and see pending config changes, if some are shown run the foreman-installer again to apply them finally.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup6" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/02_cleanup:6">
<h1>Foreman Maintain</h1>

<ul>
<li>A tool developed to automate the previous tasks</li>
<li>Handles multiple strategies for

<ul>
<li>Backup</li>
<li>Restore</li>
</ul>
</li>
<li>Handles Updates including Health checks</li>
<li>Maintenance mode prevents access to Foreman</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Foreman Maintain is a newly developed tool which tries to automate the previous tasks. It can handle multiple strategies for backup and restore,
like offline and online, full and incremental. It ensures system health during Update and its maintenance mode prevents access to Foreman.</p>

<p>For more information: <a href="https://theforeman.org/plugins/foreman_maintain/0.2/index.html" target="_blank">https://theforeman.org/plugins/foreman_maintain/0.2/index.html</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="03_api" id="advanced_03_api1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/03_api:1">
<h1>API</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="03_api" id="advanced_03_api2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/03_api:2">
<h1>API</h1>

<ul>
<li>Version 1 of the API is deprecated</li>
<li>Version 2 

<ul>
<li>JSON API</li>
<li>Shared with Katello</li>
<li>Requires username and password</li>
<li>Collections are paged</li>
<li>Search strings like provided in the WebGUI</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Foreman provides a web based JSON API which is shared with Katello. This is Version 2 of the
API which is favored instead of the already deprecated version 1. It requires an authentication
by username and password. Perhaps unusal is the handling of collections which are paged in the
same way like in the webinterface. The same way it handles search strings like they are provided
in the WebGUI but they have to be URL encoded.</p>

<p></p>
<div class="pagebreak">continued...</div>~~PAGEBREAK~~~~

<p>Usage explainations can be found at <a href="http://theforeman.org/manuals/latest/index.html#5.1API" target="_blank">http://theforeman.org/manuals/latest/index.html#5.1API</a></p>

<p>API documentation is located at <a href="http://theforeman.org/api/1.18/index.html" target="_blank">http://theforeman.org/api/1.18/index.html</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="03_api" id="advanced_03_api3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/03_api:3">
<h1>Lab 8.1: Working with the API</h1>

<ul>
<li>Objective:

<ul>
<li>Use the API to query, create and update objects</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Query the API for all subnets</li>
<li>Query the API for all Debian hosts</li>
<li>Create a hostgroup "training" using the API</li>
<li>Change the root password for the hostgroup "training" using the API</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="04_cli" id="advanced_04_cli1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/04_cli:1">
<h1>CLI</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="04_cli" id="advanced_04_cli2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/04_cli:2">
<h1>Hammer CLI</h1>

<ul>
<li>Written in Ruby based on clamp</li>
<li>Modular CLI

<ul>
<li>Basicly a framework</li>
<li>Plugins for Foreman</li>
<li>Some Foreman plugins provide a Hammer plugin</li>
<li>Other tools (especially around Katello)</li>
<li>Create your own plugin</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>The commandline interface for Foreman is based on the Hammer CLI which is basicly a framework
written in Ruby based on clamp. Foreman provides a plugin to manage most aspects of Foreman
like the WebGUI and the API. Some of the Foreman plugins also provide a Hammer plugin, like 
some other tools especially around Katello do. But the framework is not limited to the Foreman
environment, so feel free to create your own plugins to solve your own administrative tasks.
<br>A list of plugins is provided by the Github page of the framework: <a href="https://github.com/theforeman/hammer-cli" target="_blank">https://github.com/theforeman/hammer-cli</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="04_cli" id="advanced_04_cli3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/04_cli:3">
<h1>Lab 8.2: Working with the CLI</h1>

<ul>
<li>Objective:

<ul>
<li>Use the CLI to prepare a new Operatingsystem entry</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Make sure to provide the correct credentials.</li>
<li>Create the new Operatingsystem entry for "CentOS 6.8"</li>
<li>Associate the template "Kickstart default PXELinux" and set it as default template</li>
<li>Associate the template "Kickstart default" and set it as default template</li>
</ul>
</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="05_multitenancy" id="advanced_05_multitenancy1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/05_multitenancy:1">
<h1>Multitenancy</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="05_multitenancy" id="advanced_05_multitenancy2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/05_multitenancy:2">
<h1>Multitenancy</h1>

<ul>
<li>Adds Organizations and/or Locations

<ul>
<li>Can be nested</li>
</ul>
</li>
<li>All Objects require one context</li>
<li>User

<ul>
<li>can have multiple contexts</li>
<li>can have a default context</li>
<li>keep care of in which context he works</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Foreman has build in multitenancy which is starting from version 1.21 enabled by default. </p>

<p>Depending on your needs you can add Organizations and/or Locations. Every object will require 
exactly one context with the exception of users who can have multiple contexts and one of these assigned
as their default context. But he has to keep care of in which context he works because objects he creates
will be in this context.</p>

<p>Organization and Location can both be nested to represent a hierarchy with a top-down approach.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="06_troubleshooting" id="advanced_06_troubleshooting1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/06_troubleshooting:1">
<h1>Troubleshooting</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="06_troubleshooting" id="advanced_06_troubleshooting2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/06_troubleshooting:2">
<h1>Logging</h1>

<ul>
<li>
<p>Foreman</p>

<ul>
<li>Increase log level in general</li>
<li>Enable additional specific logs</li>
</ul>
</li>
<li>
<p>Smart proxy</p>

<ul>
<li>Increase log level</li>
<li>Smart proxies log can be read on the WebGUI</li>
</ul>
</li>
<li><p>Plugins can add their own logging</p></li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Both Foreman and the Smart proxy write an excellent log file.</p>

<p>Foreman log files are located in "/var/log/foreman" and its main log is called "production.log".
You can find all accessed URLs and errors generated by accessing it. If the standard log level 
does not provide any information it is possible to increase the log level by changing the configuration
in the "/etc/foreman/settings.yaml".</p>

<pre><code>:logging:
  :level: debug
</code></pre>

<p>Furthermore it is possible to enable additional specific loggers.</p>

<ul>
<li>app - web requests and all general application logs (default: true)</li>
<li>ldap - high level LDAP queries (e.g. find users in group) and LDAP operations performed (default: false)</li>
<li>permissions - evaluation of user roles, filters and permissions when loading pages (default: false)</li>
<li>sql - SQL queries made through Rails ActiveRecord, only debug (default: false)</li>
</ul>

<p>For those add following to the configuration:</p>

<pre><code>:loggers:
  :ldap:
    :enabled: true
</code></pre>

<p>The log files of the Smart proxy are located in "/var/log/foreman-proxy" containing all errors issued by the
Smart proxy like downloading of boot images failed and failed updates of services. If additional details are
needed increase the log level in "/etc/foreman-proxy/settings.yml".</p>

<pre><code>:log_level: DEBUG
</code></pre>

<p>Plugins to both components can add directly to the log or write their own, so have a look into their configuration
if attempting any troubleshooting with a specific plugin.</p>

<p>You can enable Logs access from the WebGUI by adding in
"/etc/foreman-proxy/settings.d/logs.yml":</p>

<pre><code>:enabled: https
</code></pre>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="06_troubleshooting" id="advanced_06_troubleshooting3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/06_troubleshooting:3">
<h1>Provisioning process</h1>

<ul>
<li>Watch the output in the WebGUI</li>
<li>Spoof the provisioning configuration</li>
<li>Find the communication in Foreman log</li>
<li>In the Smart proxy log

<ul>
<li>Download of boot images</li>
<li>Configuration changes failing</li>
</ul>
</li>
<li>On the TFTP server

<ul>
<li>Checksum of boot image</li>
<li>PXE configuration</li>
</ul>
</li>
<li>Reports of configuration management</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Troubleshooting of the provisioning process can be required if deployment of a system fails or differs from expectation.
In most cases the output of the WebGUI is quite useful, but sometimes a deeper look is required to find a solution.</p>

<p>You can get the provisioning configuration files by spoofing the URL:</p>

<pre><code> https://foreman.localdomain/unattended/provision?spoof=10.0.0.100
</code></pre>

<p>In this URL you can change the template type provision to every other type to get those files.</p>

<p>If everything here seems to be correct, check the communication in the Foreman log. Getting the exact URLs from the log
and browsing them can help to find issues like token on a boot disk expired.</p>

<p>Next step would be to look for errors in the Smart proxy log if the download of the boot images or some configuration
changes issued to the managed services have failed.</p>

<p>On the TFTP server have a look at the boot image, it is downloaded only once during the first deployment of a host started.
If somehow the image was already downloaded you will not find any new log entry about the failed download. Also in some rare
cases distribution releases a newer version of the boot image to fix some installation issues. So check the size and checksum
of the image if the boot fails. </p>

<div class="pagebreak">continued...</div>

<p>In the case there is no PXE configuration you can cancel and restart the build process or execute a rebuild from the "All Hosts" menu.</p>

<p>If the deployment of the system works but something is not configured in the expected way have a look in the reports of
the configuration management. In many cases Puppet code is not well designed or has some cross system dependencies so
the agent has to run more than once to complete the full configuration.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="06_troubleshooting" id="advanced_06_troubleshooting4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/06_troubleshooting:4">
<h1>Upstream support</h1>

<ul>
<li>Common issues in the Wiki</li>
<li>IRC

<ul>
<li>User channel for support</li>
<li>Developer channel for development support</li>
</ul>
</li>
<li>Community Platform based on Discourse</li>
<li>Server fault</li>
<li>Youtube</li>
<li>Issue tracker</li>
<li>Debug tool</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The Foreman team tries to help with issues as good as they can. To achieve this there are several ways to get support available.</p>

<p>First have a look into the Wiki page collecting common issues: <a href="http://projects.theforeman.org/projects/1/wiki/Troubleshooting" target="_blank">http://projects.theforeman.org/projects/1/wiki/Troubleshooting</a></p>

<p>If your problem is not covered there the fastest way to get in touch with the team is the IRC Channel. The channel #theforeman is
hosted on irc.freenode.net, the developer channel #theforeman-dev is only for support on development of Foreman and plugins.</p>

<p>The mailing lists have been replaced with Discourse to provide a Community Platform which is basicly a forum with mailing list support.
You can get help here, discuss development and follow release workflow including test weeks.</p>

<div class="pagebreak">continued...</div>

<p>On 'Server Fault' you can ask questions and find answers tagged with foreman: <a href="http://serverfault.com/questions/tagged/foreman" target="_blank">http://serverfault.com/questions/tagged/foreman</a></p>

<p>On Youtube in the Foreman channel you can find introductions, deep dives, community demos and other ressources which can also
be very useful: <a href="https://www.youtube.com/channel/UCCo7AZ1oG6TbG0-dwjRqCmw" target="_blank">https://www.youtube.com/channel/UCCo7AZ1oG6TbG0-dwjRqCmw</a></p>

<p>Looking at all those resources will solve most issues, if not it is probably a bug, so search for it in the issue tracker
and if you can not find a similar issue file create a new one with as much information as possible to help fixing the bug and others with the same issue. 
<a href="http://projects.theforeman.org/projects/foreman/issues" target="_blank">http://projects.theforeman.org/projects/foreman/issues</a></p>

<p>Sometimes you could be asked to send a debug report which could be generated with "foreman-debug" including the complete
configuration stripped of security data. With "foreman-debug -u" it could be uploaded to a location only accessable by the
Foreman core developers.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="07_monitoring" id="advanced_07_monitoring1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/07_monitoring:1">
<h1>Monitoring</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="07_monitoring" id="advanced_07_monitoring2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/07_monitoring:2">
<h1>Foreman &amp; Smart Proxy</h1>

<ul>
<li>
<p>Foreman</p>

<ul>
<li>Webinterface should be available using HTTPs include "Welcome to foreman"</li>
<li>Provisioning requires also HTTP requests being answered</li>
<li>Foreman log should not have entries "500 Internal Server Error"</li>
</ul>
</li>
<li>
<p>Smart proxy</p>

<ul>
<li>Query the feature list for expected features</li>
<li>Smart proxies log should not have entries "ERROR"</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>For monitoring Foreman you should include a check to verify if the Webinterface is available using HTTPs and
if it includes the string "Welcome to foreman" as it is possible that it shows a stracktrace if something is
goes wrong. If using monitoring plugins with Icinga or something similar you could use check_http.</p>

<pre><code>check_http -H foreman.localdomain -p 443 -S -f follow -s 'Welcome to Foreman'
</code></pre>

<div class="pagebreak">continued...</div>

<p>During provisioning also plain HTTP requests will be required, but you can not simulate exactly this request
because of redirect rules directing the request to HTTPs.</p>

<pre><code>check_http -H foreman.localdomain -e 301
</code></pre>

<p>Log entries containing "500 Internal Server Error" will typically indicate a software failure caused by
something not running properly or a bug. Check_logfiles provided at <a href="http://labs.consol.de" target="_blank">http://labs.consol.de</a> could be used
to monitor.</p>

<pre><code>check_logfiles --logfile /var/log/foreman/production.log --rotation loglogdate8logdate8gz \
--criticalpattern '500 Internal Server Error' --tag foreman
</code></pre>

<p>To monitor the Smart proxy query the feature list for expected features as a feature will be deactivated if
an error during startup occures.</p>

<pre><code>check_http -H foreman.localdomain -S -p 8443 -u /features -s '["dhcp","dns","logs","puppet","puppetca","tftp"]'
</code></pre>

<p>In the log monitor for entries marked as "ERROR".</p>

<pre><code>check_logfiles --logfile /var/log/foreman-proxy/proxy.log --rotation loglogdate8gz \
--criticalpattern 'ERROR' --tag foreman-proxy
</code></pre>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="07_monitoring" id="advanced_07_monitoring3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/07_monitoring:3">
<h1>Managed Services</h1>

<ul>
<li>Puppet: Query for a catalog</li>
<li>TFTP: Try to get a small file like pxelinux.cfg/default</li>
<li>DNS: Query DNS for a specific combination of name and address</li>
<li>DHCP: Try to get a DHCPOFFER from a system not being the DHCP server</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Best way to verify that Puppet is available is trying to get a catalog and check it for some
content like the name. It will require to use the client certificate of the host for authentication.
For Puppet 3 this could look like this.</p>

<pre><code>check_http -H foreman.localdomain -S -p 8140 \ 
-J /var/lib/puppet/ssl/certs/foreman.localdomain.pem \
-K /var/lib/puppet/ssl/private_keys/foreman.localdomain.pem \
-u /production/catalog/foreman.localdomain \
-s '"name":"foreman.localdomain"'
</code></pre>

<div class="pagebreak">continued...</div>

<p>To verify TFTP working fine try to get a small file like pxelinux.cfg/default (which you need to create).
There are several plugins available like the one provided at <a href="http://william.leibzon.org/nagios/" target="_blank">http://william.leibzon.org/nagios/</a></p>

<pre><code>check_tftp foreman.localdomain pxelinux.cfg/default
</code></pre>

<p>DNS functionality is best checked by a specific combination of name and address and could be simply included
for every host.</p>

<pre><code>check_dns -s foreman.localdomain -H foreman.localdomain -a 10.0.0.2
</code></pre>

<p>DHCP providing DHCPOFFERS can only be verifed from systems not being the DHCP server and should ask a specific
DHCP server to ensure answers are not provided from another system.</p>

<pre><code>check_dhcp -s 10.0.0.2 -r 10.0.0.102 -u
</code></pre>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="01_overview" id="katello_01_overview1" class="slide subsection" data-transition="none">
<div class="content subsection" ref="katello/01_overview:1">
<h1>9 Katello</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="01_overview" id="katello_01_overview2" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="katello/01_overview:2">
<h1>Katello</h1>

<div style="text-align:right">
<img src="./file//katello/_images/katello-logo.png" style="float: right; max-width:200px; max-height: 150px; width: auto; height: auto; margin: 20px" alt="Katello Logo">
</div>

<ul>
<li>Defined set of Foreman plugins to provide Content management:

<ul>
<li>YUM repositories (RPM + Errata)</li>
<li>Puppet modules</li>
<li>Docker container</li>
<li>OSTree branches</li>
<li>Debian repositories</li>
</ul>
</li>
<li>Subscription Management

<ul>
<li>Red Hat Subscriptions</li>
<li>Track internal use</li>
</ul>
</li>
<li>Defined scenario for Foreman Installer</li>
<li>Upstream project for Red Hat Network Satellite 6</li>
</ul>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="02_content" id="katello_02_content1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="katello/02_content:1">
<h1>Content management - Products</h1>

<ul>
<li>Content management is based on products</li>
<li>Products consists of one or more repositories of any content type</li>
</ul>

<div style="text-align: center"><img src="./file//katello/_images/products.png" style="float: center; margin-left: 50px; width: 798px; height: 211px;" alt="Katello - Products"></div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="02_content" id="katello_02_content2" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="katello/02_content:2">
<h1>Content management - Content Views</h1>

<ul>
<li>Content Views create versioned snapshots of one or more repositories</li>
<li>Allow to filter several software packages</li>
<li>Composite Content Views are possible</li>
</ul>

<div style="text-align:center"><img src="./file//katello/_images/contentviews.png" style="float: center; margin-left: 102px; width: 796px; height: 186px;" alt="Katello - Content Views"></div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="02_content" id="katello_02_content3" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="katello/02_content:3">
<h1>Content management - Lifecycle Environments</h1>

<ul>
<li>Lifecycle Environments represent different stages</li>
<li>Multiple Lifecycle Environments Paths allow different staging models</li>
</ul>

<div style="text-align: center"><img src="./file//katello/_images/lifecycle.png" style="float: center; margin-left: 50px; width: 798px; height: 160px;" alt="Katello - Lifecycle Environments"></div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="02_content" id="katello_02_content4" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="katello/02_content:4">
<h1>Content management - Content Hosts</h1>

<ul>
<li>Consumer of content and subscriptions - different view on a host than Hosts in Foreman</li>
<li>Optional Agent allows to execute commands</li>
</ul>

<div styele="text-align: center"><img src="./file//katello/_images/contenthost.png" style="float: center; margin-left: 50px; width: 794px; height: 347px;" alt="Katello - Content Host"></div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="03_subscription" id="katello_03_subscription" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="katello/03_subscription">
<h1>Subscription management</h1>

<ul>
<li>
<p>Red Hat</p>

<ul>
<li>Subscription Manifest - certificates for communication and subscription data</li>
<li>Red Hat Repositories - available products and repositories</li>
<li>Products and Repositories on click</li>
<li>Content Hosts consume subscriptions</li>
</ul>
</li>
<li>
<p>SUSE</p>

<ul>
<li>Similar workflow to Red Hat via Plugin</li>
</ul>
</li>
<li>
<p>Other software</p>

<ul>
<li>Tracks subscribed Content Hosts for products</li>
</ul>
</li>
</ul>


</div>
<div class="notes-section handouts">

<hr>

<p>Subscription management is primarily implemented for cosuming Red Hat Content you subcribed.</p>

<p>Red Hat allows to create a Subscription Manifest to move Subscription management from Red Hat
Network to your environment. This manifest includes the certificates required for communication
and the subscription data. Red Hat Repositories View shows available products and repositories
covered by the subscription data and allows to select them which will automatically create and
synchronize them to your system.</p>

<div class="pagebreak">continued...</div>

<p>For SUSE a similar workflow can be enabled when using the Foreman SCC Manager plugin which is
available as package and you can find upstream at <a href="https://github.com/ATIX-AG/foreman_scc_manager" target="_blank">https://github.com/ATIX-AG/foreman_scc_manager</a>.</p>

<p>The Content Hosts cosume these subscriptions in the same way like they were directly connected to
the Red Hat Network. If you purchased Virtual Subscriptions it requires you to run virt-what and
report your virtualization hosts before you can consume subscriptions with the virtual machines.</p>

<p>For other software Subscription Management can also be useful by simply tracking all subscribed
Content Hosts for products.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="04_demo" id="katello_04_demo1" class="slide center noprint" data-transition="none">
<div class="content center noprint" ref="katello/04_demo:1">
<h1>Demo</h1>

<p>Katello Demo</p>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Post" data-title="01_Feedback" id="global_Post_01_Feedback" class="slide noprint center" data-transition="none">
<div class="content noprint center" ref="global/Post/01_Feedback">
<h1>FEEDBACK</h1>

<p>We look forward to your feedback</p>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Post" data-title="02_Thanks" id="global_Post_02_Thanks" class="slide noprint center" data-transition="none">
<div class="content noprint center" ref="global/Post/02_Thanks">
<h1>THANK YOU</h1>

<p>Thank you for your attention!</p>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Post" data-title="03_Contributors" id="global_Post_03_Contributors1" class="slide noprint center" data-transition="none">
<div class="content noprint center" ref="global/Post/03_Contributors:1">
<h1>Contributing</h1>

<p>Contribute to the Foreman training on <a href="https://github.com/NETWAYS/foreman-training" target="_blank">Github</a> to make it even better.</p>

<p>Material is licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International</a>.</p>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Post" data-title="03_Contributors" id="global_Post_03_Contributors2" class="slide noprint center" data-transition="none">
<div class="content noprint center" ref="global/Post/03_Contributors:2">
<h1>Contributors</h1>

<p></p>
<center><pre>
David Okon
Dirk Götz
Julien Pivotto
Markus Waldmüller
Simon Hönscheid
</pre></center>
</div>
<canvas class="annotations"></canvas>
</div>
</div>
<div id="buttonNav">
  <div id="buttonPrev"><i class="fa fa-chevron-left fa-lg"></i> Previous</div><div id="buttonNext">Next <i class="fa fa-chevron-right fa-lg"></i></div>
</div>
<div id="pauseScreen">
  PAUSED
</div>

  <script defer type="text/javascript">
    // We want the audience members to see automatic tours. We can assume that they won't be
    // using many server domains like the presenter might.
    var autoTour = true;

    $( document ).ready(function() {
      if(presenter && !window.opener) {
        alert('This is an audience view designed for interactivity. If you are placing this window on a projector, you should use the Display View instead.');
      }

      tours['showoff:activity'] = [
        {
          element: ".currentSlide .activityToggle",
          intro: I18n.t('tour.activity.complete')
        }
      ];

      tours['showoff:form'] = [
        {
          element: ".currentSlide input.save",
          intro: I18n.t('tour.form.save')
        }
      ];

      tours['showoff:menu'] = [
        {
          element: "#hamburger",
          intro: I18n.t('tour.menu.start')
        },
        {
          element: "#navToggle",
          intro: I18n.t('tour.menu.navigation')
        },
        {
          element: "#fileDownloads",
          intro: I18n.t('tour.menu.download')
        },
        {
          element: "#paceFaster",
          intro: I18n.t('tour.menu.pace')
        },
        {
          element: "#questionToggle",
          intro: I18n.t('tour.menu.questions')
        },
        {
          element: "#feedbackToggle",
          intro: I18n.t('tour.menu.feedback')
        }
      ].filter(function(item) { return (document.querySelector(item['element'])) });
      // display tips for only the enabled features
    });
  </script>

</body>
</html>
