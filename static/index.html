<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Foreman | Lifecyclemanagement for Server</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>

  
  <link rel="icon" href="image/global/favicon.ico"/>
  

  <link rel="stylesheet" type="text/css" href="css/highlight/default.css"  />
  <link rel="stylesheet" type="text/css" href="css/mermaid-6.0.0.css" />
  <link rel="stylesheet" type="text/css" href="css/font-awesome-5.6.1/css/all.min.css">
  <link rel="stylesheet" type="text/css" href="css/introjs-2.5.local.css">
  <link rel="stylesheet" type="text/css" href="css/jquery-ui-1.12.1.css">
  <link rel="stylesheet" type="text/css" href="css/showoff.css?v=0.20.4" />
  <link rel="stylesheet" type="text/css" href="css/zoomline-0.0.1.css">

  <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
  <script type="text/javascript" src="js/jquery-ui-1.12.1.js"></script>

  <script type="text/javascript" src="js/jquery.cycle.all-2.8.0.js"></script>
  <script type="text/javascript" src="js/jquery.batchImageLoad-1.0.0.js"></script>
  <script type="text/javascript" src="js/jquery.parsequery.min-6a20f83.js"></script>
  <script type="text/javascript" src="js/jquery.doubletap-4ff02c5.js"></script>
  <script type="text/javascript" src="js/highlight.pack-9.15.10.js"></script>
  <script type="text/javascript" src="js/highlightjs-line-numbers.min.js"></script>
  <script type="text/javascript" src="js/jTypeWriter-1.1.js"></script>
  <script type="text/javascript" src="js/bigtext-0.1.8.js"></script>
  <script type="text/javascript" src="js/zoomline-0.0.1.js"></script>
  <script type="text/javascript" src="js/simpleStrings-0.0.1.js"></script>
  <script type="text/javascript" src="js/mermaid-6.0.0-min.js"></script>

  <!-- waiting on https://github.com/usablica/intro.js/pull/727 -->
  <script type="text/javascript" src="js/intro-2.5.local.js"></script>

  <script type="text/javascript" src="js/coffee-script-1.1.3-pre.js"></script>

  <script type="text/javascript" src="js/annotations.js?v=0.20.4"></script>
  <script type="text/javascript" src="js/showoff.js?v=0.20.4"></script>

  
    <link rel="stylesheet" type="text/css" href="foreman.css" />
  

  

  <script type="text/javascript">
    $(function(){
      setupPreso(false);
    });

    editUrl     = "";
    interactive = false;
    master      = false;
    presenter   = false;

    keymap               = {
  "d": "DEBUG",
  "space": "NEXT",
  "down": "NEXT",
  "right": "NEXT",
  "pagedown": "NEXT",
  "up": "PREV",
  "left": "PREV",
  "pageup": "PREV",
  "SPACE": "NEXTSEC",
  "DOWN": "NEXTSEC",
  "RIGHT": "NEXTSEC",
  "PAGEDOWN": "NEXTSEC",
  "UP": "PREVSEC",
  "LEFT": "PREVSEC",
  "PAGEUP": "PREVSEC",
  "R": "RELOAD",
  "r": "REFRESH",
  "c": "CONTENTS",
  "t": "CONTENTS",
  "h": "HELP",
  "/": "HELP",
  "?": "HELP",
  "b": "BLANK",
  ".": "BLANK",
  "F": "FOOTER",
  "f": "FOLLOW",
  "n": "NOTES",
  "esc": "CLEAR",
  "p": "PAUSE",
  "P": "PRESHOW",
  "x": "EXECUTE",
  "f5": "EXECUTE"
};
    keycode_dictionary   = {
  "0": "\\",
  "8": "backspace",
  "9": "tab",
  "12": "num",
  "13": "enter",
  "16": "shift",
  "17": "ctrl",
  "18": "alt",
  "19": "pause",
  "20": "caps",
  "27": "esc",
  "32": "space",
  "33": "pageup",
  "34": "pagedown",
  "35": "end",
  "36": "home",
  "37": "left",
  "38": "up",
  "39": "right",
  "40": "down",
  "44": "print",
  "45": "insert",
  "46": "delete",
  "48": "0",
  "49": "1",
  "50": "2",
  "51": "3",
  "52": "4",
  "53": "5",
  "54": "6",
  "55": "7",
  "56": "8",
  "57": "9",
  "59": ";",
  "61": "=",
  "65": "a",
  "66": "b",
  "67": "c",
  "68": "d",
  "69": "e",
  "70": "f",
  "71": "g",
  "72": "h",
  "73": "i",
  "74": "j",
  "75": "k",
  "76": "l",
  "77": "m",
  "78": "n",
  "79": "o",
  "80": "p",
  "81": "q",
  "82": "r",
  "83": "s",
  "84": "t",
  "85": "u",
  "86": "v",
  "87": "w",
  "88": "x",
  "89": "y",
  "90": "z",
  "91": "cmd",
  "92": "cmd",
  "93": "cmd",
  "96": "num_0",
  "97": "num_1",
  "98": "num_2",
  "99": "num_3",
  "100": "num_4",
  "101": "num_5",
  "102": "num_6",
  "103": "num_7",
  "104": "num_8",
  "105": "num_9",
  "106": "num_multiply",
  "107": "num_add",
  "108": "num_enter",
  "109": "num_subtract",
  "110": "num_decimal",
  "111": "num_divide",
  "112": "f1",
  "113": "f2",
  "114": "f3",
  "115": "f4",
  "116": "f5",
  "117": "f6",
  "118": "f7",
  "119": "f8",
  "120": "f9",
  "121": "f10",
  "122": "f11",
  "123": "f12",
  "124": "print",
  "144": "num",
  "145": "scroll",
  "173": "-",
  "186": ";",
  "187": "=",
  "188": ",",
  "189": "-",
  "190": ".",
  "191": "/",
  "192": "`",
  "219": "[",
  "220": "\\",
  "221": "]",
  "222": "'",
  "223": "`",
  "224": "cmd",
  "225": "alt",
  "57392": "ctrl",
  "63289": "num"
};
    keycode_shifted_keys = {
  "0": ")",
  "1": "!",
  "2": "@",
  "3": "#",
  "4": "$",
  "5": "%",
  "6": "^",
  "7": "&",
  "8": "*",
  "9": "(",
  "/": "?",
  ".": ">",
  ",": "<",
  "'": "\"",
  ";": ":",
  "[": "{",
  "]": "}",
  "\\": "|",
  "`": "~",
  "=": "+",
  "-": "_",
  "space": "SPACE",
  "down": "DOWN",
  "right": "RIGHT",
  "pagedown": "PAGEDOWN",
  "up": "UP",
  "left": "LEFT",
  "pageup": "PAGEUP"
};
    user_translations    = {
};

    I18n = new translation({"name":"Showoff Presentation","menu":{"title":"Showoff Menu","table_of_contents":"Table of Contents","downloads":"Downloads","feedback":{"label":"Send Feedback","description":"This slide is...","worst":"Terrible","best":"Awesome","why":"Why...?","send":"Send"},"pace":{"label":"The presenter should...","slower":"Slow Down","faster":"Speed Up"},"question":{"label":"Ask a Question","placeholder":"Ask a question..."},"edit":"Edit Current Slide","clear_annotations":"Clear Annotations","language":"Content Language","close":"Close","help":"Press <code>?</code> for help.","anonymous":"All features are anonymous.","sending":"Sending..."},"navigation":{"next":"Next","previous":"Previous","sync":"Sync Presentation"},"loading":"loading presentation...","activity_complete":"Activity complete","follow":{"label":"Follow Mode:"},"refresh":"Are you sure you want to refresh the slide content?\n\n(Use `RELOAD` to fully reload the entire UI)","reload":"Are you sure you want to reload Showoff?","preshow":{"prompt":"Minutes from now to start?","resume":"Resuming in:"},"tour":{"show":"See the Tour","reset":"Reset Hints","welcome":"<h3>Welcome to Showoff</h3>Let me show you around. After you finish this tour, it won't show again.","displayview":"Start by clicking this button to open the Display Window; then drag it onto the projector.","annotations":"Draw on your slides everywhere the presentation is displayed.","timer":"Set a countdown timer to help you stay on pace.","pace":"Audience members can use this to tell you if you're moving too quickly. Try to keep the indicator centered.","questions":"Questions asked by audience members are displayed here. You'll also see a count indicator on the Display Window when you have questions to answer.","notes":"Configure the notes display by zooming text, resizing the pane, or even popping it out into a new window.","slidesource":"The name of the slide is displayed here.","settings":"Would you like a different presenter layout? Choose that and other settings here.","edit":"This button will open your web-based editor--usually something like GitHub.","report":"Don't forget to report issues when you see them.","activity":{"count":"This will count down as audience members mark their activity complete. Their presentations will pause until completed.","complete":"Check this box when you're ready to move on. The presentation will pause while you're working."},"form":{"responses":"As questions are answered, they'll show up as a bar chart with the number of answers to each question on the right.","display":"Press this button to present a snapshot of the live responses on slide.","save":"Press this button to save your responses. The presentation will pause while answering."},"menu":{"start":"Click here to open the menu.","navigation":"Quickly navigate to any slide.","download":"Download presentation support files.","pace":"Provide pace feedback.","questions":"Ask live questions of the presenter.","feedback":"Provide suggestions for improving the content."}},"downloads":{"title":"File Downloads"},"help":{"title":"Help","next":"Move to the next slide.","prev":"Move to the previous slide.","nextsec":"Move to the next section.","prevsec":"Move to the previous section.","contents":"Show the table of contents menu.","follow":"Toggle follow mode.","help":"Show this help dialog.","refresh":"Refresh slide content.","reload":"Completely reload Showoff.","blank":"Blank the screen.","footer":"Toggle the display footer.","notes":"Toggle notes display.","clear":"Clear code execution results.","pause":"Pause the presentation.","preshow":"Display slideshow of <tt>preshow</tt> images on a timer.","execute":"Execute the first visible code block.","debug":"Show debugging information.","close":"Close"},"stats":{"title":"Viewing Statistics","stray":"of your audience is not viewing the same slide you are.","idle":"of your audience is idle.","current":"Slides currently being viewed","elapsed":"Elapsed time spent on each slide","nodata":"No data to display.","allcurrent":"All audience members are viewing the presenter's slide."},"forms":{"display":"Display Results","save":"Save"},"presenter":{"topbar":{"annotations":"Annotations","edit":"Edit Slide","report":"Report Issue With Slide","stats":"Viewing Statistics","downloads":"Downloads","display":"Display Window","print":"Print Slides","settings":"Settings","newpage":"Open in a new page...","tooltip":{"annotations":"Enable the annotations subsystem.","edit":"Edit current slide in new window.","report":"Report an issue with the current slide.","stats":"See the slides your audience is interacting with.","downloads":"Open the file downloads in a menu or new page.","display":"Enable the Display Window; you should put this on the projector.","print":"Print slides using a new window.","settings":"Open the Settings dialog."}},"preview":{"next":"Next","previous":"Previous"},"mobile":{"update":"Update"},"notes":{"label":"Showoff Notes","personal":"Personal Notes"},"timer":{"label":"Timer:","start":"Start","pause":"Pause","resume":"Resume","cancel":"Cancel","unit":"minutes"},"pace":{"faster":"Speed Up!","slower":"Slow Down!"},"questions":"Audience Questions","annotation":{"tools":"Tools","lines":"Lines","shapes":"Shapes"},"status":{"label":"Slides:"},"settings":{"label":"Settings","close":"Close","follower":{"label":"Update Follower","tooltip":"Send slide change notifications.","description":"When this is enabled, the Showoff server will track your slide changes. Disable it to observe the presentation without inadvertently causing slide changes."},"remote":{"label":"Enable Remote","tooltip":"Enables tracking of other presenters.","description":"When this is enabled, you can load the presenter in another browser (typically on your mobile phone) to control the presentation."},"layout":{"label":"Layout","default":"Default Layout","thumbs":"Display thumbnail previews of the next and previous slides.","beside":"Display the next slide as a large preview in the main presenter view.","floating":"Open the next slide as a floating window.","confirmation":"Browser security requires confirmation before opening a new window.","open":"Open Window","cancel":"cancel","reset":{"label":"Clear Showoff settings.","tooltip":"Reset Showoff UI settings to default values."}},"language":{"label":"Content Language","tooltip":"Select from available translations, or autoselect based on your browser settings.","description":"This presentation is available in different languages. Choose the language you would like to view or leave it at <tt>automatic</tt> to use your browser settings."}},"print":{"label":"Choose type of printed notes","description":"Select the content you'd like to show under the slides.","none":"Don't include notes","notes":"Presenter Notes","handouts":"Audience Handouts"}},"language":{"auto":"Automatic","disable":"Disable Translations"},"error":{"file_not_found":"File Not Found!"}});

  </script>

</head>

<body>
<div id="questionsIndicator"></div>

<i id="hamburger" class="fa fa-bars fa-2x"></i>
<div id="sidebarWrapper">
    <div id="navigationHover"></div>
    <div id="feedbackSidebar" class="sideMenu">
    <img id="disconnected" src="css/disconnected.png">
    <h3>Showoff Menu</h3>
    <div id="navToggle" class="buttonWrapper"><i class=" fa fa-bookmark"></i> Table of Contents</div>
    <div id="navigation" class="submenu"></div>
    
    <hr>

    

    

    <div id="closeMenu" class="buttonWrapper"><i class="fa fa-close"></i> Close</div>
    <hr>

    <small>
        <p>Press <code>?</code> for help.</p>
        <p>All features are anonymous.</p>
    </small>
    </div>
    <div id="sidebarExit"></div>
</div>
<div id="help-modal" title="Help">
  <div id="help">
    <div>
      <span class="description">Move to the next slide.</span>
      <span class="action">NEXT</span>
      <span class="hotkeys"><span class="key">space</span><span class="key">down</span><span class="key">right</span><span class="key">pagedown</span></span>
    </div>
    <div>
      <span class="description">Move to the previous slide.</span>
      <span class="action">PREV</span>
      <span class="hotkeys"><span class="key">up</span><span class="key">left</span><span class="key">pageup</span></span>
    </div>
    <div>
      <span class="description">Move to the next section.</span>
      <span class="action">NEXTSEC</span>
      <span class="hotkeys"><span class="key">SPACE</span><span class="key">DOWN</span><span class="key">RIGHT</span><span class="key">PAGEDOWN</span></span>
    </div>
    <div>
      <span class="description">Move to the previous section.</span>
      <span class="action">PREVSEC</span>
      <span class="hotkeys"><span class="key">UP</span><span class="key">LEFT</span><span class="key">PAGEUP</span></span>
    </div>
    <div>
      <span class="description">Show the table of contents menu.</span>
      <span class="action">CONTENTS</span>
      <span class="hotkeys"><span class="key">c</span><span class="key">t</span></span>
    </div>
    <div>
      <span class="description">Toggle follow mode.</span>
      <span class="action">FOLLOW</span>
      <span class="hotkeys"><span class="key">f</span></span>
    </div>
    <div>
      <span class="description">Show this help dialog.</span>
      <span class="action">HELP</span>
      <span class="hotkeys"><span class="key">h</span><span class="key">/</span><span class="key">?</span></span>
    </div>

    <hr />

    <div>
      <span class="description">Refresh slide content.</span>
      <span class="action">REFRESH</span>
      <span class="hotkeys"><span class="key">r</span></span>
    </div>
    <div>
      <span class="description">Completely reload Showoff.</span>
      <span class="action">RELOAD</span>
      <span class="hotkeys"><span class="key">R</span></span>
    </div>
    <div>
      <span class="description">Blank the screen.</span>
      <span class="action">BLANK</span>
      <span class="hotkeys"><span class="key">b</span><span class="key">.</span></span>
    </div>
    <div>
      <span class="description">Toggle the display footer.</span>
      <span class="action">FOOTER</span>
      <span class="hotkeys"><span class="key">F</span></span>
    </div>
    <div>
      <span class="description">Toggle notes display.</span>
      <span class="action">NOTES</span>
      <span class="hotkeys"><span class="key">n</span></span>
    </div>
    <div>
      <span class="description">Clear code execution results.</span>
      <span class="action">CLEAR</span>
      <span class="hotkeys"><span class="key">esc</span></span>
    </div>
    <div>
      <span class="description">Pause the presentation.</span>
      <span class="action">PAUSE</span>
      <span class="hotkeys"><span class="key">p</span></span>
    </div>
    <div>
      <span class="description">Display slideshow of <tt>preshow</tt> images on a timer.</span>
      <span class="action">PRESHOW</span>
      <span class="hotkeys"><span class="key">P</span></span>
    </div>
    <div>
      <span class="description">Execute the first visible code block.</span>
      <span class="action">EXECUTE</span>
      <span class="hotkeys"><span class="key">x</span><span class="key">f5</span></span>
    </div>

    <hr />

    <div>
      <span class="description">Show debugging information.</span>
      <span class="action">DEBUG</span>
      <span class="hotkeys"><span class="key">d</span></span>
    </div>
  </div>
</div>

<div id="preso"><center>loading presentation...</center></div>
<a id="synchronize"><i class="fa fa-link" aria-hidden="true" href="#"></i> Sync Presentation</a>
<div id="notes"></div>

<footer id="footer">
  <span id="followLabel" class="container">Follow Mode: <i id="followMode" class="fa fa-ban" aria-hidden="true"></i></span>
  <span id="slideInfo" class="container"></span>
  <span id="debugInfo" class="container"></span>
  <span id="notesInfo" class="container"></span>
  <span id="slideFilename" class="container"></span>
  <img id="disconnected" src="css/disconnected.png" />
</footer>

<div id="slides" class="offscreen" style="display:none;">
<div data-section="global/Pre/Title" data-title="01_Title" id="global_Pre_Title_01_Title1" class="slide noprint" data-transition="none">
<div class="content noprint" ref="global/Pre/Title/01_Title:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<div class="title-name"><p>Foreman | Lifecyclemanagement for Server</p></div>

<div class="title-subtitle"><p>created by NETWAYS GmbH</p></div>

<div class="title-author"><p>Original Author: Dirk Götz</p></div>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Pre/Training" data-title="01_Netways" id="global_Pre_Training_01_Netways" class="slide noprint" data-transition="none">
<div class="content noprint" ref="global/Pre/Training/01_Netways">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Author</h1>

<p>Provided by: </p>

<p><img src="./file/global/_images/netways-logo-1366.png" style="max-width:400px; max-height: 200px; width: auto; height: auto; margin-left: 50px" alt="NETWAYS Logo"></p>

<p><a href="https://www.netways.de" target="_blank">www.netways.de</a> - <a href="https://github.com/NETWAYS" target="_blank">github.com/NETWAYS</a> - <a href="https://twitter.com/netways" target="_blank">@netways</a></p>

<p>To Support:</p>

<p><img src="./file/global/_images/foreman/foremanhelmet.png" style="max-width:400px; max-height: 150px; width: auto; height: auto; margin-left: 50px" alt="Foreman Logo"></p>

<p><a href="https://www.theforeman.org" target="_blank">www.theforeman.org</a> - <a href="https://github.com/theforeman" target="_blank">github.com/theforeman</a> - <a href="https://twitter.com/ForemanProject" target="_blank">@ForemanProject</a></p>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Pre/Training" data-title="02_Forthcoming_Training" id="global_Pre_Training_02_Forthcoming_Training" class="slide center noprint" data-transition="none">
<div class="content center noprint" ref="global/Pre/Training/02_Forthcoming_Training">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Forthcoming Hands-on Training</h1>

<p>For events and trainings hosted by NETWAYS see our</p>

<p><a href="https://www.netways.de/en/events/" target="_blank">event calendar</a></p>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="training" data-title="01_training" id="training_01_training1" class="slide subsection" data-transition="none">
<div class="content subsection" ref="training/01_training:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>1 Introduction</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="training" data-title="01_training" id="training_01_training2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="training/01_training:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Training</h1>

<p>This training course will introduce the architectual concepts of Foreman, will cover installation, usage and administration.
The configuration management solution used will be Puppet and/or Ansible.</p>

<ul>
<li>Foreman architecture</li>
<li>Installation</li>
<li>Provisioning</li>
<li>Configuration management</li>
<li>User management</li>
<li>Advanced Use</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<h2>Foreman architecture</h2>

<p>This chapter will give you a basic understanding of the architecture of Foreman, its Smart proxies and Compute Resources.</p>

<h2>Installation</h2>

<p>In this chapter you will get an idea on the different setups you can create, what is required for running foreman, 
how the installer works and will create an All-in-one setup including DNS and DHCP in preparation for unattended installations.</p>

<h2>Provisioning</h2>

<p>This chapter provides basic knowledge on automated installation mechnism for Linux. You will learn how to configure them
in the Foreman Web GUI. Afterwards several installation scenarios will be covered from bare metal installation using PXE
over creating virtual machines using Compute Resources and metal as a service with Foreman's Discovery Plugin to creating
a setup using installation media instead of PXE.</p>

<div class="pagebreak">continued...</div>

<h2>Configuration management</h2>

<p>Some basic explainations will give you enough knowledge to understand how Puppet works and to use it to configure newly provisioned
systems to your needs. Some existing Puppet modules will be imported, parameterized and assigned to the systems directly or
via a host group. Configuration runs will be reported back to Foreman so the administrator can see success and failure.
Furthermore similar exercises are provided for Ansible.</p>

<h2>User management</h2>

<p>To give more users access to the Foreman Web GUI LDAP authentication will be added. Privileges will be added to the new users.
Also the auditing capabilities of Foreman will be covered so you can see what your new users do.</p>

<div class="pagebreak">continued...</div>

<h2>Advanced Use</h2>

<p>Some advanced topics like debugging, clean up, backup and restore will be covered in this chapter. Also the usage of the API
and CLI will be shown. Furthermore additional plugins helpful in some environments will be introduced. And last but not least
the trainer will show you Katello. This project adds content and subscription management to Foreman and is the upstream project
for Red Hat Satellite 6.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="training" data-title="02_hints" id="training_02_hints" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="training/02_hints">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Training Hints</h1>

<ul>
<li>Ask questions! Dumb questions do not exist.</li>
<li>Add your own notes! Having learnt something is reflected best with your own additions.</li>
<li>Join the conversation! Many of these exercises require real world scenarios and your feedback and questions.</li>
<li><p>Work together! Be part of the training team and find solutions together.</p></li>
<li>
<p>Additional documentation in your browser at</p>

<ul>
<li><a href="http://theforeman.org/manuals/latest" target="_blank">http://theforeman.org/manuals/latest</a></li>
<li><a href="https://docs.theforeman.org/" target="_blank">https://docs.theforeman.org/</a></li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="training" data-title="03_environment" id="training_03_environment1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="training/03_environment:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Training Environment</h1>

<div style="text-align: center"><img src="./file/training/_images/environment.png" style="float: center; width: 90%;" alt="Training Environment"></div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Note on the flipchart the address of the repos you are hosting</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="00_overview" id="architecture_00_overview1" class="slide subsection" data-transition="none">
<div class="content subsection" ref="architecture/00_overview:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>2 Foreman Architecture</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="00_overview" id="architecture_00_overview2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/00_overview:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman Project</h1>

<ul>
<li>Open Source Project

<ul>
<li>Homepage: <a href="http://theforeman.org" target="_blank">http://theforeman.org</a>
</li>
<li>Initial release: 10 September 2009</li>
<li>Written in Ruby and Javascript</li>
</ul>
</li>
<li>Lifecyclemanagement for servers

<ul>
<li>provisioning</li>
<li>configuration</li>
<li>orchestration</li>
<li>monitoring</li>
</ul>
</li>
<li>Web based GUI</li>
<li>Utilizes other tools via smart proxy</li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman was originally writen by Paul Kelly and Ohad Levy and initially released on 10 September 2009.<br></p>

<div class="pagebreak">continued...</div>

<p>Now it is sponsored by Red Hat who use it as base for many of their Enterprise solutions like Red Hat Network Satellite and Red Hat OpenStack distribution.</p>

<p>It is writen in Ruby and Javascript to provide a Web based GUI for server lifecyclemanagement, from provisioning and
configuration to orchestration and monitoring. For integration in the IT infrastructure it utilizes other tools via
its smart proxy architecture.</p>

<p>The project provides an open bug tracker for bug reporting and feature requests, its code on github, IRC support to 
help the community and consists of more than 200 contributors.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Original authors are Paul Kelly and Ohad Levy, now working for Red Hat.</li>
<li>More than 200 contributors, open bug tracker, IRC support.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="00_overview" id="architecture_00_overview3" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="architecture/00_overview:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Architecture</h1>

<p><img src="./file/architecture/_images/foreman_architecture.png" style="float: center; margin-left: 100px; width: 772px; height: 466px;" alt="Foreman - Architecture"></p>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Only required Foreman, all other optional</li>
<li>Next slides provide deeper information on Smart proxies and Compute resources </li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="01_foreman" id="architecture_01_foreman1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="architecture/01_foreman:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman</h1>

<ul>
<li>Web Interface + API + CLI</li>
</ul>

<div style="float:right">
<img src="./file/architecture/_images/foreman_loginscreen.png" style="max-width: 320px; max-height: 200px; margin: 1px; margin-right: 100px" alt="Foreman Loginscreen">
</div>

<ul>
<li>Supported platforms:

<ul>
<li>Server: RHEL/CentOS, Debian/Ubuntu, (Linux)</li>
<li>DB: PostgreSQL</li>
<li>Provisioning: RHEL/Fedora, Debian/Ubuntu, Solaris, SuSE, CoreOS, FreeBSD, Juniper Junos, Cisco NX-OS, Windows, (MacOS)</li>
</ul>
</li>
<li>Usermanagement:

<ul>
<li>Users and Groups</li>
<li>Internal / LDAP / Kerberos (via Apache Authentication) / OpenID</li>
<li>Fine role based privileges</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Other Linux distributions are supported via source installation</li>
<li>Windows is now officially supported and documented</li>
<li>MacOS are not officially supported but reported by the community</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="02_smart_proxy" id="architecture_02_smart_proxy1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/02_smart_proxy:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Smart Proxy</h1>

<ul>
<li>Autonomous web-based component

<ul>
<li>Restful API to connect to various systems from Foreman</li>
<li>Decentralisation of some Foreman features (templates) for isolated networks</li>
</ul>
</li>
<li>Supported Platforms: RHEL/CentOS, Debian/Ubuntu, (Linux, Windows)</li>
<li>Supported Subsystems:

<ul>
<li>DHCP - ISC DHCP, MS DHCP Servers, Libvirt, ...</li>
<li>DNS - Bind, PowerDNS, Route53, MS DNS Server, Libvirt, ...</li>
<li>BMC - IPMI</li>
<li>Puppet &amp; Puppet CA / Salt / Chef / Ansible</li>
<li>Realm - FreeIPA, Active Directory</li>
<li>TFTP </li>
<li>and many more via plugins</li>
</ul>
</li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The smart proxy is an autonomous web-based component providing a restful API to connect to varios
systems from higher ochestration tools such as Foreman. </p>

<p>The Project provides packages for installation on RHEL/CentOS and Debian/Ubuntu. Installing from
source allows to support other Linux distributions and also Windows which is required for some 
implementations of subsystems.</p>

<p>There are different implementations of various subsystems included in the smart proxy by default
and it easily allows to add additional subsystems and implementations as plugins. For configuration
management the solutions differ to much to be covered by one subsystem. For joining a realm support
for FreeIPA (an Open Source aquivalent to Active Directory focused on Linux) is part of the Smart Proxy.
Active directory is implemented as an additional provider in a separate package.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Support for the realm subsystem to join an active directory is an additional provider</li>
<li>Additional subsystems are added by plugins</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="02_smart_proxy" id="architecture_02_smart_proxy2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/02_smart_proxy:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Smart Proxy - DHCP</h1>

<ul>
<li>Adds and removes host reservations</li>
<li>Requires subnets to be configured</li>
<li>Supports: ISC DHCP, MS DHCP, Libvirt</li>
<li>Additional providers: Infoblox, Dnsmasq, Bluecat, Device42</li>
<li>ISC DHCP:

<ul>
<li>uses OMAPI </li>
</ul>
</li>
<li>MS DHCP:

<ul>
<li>uses netsh on a windows server</li>
<li>needs administrative privileges</li>
</ul>
</li>
<li>Libvirt:

<ul>
<li>not for productive use</li>
<li>uses libvirt API to manage dnsmasq for libvirt</li>
</ul>
</li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The Smart Proxy DHCP is used to add and remove host reservations to preconfigured subnets and allows to
import them to foreman.</p>

<p>On Linux typically a ISC compatible implementation is used to manage DHCP which allows to send commands
via OMAPI. For Microsoft DHCP installation of the Smart Proxy on Windows Server system is required which
needs netsh command installed and the user running the service needs administrative privileges, but the
server does not need to be the DHCP server. For testing enviroments also an implementation for Libvirt
using libvirt API to manage the dnsmasq underneath is available, a productive use is not recommended.</p>

<p>Additional providers like Infoblox, Dnsmasq, Bluecat, and Device42 are available as plugins.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Libvirt is recommended for local test environments (desktop running kvm and libvirt)</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="02_smart_proxy" id="architecture_02_smart_proxy3" class="slide small smbullets" data-transition="none">
<div class="content small smbullets" ref="architecture/02_smart_proxy:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Smart Proxy - DNS</h1>

<ul>
<li>Adds and removes dns records of type A, AAAA and PTR</li>
<li>Requires zone to be configured as dynamic zones</li>
<li>Supports: Bind, MS DNS, Libvirt</li>
<li>Additional providers: Infoblox, Route53, PowerDNS, Dnsmasq</li>
<li>Bind:

<ul>
<li>uses nsupdate with preshared key or Kerberos principal</li>
</ul>
</li>
<li>MS DNS:

<ul>
<li>uses nsupdate with Kerberos principal</li>
<li>alternativly: uses dnscmd on a windows server</li>
</ul>
</li>
<li>Libvirt:

<ul>
<li>not for productive use</li>
<li>uses libvirt API to manage dnsmasq for libvirt</li>
</ul>
</li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The Smart Proxy DNS is used to add and remove dns records of type A and PTR. Foreman 1.12 introduced
full support for IPv6, but the support for CNAME in the Smart Proxy is not yet utilized in Foreman.
For doing such updates it requires the zone to be a dynamic zone.</p>

<p>Commonly used on Linux is Bind which takes updates via nsupdate with preshared keys or if used in FreeIPA
with Kerberos principal. The same mechanism could be used for sending updates to Microsofts DNS. Another
possibilty is to install the Smart Proxy on a Windows server and give it the privileges to run dnscmd.
Other implementations like Infoblox, PowerDNS, Dnsmasq and Route53 are also supported via plugins. 
Libvirt is again only supported as a testing environment.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Foreman does support IPv6 from 1.12 onwards</li>
<li>No support for additional records like CNAME (Support in Smart Proxy exists)</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="02_smart_proxy" id="architecture_02_smart_proxy4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/02_smart_proxy:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Smart Proxy - TFTP</h1>

<ul>
<li>Used to provide boot-images for PXE boot</li>
<li>Downloads the required files with wget</li>
<li>Creates and deletes PXE configuration based on MAC address</li>
<li>Automatically configured during installation</li>
<li>Supports multiple bootloaders in multiple configurations</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The Smart Proxy TFTP provides boot-images for PXE boot, these files are simply downloaded using wget the
first time needed. PXE configuration is created during provisioning based on MAC address.
The support for different bootloaders has grown over the years from classic PXELinux over iPXE to using Grub2
to work on systems with BIOS, UEFI and even UEFI with enabled SecureBoot.</p>

<div class="pagebreak">continued...</div>

<p>For this subsystem in the most cases no additional configuration is required because it is completly included
in the basic setup when activated via one parameter.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="02_smart_proxy" id="architecture_02_smart_proxy5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/02_smart_proxy:5">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Smart Proxy - Puppet / Puppet CA</h1>

<ul>
<li>
<p>Puppet:</p>

<ul>
<li>connects to Puppets API</li>
<li>allows to import puppet environments and classes</li>
<li>accepts facts and reports</li>
<li>uses Foreman as ENC</li>
</ul>
</li>
<li>
<p>Puppet CA:</p>

<ul>
<li>requires access to ssl directory, autosign configuration and puppet cert command</li>
<li>allows certificate management using the Web GUI</li>
<li>creates autosign entry for hosts during provisioning</li>
<li>alternative a tokenbased autosigning can be used</li>
</ul>
</li>
<li><p>Puppet integration requires also the Foreman plugin for full feature set</p></li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The Smart Proxy Puppet connects to the API of Puppet to query puppet environments and classes for import.</p>

<p>Also it automatically allows a Puppet master known to Foreman as Smart Proxy to upload facts and reports. In addition
the Puppet master can access Foreman as an External Node Classifier to build its catalog.</p>

<p>The Smart Proxy Puppet CA is independent from the one for Puppet. It requires access to Puppet's ssl directory, the 
autosign configuration and puppet cert command via sudo. The Web GUI utilizes the Smart Proxy for certificate management
and creates autosign entry for hosts during provisioning for accessing puppet without manual intervention.</p>

<p>An alternative implementation using tokenbased autosigning exists, trading off the capability to manually create autosign entries
for increased security and better debugging.</p>

<p>To get the full feature set also the Foreman plugin needs to be installed as Puppet support was moved from core to a plugin with 3.0.</p>

</div>
<div class="notes-section notes">

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="03_compute_resource" id="architecture_03_compute_resource" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="architecture/03_compute_resource">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Compute Resource</h1>

<ul>
<li>Plugin to create and manage virtual hosts

<ul>
<li>based on fog (ruby cloud service library)</li>
<li>or native SDK / API</li>
</ul>
</li>
<li>Depending on virtualization provider

<ul>
<li>Unattended / Image-based installation</li>
<li>Console access</li>
<li>Power management</li>
<li>Changing virtual machine configuration</li>
</ul>
</li>
<li>Compute Profiles - predefined template for virtual hardware</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Compute Resource refers to a virtualization or cloud service which is integrate into Foreman
as a plugin. Those plugins are based on the ruby cloud service library named fog and allows
to create and manage virtual hosts. Some are based on a native SDK or API where no fog implementation
exists or is well maintained.</p>

<p>Depending on the provider machines are installed from an image or unattended in the same fashion
like a bare metal host. It allows to access the console
and do power management operations like shutting down or resetting the system.
Some providers also allow to change the virtual hardware afterwards.</p>

<p>The table shows the providers. Those directly supported by the Foreman Project and its capabilities,
and additional providers in <em>italic</em> which are separate plugins and mostly community contributed.</p>

<table>
<thead>
<tr>
<th>Provider</th>
<th>Unattended installation</th>
<th>Image-based</th>
<th>Console</th>
<th>Power management</th>
<th>Update VM</th>
</tr>
</thead>
<tbody>
<tr>
<td>EC2</td>
<td>no</td>
<td>yes</td>
<td>read-only</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>Google Compute Engine</td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>Libvirt</td>
<td>yes</td>
<td>yes</td>
<td>VNC or SPICE</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>OpenStack Nova</td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>oVirt / RHEV</td>
<td>yes</td>
<td>yes</td>
<td>VNC or SPICE</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>Rackspace</td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>VMware</td>
<td>yes</td>
<td>yes</td>
<td>VNC or VMRC</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td><em>Azure</em></td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td><em>Kubevirt</em></td>
<td>no</td>
<td>yes</td>
<td>planned</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td><em>Proxmox</em></td>
<td>yes</td>
<td>yes</td>
<td>VNC</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td><em>Scaleway</em></td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
<td>no</td>
</tr>
</tbody>
</table>

<p>Compute Profiles allow to predefine the virtual hardware as a template to select for provisioning.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="architecture" data-title="04_katello" id="architecture_04_katello1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="architecture/04_katello:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Katello</h1>

<div style="text-align:right">
<img src="./file/architecture/_images/katello-logo.png" style="float: right; max-width:200px; max-height: 150px; width: auto; height: auto; margin: 20px" alt="Katello Logo">
</div>

<ul>
<li>Defined set of Foreman plugins to provide Content management:

<ul>
<li>YUM repositories (RPM + Errata)</li>
<li>Debian repositories</li>
<li>Docker container</li>
<li>Ansible collections</li>
<li>...</li>
</ul>
</li>
<li>Subscription Management

<ul>
<li>Red Hat Subscriptions</li>
<li>Track internal use</li>
</ul>
</li>
<li>Defined scenario for Foreman Installer</li>
<li>Upstream project for

<ul>
<li>Red Hat Network Satellite 6</li>
<li>orcharhino</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="00_overview" id="installation_00_overview" class="slide subsection" data-transition="none">
<div class="content subsection" ref="installation/00_overview">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>3 Installation</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="01_requirements" id="installation_01_requirements1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/01_requirements:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Requirements - Operating System</h1>

<ul>
<li>Red Hat Enterprise Linux 8

<ul>
<li>No EPEL repository</li>
<li>Module Streams</li>
</ul>
</li>
<li>CentOS Stream, AlmaLinux, Rocky Linux, Oracle Linux 8

<ul>
<li>No EPEL repository</li>
<li>Module Streams</li>
</ul>
</li>
<li>Debian 11 (Bullseye)</li>
<li>Ubuntu 20.04 (Focal)</li>
<li>All need the Puppetlabs Repository</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>On the mentioned operating systems packages are provided by the project, a installation from source
is not recommended. On all platforms all updates should be applied before installation. Using the
Puppetlabs Repository providing an up-to-date version of Puppet is required which of the supported
versions to use is based on user requirements.</p>

<p>Some plugins especially Katello will limit the available plattform.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="01_requirements" id="installation_01_requirements2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/01_requirements:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Requirements - Puppet &amp; Facter</h1>

<ul>
<li>Only All-in-one packaging model from Puppet is supported for Puppet 7 and 8

<ul>
<li>Puppet 6 is technically still supported, but EOL</li>
<li>Older Puppet versions are not supported</li>
<li>Puppet Enterprise is not supported</li>
</ul>
</li>
<li>Puppetserver gets telemetry disabled by default</li>
<li>Structured Facts are used by default</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Puppet 7 and 8 is supported with current versions for All-in-one packaging standard by Puppet.
Support for Puppet 6 was not dropped yet, but this version has reached end of life, older versions are no longer supported.
Puppet Enterprise is not supported, but can work with manual tweaking of the setup.</p>

<div class="pagebreak">continued...</div>

<p>Puppetserver gets installed as central component and since the Foreman project wants to respect user’s privacy,
it disables the telemetry introduced by Puppetserver by default. You can opt-in if you want.</p>

<p>Structured facts are used by default, so no need for legacy facts anymore.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="01_requirements" id="installation_01_requirements3" class="slide small" data-transition="none">
<div class="content small" ref="installation/01_requirements:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Requirements - Communication</h1>

<p>Port matrix (depending on installation)</p>

<table>
<thead>
<tr>
<th>Port</th>
<th>Protocol</th>
<th>Required For</th>
</tr>
</thead>
<tbody>
<tr>
<td>53</td>
<td>TCP &amp; UDP</td>
<td>DNS Server</td>
</tr>
<tr>
<td>67, 68</td>
<td>UDP</td>
<td>DHCP Server</td>
</tr>
<tr>
<td>69</td>
<td>UDP</td>
<td>TFTP Server</td>
</tr>
<tr>
<td>80, 443</td>
<td>TCP</td>
<td>HTTP &amp; HTTPS access to Foreman web UI - using Apache + Passenger</td>
</tr>
<tr>
<td>3000</td>
<td>TCP</td>
<td>HTTP access to Foreman web UI - using standalone WEBrick service</td>
</tr>
<tr>
<td>5910 - 5930</td>
<td>TCP</td>
<td>Server VNC Consoles</td>
</tr>
<tr>
<td>5432</td>
<td>TCP</td>
<td>Separate PostgreSQL database</td>
</tr>
<tr>
<td>8140</td>
<td>TCP</td>
<td>Puppet Master</td>
</tr>
<tr>
<td>8443</td>
<td>TCP</td>
<td>Smart Proxy, open only to Foreman</td>
</tr>
</tbody>
</table>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Depending on your installation the ports above or some additional ones are required to be accessable on the Foreman server,
by Foreman or the managed systems.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="02_installer" id="installation_02_installer" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/02_installer">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman Installer</h1>

<ul>
<li>Based on a separate project named kafo (ruby gem)</li>
<li>Recommended way of installation</li>
<li>Utilizes Puppet modules to install and configure

<ul>
<li>Foreman web UI</li>
<li>Apache HTTP</li>
<li>Smart Proxy</li>
<li>Puppet Server</li>
<li>Services like TFTP, DNS, DHCP</li>
</ul>
</li>
<li>Runs parameterized or interactively

<ul>
<li>command line flags</li>
<li>answers file</li>
<li>scenarios</li>
<li>custom hiera (for advanced use cases)</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The Foreman installer is based on a separate project named kafo (Katello/Foreman Installer) which could also
be used by other projects. It utilizes existing Puppet modules to install and configure all required
components. Module parameters are provided as commandline arguments to the installer,
as an answers file formatted in yaml (can be autosaved) or by running the installer
in interactive mode. The installer supports also predefined scenarios which is only used by Katello for now.
For advanced use cases it will also take some custom hiera.</p>

<p>In a default installation of the Foreman scenario this would be:</p>

<ul>
<li>Apache HTTP with SSL (using a certificate signed by Puppet CA, proxying to Foreman)</li>
<li>Foreman running via Puma (ruby webserver)</li>
<li>Smart Proxy using SSL configured for enabled features</li>
<li>Puppet server</li>
</ul>

<p>Depending on provided parameters other modules are enabled:</p>

<ul>
<li>TFTP server (on RHEL and derivates using socket-based activation)</li>
<li>ISC DHCP server</li>
<li>Bind DNS server</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/03_scenarios:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Scenarios</h1>

<ul>
<li>Foreman

<ul>
<li>All-in-one</li>
<li>All-in-one with additional Puppet servers</li>
<li>Separate Puppet servers</li>
<li>Smart proxies</li>
<li>Integration of PuppetDB</li>
<li>For Ansible without Puppet</li>
</ul>
</li>
<li>Katello</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The Foreman installer allows to setup different scenarios depending on its parameters or answers in interactive mode.
All the scenarios above are explained in the course material, commands required can be found in the Foreman manual on
the project homepage. For the training we will the Katello scenario and add additional Smart proxies for Provisioning.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios2" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman: All-in-one</h1>

<ul>
<li>Default setup on unparameterized run only for Configuration Management</li>
<li>Add at least Smart Proxy TFTP for Provisioning</li>
</ul>

<div style="text-align:center"><img src="./file/installation/_images/installation_all-in-one.png" style="float: center; margin-left: 50px; height: 377px;" alt="Installation All-in-one"></div>

<ul>
<li>Expandable with additional plugins and Smart proxies</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Plugins can be added simply as parameter during installation or later on</li>
<li>Smart proxies are covered later because it is the same procedure for installation on Foreman host or others</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios3" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman: All-in-one with additional Puppet servers</h1>

<ul>
<li>Default setup on Foreman host</li>
<li>Precreate certificates on Puppet CA</li>
<li>Run installer with parameters to disable Foreman on additional Puppet servers</li>
</ul>

<div style="text-align:center"><img src="./file/installation/_images/installation_additional-servers.png" style="float: center; margin-left: 50px; height: 395px;" alt="Installation Additional Puppet servers"></div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Preferred scenario for growing the Infrastructure and making Puppet server high available.</li>
<li>But all Puppet server depend on Foreman so place it on a high available machine.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios4" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman: Separate Puppet servers</h1>

<ul>
<li>Setup on Foreman host with Puppet server and Smart Proxies disabled</li>
<li>Run installer with parameters to disable Foreman on separate Puppet servers</li>
</ul>

<div style="text-align:center"><img src="./file/installation/_images/installation_separate-servers.png" style="float: center; margin-left: 50px; height: 446px;" alt="Installation Separate Puppet servers"></div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Same as the scenario before but removes load created by Puppet server from the Foreman server</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios5" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:5">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman: Smart Proxies</h1>

<ul>
<li>Foreman installer helps to setup Smart Proxies</li>
</ul>

<div style="text-align:center"><img src="./file/installation/_images/installation_smart-proxies.png" style="float: center; margin-left: 50px; height: 301px;" alt="Installation Smart proxies"></div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Smart Proxies can also be added to the All-in-one Foreman host - we will do so in the Training</li>
<li>Requires certificate for communication and OAuth provided in the settings of Foreman.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios6" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:6">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman: Integration of PuppetDB</h1>

<ul>
<li>Foreman installer helps to integrate PuppetDB</li>
</ul>

<div style="text-align:center"><img src="./file/installation/_images/installation_puppetdb.png" style="float: center; margin-left: 50px; height: 302px;" alt="Installation PuppetDB"></div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Integration of existing PuppetDB, no installation!</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios7" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:7">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman: For Ansible without Puppet</h1>

<ul>
<li>Installing without Puppet is possible, but requires your own certificates</li>
<li>Ansible uses Remote Execution stack</li>
</ul>

<div style="text-align:center"><img src="./file/installation/_images/installation_ansible.png" style="float: center; margin-left: 50px; height: 340px;" alt="Installation Ansible"></div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Certificates can be self-signed</li>
<li>The Smart-Proxy can be part of the Foreman server</li>
<li>We talk later about Remote Execution in more detail</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="03_scenarios" id="installation_03_scenarios8" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="installation/03_scenarios:8">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Katello</h1>

<ul>
<li>Katello adds additional complexity, so the amount of details are reduced to the main components

<ul>
<li>Pulp is integrated for Content Management</li>
<li>Candlepin is used for Subscription Management</li>
</ul>
</li>
</ul>

<div style="text-align:center"><img src="./file/installation/_images/installation_katello.png" style="float: center; margin-left: 50px; height: 340px;" alt="Installation Katello"></div>

<ul>
<li>Requires a different scenario parameter for the installer!</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>We will not add more details or scenarios, but if someone asks additional Smart-Proxies are possible including for Content distribution</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="04_installation" id="installation_04_installation1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/04_installation:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 3.1: Prepare Installation</h1>

<ul>
<li>Objective:

<ul>
<li>Prepare the installation of Foreman</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Start the virtual machine "foreman.localdomain" and connect via SSH</li>
<li>Make Puppet vendor repository for Puppet available</li>
<li>Make Powertools repository available</li>
<li>Make Foreman and Katello repository available</li>
<li>Enable the modules for katello and pulpcore</li>
<li>Install foreman-installer-katello</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="04_installation" id="installation_04_installation2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/04_installation:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 3.2: Install Katello</h1>

<ul>
<li>Objective:

<ul>
<li>Install Katello with TFTP, DNS and DHCP</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Run foreman-installer with additional parameters</li>
</ul>
</li>
<li>Notes:

<ul>
<li>TFTP (default configuration)</li>
<li>DNS (interface=enp1s0, zone=localdomain, reverse=0.10.in-addr.arpa, forwarders=8.8.8.8,8.8.4.4)</li>
<li>DHCP (interface=enp1s0, gateway=10.0.0.1, range=10.0.0.100-10.0.0.200, nameserver=10.0.0.2)</li>
<li>Tuning "development" is needed because of sizing of the VM</li>
<li>Optionally provide initial credentials, organization and location name</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Show the students the interactive mode in advance - we will not use it to prevent typos</li>
<li>Explain array handling (same parameter multiple times) and dhcp range (whitespace-separated string like in the config)</li>
<li>Show the students the answer file - it provides information for further runs of the installer</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="04_installation" id="installation_04_installation3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/04_installation:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 3.3: Add DNS configuration to Foreman</h1>

<ul>
<li>Objective:

<ul>
<li>Verify the domain 'localdomain' was created and associate Smart proxy</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Login to Foreman</li>
<li>Navigate to 'Infrastructure &gt; Domains'</li>
<li>Verify the domain 'localdomain' was created and associate Smart Proxy 'foreman.localdomain'</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>The Foreman server itself will automatically be registered and all required objects will be created</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="installation" data-title="04_installation" id="installation_04_installation4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="installation/04_installation:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 3.4: Add DHCP configuration to Foreman</h1>

<ul>
<li>Objective:

<ul>
<li>Create the subnet 'foreman' and associate Smart proxies</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Navigate to 'Infrastructure &gt; Smart proxies'</li>
<li>Add the subnet 'foreman' by importing from the Smart Proxy </li>
<li>Adjust additional settings via 'Infrastructure &gt; Subnets'</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Subnets are not automatically created like domains. Importing from a Smart Proxy is easier than manual creation.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics1" class="slide subsection" data-transition="none">
<div class="content subsection" ref="provisioning/01_basics:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>4 Provisioning</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/01_basics:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Provisioning</h1>

<ul>
<li>
<p>Definition:</p>

<ul>
<li>
<em>Server provisioning is a set of actions to prepare a server with appropriate systems, data and software,
and make it ready for network operation.</em> </li>
</ul>
</li>
<li>
<p>Task:</p>

<ul>
<li>Automate it!</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Wikipedia defines server provisioning as <em>a set of actions to prepare a server with appropriate systems, data and software,
and make it ready for network operation</em> and your task will be to automated it.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/01_basics:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Basics on automated installation</h1>

<ul>
<li>Installer asks questions during installation</li>
<li>Answer file could be provided in several ways

<ul>
<li>Basic configuration like timezone and language settings</li>
<li>Partition layout</li>
<li>Software installation</li>
<li>Registration to management tools</li>
</ul>
</li>
<li>Additional scripts during and after installation</li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>For an automated installation it is required that the installer of the operating system allows to answer the questions
normally asked to the users by providing an answer file. </p>

<div class="pagebreak">continued...</div>

<p>The different Linux installers can handle answer files provided via network protocols like http and ftp, network file
systems or placed on the installation media. In this way basic configuration like timezone, language or network settings 
can be handled, furthermore partition layout can be created, software is installed and depending on the solution also 
registration to management tools is directly integrated. </p>

<p>If the installer could not solve requirements directly, scripts could be provided to be executed during and after installation.</p>

<p>The mechanism differs for the distributions.</p>

<table>
<thead>
<tr>
<th>Operating system family</th>
<th>Installer</th>
<th>Answer files</th>
</tr>
</thead>
<tbody>
<tr>
<td>Red Hat</td>
<td>Anaconda</td>
<td>Kickstart</td>
</tr>
<tr>
<td>Debian</td>
<td>Debian-Installer</td>
<td>Preseed</td>
</tr>
<tr>
<td>Ubuntu (since 20.04.3)</td>
<td>Autoinstall</td>
<td>Cloud-init</td>
</tr>
<tr>
<td>SuSE</td>
<td>YaST2</td>
<td>AutoYaST2</td>
</tr>
</tbody>
</table>

<p>Other operating systems have similar mechanisms but not all the capabilities. Microsoft Windows for example requires
answer file to be placed on the installation media or a "physical" disk mounted during installation like floppy or usb.</p>

<p>Regardless of the capabilities with configuration management in place do a simple installation and let the configuration
management solution do its work.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Simple installation than use configuration management</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/01_basics:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Kickstart</h1>

<ul>
<li>Simple textfile with different sections

<ul>
<li>Main section with commands for basic configuration and partitioning</li>
<li>Package section for software installation</li>
<li>Pre and post scripts during installation</li>
<li>Additional sections can be added by addons</li>
</ul>
</li>
<li>Added as kernel parameter to boot media</li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Kickstart is the answer file to the installer used by Red Hat Enterprise Linux, CentOS, other derivates and Fedora.</p>

<p>It is basicly a simple text file providing commands for basic configuration and partitioning in its main section
and a list of packages and package groups to install in addition to the core system in a package section. Skripts
can be added in separate sections to run as pre-installation task or post-installation on the installer or using
chroot on the installed system.</p>

<div class="pagebreak">continued...</div>

<p>Lastest versions allow to extend the installer with addons which can also provide its own kickstart section for
automation. One example is the OSCAP Anaconda Addon which allows to validate against a security profile already
during installation.</p>

<p>The URL to the kickstart file can be provided during installation or for automation added as a kernel parameter
to the boot media. Necessary answers missing will be queried.</p>

<p>Additional information: <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_an_advanced_rhel_installation/performing_an_automated_installation_using_kickstart" target="_blank">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/performing_an_advanced_rhel_installation/performing_an_automated_installation_using_kickstart</a></p>

</div>
<div class="notes-section notes">

<ul>
<li>If someone asks show them the file in Foreman, but we will have a look into in the exercise, too</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/01_basics:5">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Preseed</h1>

<ul>
<li>Simple textfile with answers

<ul>
<li>Basic configuration and partitioning</li>
<li>Software installation</li>
<li>Scripts after installation</li>
</ul>
</li>
<li>Added as kernel parameter to boot media</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Preseed is the answer file for the Debian Installer used by Debian and Ubuntu until version 20.04.3.
It is basicly a simple text file providing answers to the installation questions. It uses for all types of 
configuration the same syntax. Scripts can be downloaded to the system and be executed after the installation.</p>

<p>The URL to the preseed file can be added to the boot menu entry or as a kernel parameter to the boot media for
automation, an additional parameter tells the installer to run unattended or use the answers only as default.</p>

<p>Additional information: <a href="https://wiki.debian.org/DebianInstaller/Preseed" target="_blank">https://wiki.debian.org/DebianInstaller/Preseed</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics6" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/01_basics:6">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Autoinstall</h1>

<ul>
<li>Autoinstall runs from a LiveCD</li>
<li>Cloud-init with answers

<ul>
<li>YAML formatted standard</li>
<li>Schema for Autoinstall</li>
<li>Generator tool exists</li>
<li>Generator can translate preseed data</li>
</ul>
</li>
<li>Both added as kernel parameter to boot media</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Ubuntu introduced a new method for automated installation with 20.04.3 and 22.04.1 called Autoinstall.
This runs from a LiveCD loaded by the kernel which will then query an URL for Cloud-init as answer file.
Cloud-init is a YAML formatted standard which supports different schemas including one for autoinstall.
This file can be generated via a generator tool also capable of translating preseed data.</p>

<div class="pagebreak">continued...</div>

<p>By default it will fallback to default values if an answer is not provided, but sections can also be defined
as interactive. It will also ask for confirmation to avoid accidential reformatting if not an additional
kernel parameter <code>autoinstall</code> is given.</p>

<p>Additional information: <a href="https://ubuntu.com/server/docs/install/autoinstall" target="_blank">https://ubuntu.com/server/docs/install/autoinstall</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="01_basics" id="provisioning_01_basics7" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/01_basics:7">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>AutoYaST2</h1>

<ul>
<li>Structured XML file

<ul>
<li>Basic configuration and partitioning</li>
<li>Software installation</li>
<li>Scripts during and after installation on different times</li>
<li>Configuration of selected software and devices</li>
</ul>
</li>
<li>Added as kernel parameter to boot media</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>AutoYaST2 is the answer file for SuSE Linux Enterprise Server, Desktop and openSuSE using YaST2 as installer.</p>

<div class="pagebreak">continued...</div>

<p>It is a structured XML file meant to be created by YaST and not by hand which provides answers to the installer
quests. Different data structures are used for all kinds of configuration. It can run scripts before installation
starts, after partitioning, after package installation using chroot, post installation on first boot before 
and after starting services. In addition it can configure selected software and devices like printing service
or soundcards. Other services can be configured with an file based configuration management.</p>

<p>The URL to the autoyast file has to be added as a kernel parameter to the boot media. Furthermore it allows
to create a control server providing rules to automatically select autoyast files.</p>

<p>Additional information: <a href="http://doc.opensuse.org/projects/autoyast/" target="_blank">http://doc.opensuse.org/projects/autoyast/</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="02_configuration" id="provisioning_02_configuration1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/02_configuration:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Configuration in Foreman</h1>

<ul>
<li>Operating System Version must be associated to:

<ul>
<li>Architecture</li>
<li>Installation media</li>
<li>Partition tables</li>
<li>Provisioning templates</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>In Foreman the provisioning is centred on the operating system which has to be associated to
the hardware architectures like i386 or x86_64, the installation media being the URL where
to find the boot media and software packages, partition tables and provisioning templates.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="02_configuration" id="provisioning_02_configuration2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/02_configuration:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Provisioning templates</h1>

<ul>
<li>ERB-Templates allow scripting and inclusion of snippets</li>
<li>Types:

<ul>
<li>PXELinux / PXEGrub / PXEGrub2 / iPXE</li>
<li>Provision</li>
<li>Finish</li>
<li>user_data / cloud_init</li>
<li>Script</li>
</ul>
</li>
<li>Selected on best match:

<ul>
<li>Host group and Environment</li>
<li>Host group</li>
<li>Environment</li>
<li>Operating system</li>
</ul>
</li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The templates are using ERB (embedded ruby) which allows to use parameters in the files, basic scripting
like conditionals and inclusion of snippets. Snippets can be everything from scripts to configuration files
you want to maintain independently because it is the same configuration for inclusion in different other
files or it will bloat up one file to render it unmaintainable.</p>

<p>Depending on different provisioning mechanisms and methods other kinds of templates are required.</p>

<ul>
<li>PXELinux - Deployed to the TFTP server to ensure the Host boots the correct installer with the correct kernel options for BIOS boot</li>
<li>PXEGrub / PXEGrub2 - Used in PXE environments in place of PXELinux for EFI boot</li>
<li>iPXE - Used in {g,i}PXE environments in place of PXELinux</li>
<li>Provision - The main unattended installation file, e.g. Kickstart or Preseed</li>
<li>Finish - A post-install script used to make custom actions after the main provisioning is complete</li>
<li>user_data - Similar to a Finish script, this can be assigned to hosts built on user_data-capable images (e.g. Openstack, EC2, etc)</li>
<li>cloud_init - Uses the same format like user_data, but instead of sending it to the Compute Resource (e.g. VMware), it is queried by the system itself</li>
<li>Script - An arbitrary script, not used by default, useful for certain custom tasks</li>
</ul>

<div class="pagebreak">continued...</div>

<p>Templates can be associated to operating systems, host groups, environments or combinations of host group and environment.
It will then select the templates to use on best match.
Partition tables are handled separately to allow the usage of the same host template with different disk layouts. Depending on the Installer's capabilities Foreman allows also dynamic partitioning.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Partition templates are similar but assign per host</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="02_configuration" id="provisioning_02_configuration3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/02_configuration:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.1: Prepare PXE installation of CentOS Stream 8</h1>

<ul>
<li>Objective:

<ul>
<li>Prepare the installation of CentOS using PXE</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Change the Installation media "CentOS Stream" to the local repo (if provided)</li>
<li>Associate the installation media "CentOS Stream", verify the selected templates and set boolean parameter "enable-official-puppet7-repo" to "true"</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="02_configuration" id="provisioning_02_configuration4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/02_configuration:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.2: Prepare PXE installation of Debian</h1>

<ul>
<li>Objective:

<ul>
<li>Prepare the installation of Debian using PXE</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Change the Installation media "Debian mirror" to the local repo (if provided)</li>
<li>Create the Operating system "Debian" with Major version "11", Description "Debian bullseye", Family "Debian", Release name "bullseye"</li>
<li>Associate the PXELinux template "Preseed default PXELinux" with Debian</li>
<li>Associate the Provision template "Preseed default" with Debian</li>
<li>Associate the finish template "Preseed default finish" with Debian</li>
<li>Associate the operating system with the Templates and set Architecture "x86_64", Partition table "Preseed default LVM" and "Preseed default", Installation media "Debian mirror" and set boolean parameter "enable-official-puppet7-repo" to "true"</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Tell the students to skip Debian if only providing a local CentOS-Mirror.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="02_configuration" id="provisioning_02_configuration5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/02_configuration:5">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.3: Prepare PXE installation of Ubuntu</h1>

<ul>
<li>Objective:

<ul>
<li>Prepare the installation of Ubuntu using PXE</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Provide the LiveCD as ISO and in extraced form</li>
<li>Create the Installation media "Ubuntu Autoinstall"</li>
<li>Create the Operating system "Ubuntu" with Major version "22.04", Minor version "2", Description "Ubuntu Jammy Jellyfish", Family "Debian", Release name "jammy"</li>
<li>Associate the PXELinux template "Preseed default PXELinux Autoinstall" with Ubuntu</li>
<li>Associate the User data template "Preseed Autoinstall cloud-init user data" with Ubuntu</li>
<li>Associate the finish template "Preseed default finish" with Ubuntu</li>
<li>Associate the operating system with the Templates and set Architecture "x86_64", Partition table "Preseed default autoinstall", Installation media "Ubuntu Autoinstall" and set boolean parameter "enable-official-puppet7-repo" to "true"</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Tell the students to skip Ubuntu if only providing a local CentOS-Mirror.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="03_pxe" id="provisioning_03_pxe1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="provisioning/03_pxe:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Provisioning using PXE</h1>

<ul>
<li>Identifier is the mac address</li>
</ul>

<div style="text-align:center"><img src="./file/provisioning/_images/pxe.png" style="float: center; margin-left: 125px; width: 760px; height: 340px;" alt="Provisioning PXE"></div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Additional communication to Foreman, Puppet and other systems depending on the PXE configuration/answer file</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="03_pxe" id="provisioning_03_pxe2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/03_pxe:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.4: Create a virtual machine "pxe"</h1>

<ul>
<li>Objective:

<ul>
<li>Create a virtual machine "pxe" for PXE installation</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Open "Virtual Machine Manager" application</li>
<li>Select "New virtual machine" from the menu or by pressing the button</li>
<li>Select "Manual install"</li>
<li>Type and then select the name of one of prepared operating systems according to your preferences</li>
<li>Adjust the minimum requirements for RAM, CPU and Disk</li>
<li>Name your VM "pxe" and select the network "foreman"</li>
<li>Create the VM and immediately pause it so in the next lab the required configuration in Foreman can be created</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>If a student did not pause the system, he has to add the NIC as Boot media and change the boot order, shutdown the machine
and start it up again later</li>
<li>CentOS will require 1.5 GB at least</li>
<li>If the environment is not avialable, assign it to "Default Organization" and "Default Location".</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="03_pxe" id="provisioning_03_pxe3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/03_pxe:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.5: Configure the system "pxe" in Foreman</h1>

<ul>
<li>Objective:

<ul>
<li>Configure the system "pxe" in Foreman and start the installation</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Open Foreman's host dialog using "Hosts &gt; Create Host"</li>
<li>On the Host tab name it "pxe"</li>
<li>On the Operating system tab select the Architecture, Operating System, Media, Partition table and set a Root password.</li>
<li>On the Interface tab click edit to configure the interface with the MAC address, select Domain and Subnet and keep the suggested IP address.</li>
<li>Unpause the VM</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>In the Interface tab it is possible to add multiple interfaces and also virtual interfaces like VLAN tagged interfaces or aliases.
Only one can be assigned as the primary interface mapped to the DNS record and only one as provisioning interface for PXE configuration
or connecting for executing scripts during installation. This can be the same interface but does not have to be in cases you have a
dedicated installation network.</p>

<p>Instead of setting the root password for every host created, a default can be set by providing a password hash on "Administer &gt; Settings"
in the Provisioning tab as Root password. This is an MD5 hash for being supported by every Linux distribution.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="03_pxe" id="provisioning_03_pxe4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/03_pxe:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Hostgroups</h1>

<ul>
<li>Grouping Hosts

<ul>
<li>Nested groups in a hierarchical way</li>
</ul>
</li>
<li>Adds defaults to hosts

<ul>
<li>Required options for provisioning</li>
<li>Options for configuration management</li>
<li>Options for compute resources</li>
<li>Parameters</li>
</ul>
</li>
<li>Allows to associate templates</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<p>Hostgroups are used to group hosts, the groups can be organized in a hierarchical way by nesting them.</p>

<p>The Hostgroups allows to add defaults for all options required by Foreman for provisioning and depending on your environment also
for configuration management and compute resources. Additional parameters can be set.</p>

<p>Furthermore to providing defaults configured at the hostgroup "Provisioning templates" can be associated to change from the operating
system default.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="provisioning/04_compute_resource:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Provisioning using Compute resource libvirt</h1>

<ul>
<li>Identifier is the name of the system</li>
</ul>

<div style="text-align: center"><img src="./file/provisioning/_images/compute_resource.png" style="float: center; margin-left: 110px; width: 795px; height: 445px;" alt="Provisioning Compute resource libvirt"></div>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/04_compute_resource:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.6: Prepare Compute resource libvirt</h1>

<ul>
<li>Objective:

<ul>
<li>Prepare Compute resource libvirt to install a virtual machine</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Compute resource using the Foreman installer</li>
<li>Create a passphraseless ssh-key for user foreman</li>
<li>Copy the public key to the root account of the host "host.localdomain"</li>
<li>Configure the Compute resource in Foreman Web GUI</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The Compute resource does not only provide the possibility to provision virtual machines, it also allows access to power management of
unmanaged systems and to deleted them from the virtualization platform. Also associating an unmanaged system to an already existing one
is possible.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/04_compute_resource:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.7: Create the virtual machine "compute" from Foreman</h1>

<ul>
<li>Objective:

<ul>
<li>Create the virtual machine "compute" from Foreman Web GUI and start an unattended installation</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Open Foreman's host dialog using "Hosts &gt; Create Host"</li>
<li>On the Host tab name it "compute" and select to deploy on the Compute resource</li>
<li>On the Virtual Machine tab change the Storage type to "QCOW2"</li>
<li>On the Operating system tab select the Architecture, Operating System, Media, Partition table and set a Root password.</li>
<li>On the Interface tab click edit to configure the interface, select Domain and Subnet and keep 
the suggested IP address, for the Libvirt options choose the virtual network "foreman".</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Compute resource options depend on the used Compute resource so other options will be available for VMware than for libvirt.</p>

<p>Defaults for the Compute resource options can be set using a Compute profile.</p>

<p>Storage type "QCOW2" enables you to use snapshots unlike "RAW".</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/04_compute_resource:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Compute profiles</h1>

<ul>
<li>Used to provide defaults for virtual machine creation</li>
<li>Default provides three for different sized VMs</li>
<li>Same profile names could be used for different Compute resources

<ul>
<li>Different defaults for same type of systems based on virtualization platform</li>
<li>Only available to Compute resource if configured</li>
</ul>
</li>
<li>Available in "New Host" dialog</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Compute profiles are used to provide defaults for the virtual machine creation. Per default three profiles
are available and only have to be configured, but you can create as many as needed. The same profile can differ
based on the Compute resource used to provide defaults matching the virtualization platform.</p>

<div class="pagebreak">continued...</div>

<p>If one is configured for a Compute resource option to choose from it is available on new host dialog after choosing
the Compute resource to deploy on.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/04_compute_resource:5">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Images</h1>

<ul>
<li>Available to install from instead of unattended installation</li>
<li>Image has to be configured

<ul>
<li>On Compute resource using "New image"</li>
<li>Has to provide access via ssh to run finish scripts</li>
<li>API can allow to run user_data scripts for additional changes</li>
<li>cloud_init can be installed to use the scripts of the same name</li>
</ul>
</li>
<li>Available in "Create host" dialog

<ul>
<li>Speeds up installation</li>
<li>Should be very basic image, but of course can be very featureful if required</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Images are available as install source to all Compute resources, for some as the only source. To be available to Foreman
it has also to be configured using the "New image" dialog after selecting a Compute resource. The image has to be created
with an user which has shell access to run finish scripts and depending on the Compute resource also user_data scripts can run
during virtual machine creation to change settings. Another option are cloud_init scripts if you installed cloud_init at the system
and pointed it to Foreman.</p>

<p>If a image is configured it is possible to choose it from the "Create host" dialog on the "Operating system" tab. In some cases
it can speed up the installation process, but of course an unattended installation will give you a cleaner and more up to date
system. If using a configuration management a very basic image should be prefered, but if required a image can be very featureful
like having some proprietary software installed which is quite complicated to install with configuration management.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="04_compute_resource" id="provisioning_04_compute_resource6" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/04_compute_resource:6">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Console</h1>

<ul>
<li>Direct console access on virtual machines</li>
<li>Javascript library noVNC</li>
<li>Protocols: 

<ul>
<li>VNC</li>
<li>SPICE</li>
<li>VMRC (for VMware)</li>
</ul>
</li>
<li>Depending on Compute Resource provider</li>
<li>Encryption and Authentication based on environment</li>
<li>An alternative is the webconsole (part of Remote Execution)</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman uses the javascript library noVNC to give the user direct access to the console
of a virtual machine depending on the Compute Resource provider. 
The Foreman manual explains additional steps required on the Compute Resource if not available by default.
The protocols available are VNC and SPICE, encryption and authentication depends on
your setup.</p>

<p>If you want to try it in the training environment you have to enable the connection by
executing the following command on the laptop.</p>

<pre><code># iptables -I INPUT -p tcp -m multiport --dports 5901:6000 -i virbr1 -j ACCEPT
</code></pre>

<p><br></p>

<p>Furthermore Firefox will block the websocket connection unless you change setting 
network.websocket.allowInsecureFromHTTPS to true in about:config.</p>

<p>Another option is VMRC which is available for the Compute Resource VMware and provides a link to use
with the client for a direct access instead of the embedded option via noVNC.</p>

<p>Furthermore there is the option to use the Cockpit-based webconsole as part of the Remote Execution plugin.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="provisioning/05_discovery:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Provisioning using Discovery plugin</h1>

<ul>
<li>Identifies itself as discovered host with its mac address by default</li>
</ul>

<div style="text-align: center"><img src="./file/provisioning/_images/discovery.png" style="float: center; margin-left: 125px; width: 767px; height: 437px;" alt="Provisioning Discovery"></div>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/05_discovery:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.8: Install and configure the Discovery plugin</h1>

<ul>
<li>Objective:

<ul>
<li>Install and configure the Discovery plugin</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Run the Foreman installer to install the Discovery plugin for Foreman and the Smart Proxy and download the image</li>
<li>Adjust and deploy the PXE default configuration</li>
<li>Enable the discovery widget in the dashboard</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/05_discovery:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.9: Create a virtual machine "discovery"</h1>

<ul>
<li>Objective:

<ul>
<li>Create a virtual machine "discovery" for PXE installation</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Open "Virtual Machine Manager" application</li>
<li>Select "New virtual machine" from the menu or by pressing the button</li>
<li>Select "Manual install"</li>
<li>Type and then select the name of one of prepared operating systems according to your preferences</li>
<li>Adjust the minimum requirements for RAM, CPU and Disk</li>
<li>Name your virtual machine "discovery" and select the network "foreman"</li>
<li>Select "Adjust Virtual Machine settings" and add the nic and disk as boot options</li>
<li>Create the virtual machine and when the PXE menu appears select "Foreman Discovery Image"</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/05_discovery:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.10: Configure the system "discovery" in Foreman</h1>

<ul>
<li>Objective:

<ul>
<li>Configure the system "discovery" in Foreman and start installation</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Select the newly discovered host from the widget</li>
<li>On the Discovered host view select the action "Provision" and then "Customize Host"</li>
<li>On the Host tab name it "discovery"</li>
<li>On the Operating system tab select the Architecture, Operating System, Media, Partition table and set a Root password</li>
<li>On the Interface tab click edit to configure the interface add the Domain "localdomain"</li>
<li>Submit to start the installation</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/05_discovery:5">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Discovery rules</h1>

<ul>
<li>Automatic rule based installation

<ul>
<li>Located in "Configure &gt; Discovery rules"</li>
<li>Match on facts provided by the discovery image</li>
<li>Naming based on template</li>
<li>Installation and configuration based on hostgroup</li>
<li>Provides a limit and a priority for ordering </li>
</ul>
</li>
<li>Not enabled by default

<ul>
<li>Requires "Discovered" setting "Auto provisioning" changed to "true"</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Discovery rules allow an automatic rule based installation. Depending on facts provided by the discovery image a rule is selected
and the system is installed based on the configuration of the selected hostgroup. Naming is done based on a template using ERB which
allows to use facts or random numbers, by default the macaddress is used. Setting a limit and a priority allows some ordering like
deploy first two backend systems of this size and then two frontend systems.</p>

<p>Usage of the rule based installation is not enabled by default but simply switched on by changing the "Discovered" setting "Auto provisioning" to "true".</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="05_discovery" id="provisioning_05_discovery6" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/05_discovery:6">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Discovery image</h1>

<ul>
<li>Provided by the project

<ul>
<li>Allows to add custom facts</li>
<li>Allows to add custom extensions like drivers</li>
<li>Could be remastered to provide defaults</li>
<li>Can use kexec to directly boot a new kernel</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The discovery image is provided by the project also with corresponding tools and documentation on extending and remastering it.</p>

<p>It also allows to add custom facts in its interface, as boot parameter or as an extension which enables a workflow like booting the image
and adding desired system type as fact.</p>

<p>Furthermore it could be used in enviroments without PXE and DHCP by providing all settings including an ip address and boot directly
into a new kernel with kexec. This is only available for Red Hat derivates and Debian/Ubuntu (including one template for Autoinstall) at the moment.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="06_bootdisk" id="provisioning_06_bootdisk1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/06_bootdisk:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Provisioning using Bootdisk plugin</h1>

<ul>
<li>Foreman Plugin Bootdisk provides 4 kinds of boot images

<ul>
<li>Host images</li>
<li>Full host image</li>
<li>Generic image</li>
<li>Subnet image</li>
</ul>
</li>
<li>Based on iPXE for environments without control over network</li>
<li>Adds disk based provisioning to Compute resources</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>For the installation in an environment you do not have total control over the network infrastructure the
Foreman Plugin Bootdisk provides 4 kinds of boot images based on iPXE.</p>

<div class="pagebreak">continued...</div>

<p>The host image contains a static network configuration, loads the installer from the media configured in Foreman
and the Provisioning configuration from Foreman itself. So it requires no DHCP and TFTP in the network.</p>

<p>The full host image contains the operating system specific installer so it requires no downloading of it, and is
configured to boot from DHCP or a static network configuration based on Subnet configuration . To get its Provisioning configuration
from Foreman it identifies itself with a token only valid for one deployment.</p>

<p>The generic image boots from a dynamic IP address of the DHCP pool and is identified by the MAC address for Foreman
providing the correct installer via TFTP and Provisioning configuration to load.</p>

<p>The subnet image is basicly the same as the generic image but uses another TFTP server specified for the subnet.</p>

<p>Depending on the Compute resource used the plugin adds disk based provisioning as another option.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="06_bootdisk" id="provisioning_06_bootdisk2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/06_bootdisk:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.11: Install and configure the Bootdisk plugin</h1>

<ul>
<li>Objective:

<ul>
<li>Install and configure the Bootdisk plugin</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Run the Foreman installer to install the Bootdisk plugin</li>
<li>Associate iPXE and PXEGrub2 template to operating systems</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="provisioning" data-title="06_bootdisk" id="provisioning_06_bootdisk3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="provisioning/06_bootdisk:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 4.12: Reinstall the virtual machine "pxe"</h1>

<ul>
<li>Objective:

<ul>
<li>Reinstall the virtual machine "pxe" from a host image</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Set the Host in "Build" mode and download the full host image</li>
<li>Configure virtual machine to boot from image</li>
<li>Boot and reinstall the virtual machine</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="01_overview" id="configmanagement_01_overview1" class="slide subsection" data-transition="none">
<div class="content subsection" ref="configmanagement/01_overview:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>5 Orchestration &amp; <br>Configuration management</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="01_overview" id="configmanagement_01_overview2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/01_overview:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Orchestration</h1>

<ul>
<li>
<p>Definition:</p>

<ul>
<li><em>In system administration, orchestration is the automated configuring, coordinating, and managing of computer systems and software.</em></li>
</ul>
</li>
<li><p>Tasks required in addition to Configuration management</p></li>
<li><p>Foreman uses the Remote Execution plugin for this utilizing different providers</p></li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The definition taken from Wikipedia explains orchestration as "automated configuring, coordinating, and managing of computer systems and software."</p>

<p>While there are many tools for the "automated configuring" part, there are additional takes not solved by them.
So with the integration of these tools there was still a gap to fill which was done with the plugin Remote Execution.
This plugin utilizes different providers to run jobs on systems for "coordinating and managing" them.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="01_overview" id="configmanagement_01_overview3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/01_overview:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Configuration management</h1>

<ul>
<li>
<p>Definition:</p>

<ul>
<li><em>Configuration management is a systems engineering process for establishing and maintaining consistency of a product performance, functional, and physical attributes with its requirements, design and operational information throughout its life.</em></li>
</ul>
</li>
<li>
<p>Tools integrated in Foreman:</p>

<ul>
<li>Puppet</li>
<li>Chef</li>
<li>Salt</li>
<li>Ansible</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Wikipedia defines configuration management as a <em>systems engineering process for establishing and maintaining consistency of a 
product's performance, functional, and physical attributes with its requirements, design and operational information throughout
its life.</em></p>

<div class="pagebreak">continued...</div>

<p>So configuration management software is used to describe a desired state, configure a system to be in this state and recognize
drifts from this state to revert them.</p>

<p>Foreman integrates different tools to solve this task. Puppet is deeply integrated because Foreman started as a WebGUI for it,
but the UI parts were moved to a plugin to get it in line with the other tools. The features of the plugins differ depending
on the capabilities based on the tools they depend on. For example some can only report system information and state while others can assign a configuration
using the web interface. Some tools also have a focus more on rapid deployment than on managing the system state.</p>

<p>We will use Puppet in this training because it provides the complete feature set and its descriptive language is also quite accessible/readable
without knowing Puppet in-depth. As a second option Ansible is integrated for its simplicity and being quite common in environments
introducing configuration management nowadays.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_remote_execution" id="configmanagement_02_remote_execution1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_remote_execution:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Remote Execution</h1>

<ul>
<li>Execute jobs on remote systems from the Foreman WebGUI</li>
<li>It can utilize different tools via providers

<ul>
<li>Script (SSH for push and MQTT for pull)</li>
<li>Ansible</li>
<li>Salt</li>
</ul>
</li>
<li><p>Provides a Cockpit integration via SSH</p></li>
<li>
<p><u>Use case:</u> </p>

<ul>
<li>Trigger configuration management runs immediately</li>
<li>Execute one-time or irregular commands</li>
<li>Orchestrate operations on servers</li>
<li>OpenSCAP scans on demand (requires the plugin)</li>
<li>Webconsole to the systems</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The Foreman Plugin Remote Execution adds WebGUI and workflow for executing jobs on remote systems.
It utilizes different providers.</p>

<p>The Script provider runs per default commands via SSH as root, but can also be configure to run as unpriviledged
user and run sudo to accquire elevated privileges. It also integrates Cockpit as a Webconsole using
this credentials and a SSH socket. Also a pull mode using mqtt was introduced to it.</p>

<p>The Ansible provider uses the same SSH configuration but uses Ansible syntax for the jobs.
The same goes for Salt.</p>

<p>It is usefully to trigger configuration management runs immediately to get an adhoc deployment,
execute one-time or irregular commands and also to orchestrate operations like updates on your servers.
It also allows to schedule jobs or reoccurring execution.</p>

<p>With the OpenSCAP plugin installed in addition an option to run scans on demand is added.</p>

<p>More details on: <a href="https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Configuring_and_Setting_Up_Remote_Jobs_managing-hosts" target="_blank">https://docs.theforeman.org/3.9/Managing_Hosts/index-katello.html#Configuring_and_Setting_Up_Remote_Jobs_managing-hosts</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_remote_execution" id="configmanagement_02_remote_execution2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_remote_execution:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 5.1: Remote Execution</h1>

<ul>
<li>Objective:

<ul>
<li>Trigger a Job on a remote system</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman Plugin Remote Execution</li>
<li>Bring out the SSH key</li>
<li>Change the settings to use IP instead of FQDN</li>
<li>Schedule a Job executing the command "id"</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_remote_execution" id="configmanagement_02_remote_execution3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_remote_execution:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Remote Execution - Job Templates</h1>

<ul>
<li>Similar to Provisioning Templates</li>
<li>Input

<ul>
<li>User Input - free-form or list of values</li>
<li>Fact value</li>
<li>Variable</li>
<li>Puppet parameter</li>
<li>Reference on other templates</li>
<li>Special ERB function "input"</li>
</ul>
</li>
<li>Default Templates:

<ul>
<li>Puppet Run Once</li>
<li>Package Action</li>
<li>Service Action</li>
<li>Run Command</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>It is also possible to write templates for jobs in a similar manner like Provisioning Templates. In this
templates you can use a special function "input" to get the value of input fields associated to it. These
fields can be a free-form or list of values for a user to add, facts, variables or Puppet parameters. </p>

<p>Furthermore you can reference another template, which you can also render in your newly created one with the
"render_template" function.</p>

<p>The default templates provided depend on the installed plugins and have evolved over time.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_remote_execution" id="configmanagement_02_remote_execution4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_remote_execution:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 5.2: Remote Execution - Job Template</h1>

<ul>
<li>Objective:

<ul>
<li>Create a Job Template "ping" to run the ping command on remote hosts</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Create a Job Template to run ping with default values and input field</li>
<li>Run it without input</li>
<li>Run it with input</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="02_remote_execution" id="configmanagement_02_remote_execution5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/02_remote_execution:5">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 5.3: Remote Execution - Webconsole</h1>

<ul>
<li>Objective:

<ul>
<li>Integrate Cockpit</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Enable the integration in the Foreman plugin using the foreman-installer</li>
<li>Install Cockpit on the client</li>
<li>Access the webconsole from the host view</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_puppet" id="configmanagement_03_puppet1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="configmanagement/03_puppet:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Puppet</h1>

<ul>
<li>Written in ruby</li>
<li>Choice between Open Source or Enterprise version

<ul>
<li>Enterprise edition is not supported by Foreman</li>
</ul>
</li>
<li>Runs on Linux, Unix, Windows, …</li>
<li>Describes desired state in its own declarative language</li>
</ul>

<pre>
    package { 'openssh':
      ensure =&gt; 'installed',
    }
</pre>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_puppet" id="configmanagement_03_puppet2" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="configmanagement/03_puppet:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Puppet Workflow</h1>

<ul>
<li>Manifests stored on a central Puppet Server</li>
<li>Agent collects system information using facter</li>
<li>Agent contacts central server with this information</li>
<li>Server compiles catalog for agent to realize using an abstraction layer</li>
<li>Agent reports back to server</li>
<li>Puppet Server transfers reports to other tools</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Next slide provides a diagram of the workflow.</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_puppet" id="configmanagement_03_puppet3" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="configmanagement/03_puppet:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Puppet Workflow</h1>

<p></p>
<center><img src="./file/configmanagement/_images/puppet_workflow.png" style="width: 546px; height: 456px; margin-top: 50px;" alt="Puppet Workflow"></center>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_puppet" id="configmanagement_03_puppet4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_puppet:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman Puppet Integration</h1>

<ul>
<li>
<p>Foreman -&gt; Puppet</p>

<ul>
<li>Smart proxy Puppet allows to import Puppet modules</li>
<li>Smart proxy Puppet allows to trigger agent runs</li>
<li>Smart proxy Puppet CA integrates certificate handling</li>
</ul>
</li>
<li>
<p>Puppet -&gt; Foreman</p>

<ul>
<li>Puppet uploads facts to Foreman</li>
<li>Puppet uses Foreman as ENC</li>
<li>Puppet transfers reports to Foreman</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Foreman integrates Puppet in several ways and also integrates itself into Puppet. Communication from the WebGUI to Puppet is handled 
using the Smart proxy for Puppet. It allows to import Puppet modules known to Puppet and to trigger Puppet agent runs using several protocols.
The Smart Proxy Puppet CA integrates certificate handling into provisioning so auto signing of the agents certificate requests during build
is allowed and also allows to manage the complete CA in the WebGUI.</p>

<p>On the Puppet master a script is deployed which integrates Foreman as an ENC so classes selected in the WebGUI are deployed on the system.
This mechanism is also used to upload the facts provided by the agent during Puppet agent run and creating a host entry if facts are provided
for a not already existing system. Also Foreman is integrated as a reporting target to enable the web interface to show reports.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_puppet" id="configmanagement_03_puppet5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_puppet:5">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 5.4: Import of Puppet classes</h1>

<ul>
<li>Objective:

<ul>
<li>Make Puppet code available to Puppet and Foreman</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Enable Puppet and install the Foreman and Smart Proxy plugins to integrate it</li>
<li>Place Puppet modules in Puppet environment "production"</li>
<li>Import classes in Foreman</li>
</ul>
</li>
<li>Optional:

<ul>
<li>Configure Foreman to ignore specific classes</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_puppet" id="configmanagement_03_puppet6" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_puppet:6">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Parameters vs. Smart class parameters</h1>

<ul>
<li>Parameters

<ul>
<li>Different types since 1.22</li>
<li>Usable in Foreman's Provisioning Templates</li>
<li>Usable in Puppet as global parameters</li>
<li>Override by creating one of the same name in a more specific scope</li>
</ul>
</li>
<li>Smart class parameters

<ul>
<li>Available from Puppet classes</li>
<li>Different types</li>
<li>Validators</li>
<li>Override options to handle override order and behaviour</li>
</ul>
</li>
<li>All are hideable from unprivileged users</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman does differentiate between two kinds of parameters.</p>

<div class="pagebreak">continued...</div>

<p>Parameters are global parameters in a very simple fashion. Their values can be of different types since 1.22, before that
they could only be strings. Override is simply done by creating a parameter with the same name in a more specific scope.
To Puppet they are presented as a global parameter via the ENC, in Foreman they can also be used in the Provisioning Templates.</p>

<p>Smart class parameters become available from imported Puppet classes and can have different types like boolean, hash
or yaml. For this types an input validator can be created to verify user input. An override behavior and order can be
defined to enable merging values depending on facts.</p>

<p>Smart variables were a third type, meant for older puppet versions and are now removed.</p>

<p>All types have to be created on the global scope to be available in more specific scopes and all allow to hide them
from unprivileged users.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_puppet" id="configmanagement_03_puppet7" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_puppet:7">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 5.5: Parameterize and assign Puppet classes</h1>

<ul>
<li>Objective:

<ul>
<li>Parameterize and assign Puppet classes to at least one host</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Set defaults to the Smart class parameters provided by the imported class</li>
<li>Assign the Puppet class in the host menu to one host</li>
</ul>
</li>
<li>Optional:

<ul>
<li>Assign the Puppet class to another host and override the defaults</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_puppet" id="configmanagement_03_puppet8" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_puppet:8">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 5.6: Trigger Puppet agent run and inspect the report</h1>

<ul>
<li>Objective:

<ul>
<li>Trigger an Puppet agent run and inspect the report</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Run the Puppet agent on the host you assigned the class</li>
<li>Inspect the report of the Puppet agent run</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_puppet" id="configmanagement_03_puppet9" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_puppet:9">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Config Groups</h1>

<ul>
<li>Allows to group classes</li>
<li>Assign like single classes</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Config Groups allow to group classes and assign them in the same way you would use single classes.
This follows the same ideas like the very popular Roles-Profiles-Pattern used in Puppet to simplify
assignment via another layer of abstraction.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_puppet" id="configmanagement_03_puppet10" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_puppet:10">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Managing Foreman with Puppet</h1>

<ul>
<li>Puppet modules provided by Foreman Project

<ul>
<li>Already utilized by Foreman Installer</li>
<li>Compatible with all supported platforms</li>
<li>Version compatibility to observe</li>
</ul>
</li>
<li>Configuration of:

<ul>
<li>Foreman</li>
<li>Smart Proxy</li>
<li>Puppet</li>
<li>Depending and managed services</li>
</ul>
</li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>It is also possible to manage Foreman and/or its Smart Proxies using Puppet. The modules to do so are provided by the
Foreman Project itself and are already used in the Foreman Installer. The modules are written to be compatible with
all supported platforms. For compatibility of the modules with the Foreman or Smart Proxy version observe the notes
in the README file.</p>

<p>The modules provided can configure Foreman, the Smart Proxy and Puppet in the way it is required by Foreman and the services
required to run Foreman or managed by the Smart Proxy.</p>

</div>
<div class="notes-section notes">

<ul>
<li>Show the students "puppet module list --modulepath=/usr/share/foreman-installer/modules" for a list of the modules</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="03_puppet" id="configmanagement_03_puppet11" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/03_puppet:11">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Utilizing Foreman within Puppet</h1>

<ul>
<li>Function to query the API

<ul>
<li>Alternative to exported resources and PuppetDB query</li>
<li>Login data and query as hash</li>
<li>Returns hash</li>
<li>Filter can reduce the data</li>
</ul>
</li>
</ul>

<pre>
$hosts = foreman('hosts',
                 'hostgroup=Grid',
                 '20',
                 'https://foreman.localdomain',
                 'my_api_foreman_user',
                 'my_api_foreman_pass')
</pre>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The Puppet module "foreman" provided by the Foreman project includes a function to query the Foreman API in a puppet class.
This is an alternative for exported resources or a PuppetDB query. It takes the login data and the query options and returns
a result hash including an array of hashes describing the hosts. 
The hash is best used with a defined resource and create_resource function or within a template.
Latest release of the function allow to provide a filter for reducing the data for easier handling.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="04_ansible" id="configmanagement_04_ansible1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/04_ansible:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Ansible</h1>

<ul>
<li>Written in python</li>
<li>Runs on Linux, Unix, Windows</li>
<li>Describes desired state in yaml files</li>
</ul>

<pre>
    ---
    - name: Install package vim
      become: true
      yum: name={{ item }} state=installed
      with_items:
      - vim-enhanced
</pre>

<ul>
<li>Workflow

<ul>
<li>Roles or Playbook stored on a system with Ansible installed</li>
<li>Inventory is managed for Ansible</li>
<li>Ansible connects to a system and collects system information</li>
<li>Ansible runs tasks on the system</li>
<li>Ansible can report back to other tools via callback plugin</li>
</ul>
</li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p><br></p>

<p>Ansible is written in python and its control machine runs on Linux while it is possible to manage Linux, Unix and Windows.</p>

<p>For configuration it uses yaml format for simple playbooks and some additional structure for roles. An example for one
task is shown above. Those files are stored on one or more control machines which also need an inventory as a static
file or script for dynamic inventory. There is no agent required as it utilizes SSH (or winrm for Windows), so the control machine
connects to one or more systems to collect system information and run tasks on them. Afterwards callback plugins are used to report
back to other tools.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="04_ansible" id="configmanagement_04_ansible2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/04_ansible:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman Ansible Integration</h1>

<ul>
<li>
<p>Foreman -&gt; Ansible</p>

<ul>
<li>Smart proxy Ansible allows to import Ansible roles</li>
<li>Smart proxy Ansible allows to play Ansible roles</li>
</ul>
</li>
<li>
<p>Ansible -&gt; Foreman</p>

<ul>
<li>Ansible uploads facts to Foreman via callback</li>
<li>Ansible transfers reports to Foreman via callback</li>
<li>Ansible can use Foreman as dynamic inventory</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman can integrate Ansible in several ways and can also integrate itself into Ansible. Communication from the WebGUI to Ansible is handled
using the Smart proxy for Ansible. It allows to import Ansible roles known to Ansible and to play Ansible roles. The configuration automatically
includes the callback to upload facts and reports.</p>

<div class="pagebreak">continued...</div>

<p>On a separate Ansible control machine a callback plugin can be activated to upload facts and reports to Foreman, if you still want to use Ansible
independent from Foreman. Forthermore a script could be deployed to use Foreman as dynamic inventory.</p>

<p>For more information have a look at the plugin documentation: <a href="https://docs.theforeman.org/3.9/Managing_Configurations_Ansible/index-katello.html" target="_blank">https://docs.theforeman.org/3.9/Managing_Configurations_Ansible/index-katello.html</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="04_ansible" id="configmanagement_04_ansible3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/04_ansible:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 5.7: Configure Graphical Integration</h1>

<ul>
<li>Objective:

<ul>
<li>Configure Foreman Plugin and Smart Proxy Plugin</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install Foreman Plugin and Smart Proxy Plugin</li>
<li>Download the collection "community.general"</li>
<li>Download the role "geerlingguy.ntp"</li>
<li>Import roles and assign them</li>
<li>Play roles using the webinterface </li>
</ul>
</li>
<li>Optional:

<ul>
<li>Import variables and overwrite values</li>
</ul>
</li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Graphical integration uses Remote-Execution plugin which we covered earlier.</p>

</div>
<div class="notes-section notes">

<ul>
<li>This exercises is for those that want to use Ansible integrated in Foreman</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="configmanagement" data-title="04_ansible" id="configmanagement_04_ansible4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="configmanagement/04_ansible:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 5.8: Configure Ansible Callback</h1>

<ul>
<li>Objective:

<ul>
<li>Install Ansible-Core and configure the callback plugin for Foreman</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install Ansible-Core</li>
<li>Configure callback plugin</li>
<li>Add your host to the inventory</li>
<li>Create and distribute a SSH key</li>
<li>Run Ansibles setup module</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>This exercises is for those that want to import existing Hosts via Ansible</li>
<li>The inventory should be created in an automatic way like export from a cmdb</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="00_overview" id="usermanagement_00_overview" class="slide subsection" data-transition="none">
<div class="content subsection" ref="usermanagement/00_overview">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>6 User management</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="01_ldap" id="usermanagement_01_ldap1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/01_ldap:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>LDAP</h1>

<ul>
<li>Natively supported including webbased configuration</li>
<li>Supports:

<ul>
<li>Protocol: LDAP, LDAPS, no StartTLS</li>
<li>Schema: POSIX, Active Directory, FreeIPA</li>
</ul>
</li>
<li>Allows multiple backends</li>
<li>Autocreation of user possible</li>
<li>Optional synchronisation of group membership</li>
<li>Getting stored avatars</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman supports LDAP authentication natively and provides a webbased configuration for it.</p>

<div class="pagebreak">continued...</div>

<p>Supported are LDAP and LDAPS as protocol, for now no StartTLS. If using certificate based encyrption
trust to the certificate is mandatory. It supports the POSIX, Active Directory and FreeIPA schema
for storing users and groups, but attribute mapping can be configured manually. For the autocreation
of users the attributes "Login Name", "First Name", "Surname" and "Email" are required, optionally a
avatar can be stored as base64 encoded string in a "Photo" attribute.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="01_ldap" id="usermanagement_01_ldap2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/01_ldap:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 6.1: LDAP Authentication</h1>

<ul>
<li>Objective:

<ul>
<li>Allow the administrative accounts from the LDAP to work as Foreman admins</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Configure the LDAP authentication including group synchronisation</li>
<li>Add a administrative group to grant the administrative accounts from the LDAP privileges</li>
</ul>
</li>
<li>Optional:

<ul>
<li>Add a photo to the administrator account</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section notes">

<ul>
<li>Saving the password of the Foreman login in the browser can accidently fill the user field in this form</li>
</ul>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="02_external" id="usermanagement_02_external" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/02_external">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>External Authentication</h1>

<ul>
<li>External authentication utilizing the webserver</li>
<li>Kerberos

<ul>
<li>Foreman Installer can handle FreeIPA automatically</li>
<li>Manual configuration and tell Foreman to trust</li>
</ul>
</li>
<li>PAM

<ul>
<li>Apache module to validate login form input against PAM</li>
</ul>
</li>
<li>OpenID Connect 

<ul>
<li>Installation and configuration of Apache Modul and OpenID client</li>
<li>Settings in Foreman to point to OpenID provider </li>
</ul>
</li>
<li>Autocreation of user possible</li>
<li>Differentiates between WebGUI and API</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman can also be configure to use an external authentication provided by the webserver.</p>

<p>In most cases this will be Kerberos to achieve a true Single Sign-On. If you use FreeIPA as your
authentication provider the Foreman Installer can create the required configuration by passing the
corresponding parameters to it.</p>

<p>If you use another provider like Active Directory or a manually managed Kerberos it is possible to
create the required Kerberos and PAM authentication on your own and tell Foreman to accept external
users.</p>

<p>Another way to configure Foreman to use external authentication providers is by using the Apache
module "intercept_form_submit" to pass the login form input to PAM for validation.</p>

<p>An integration with OpenID is also now possible which requires the Apache Module <code>mod_auth_openidc</code>
and the corresponding client of the OpenID provider before you can configure the Foreman via its
settings to integrate it.</p>

<p>It is also possible to enable autocreation of users in Foreman for external authentication.</p>

<p>Also note that Foreman differentiates between WebGUI and API login for external authentication
so it is possible to allow external users to only connect to one or both.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="03_permissions" id="usermanagement_03_permissions1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/03_permissions:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Permissions</h1>

<ul>
<li>Fine granular permission system</li>
<li>Abstracted to roles</li>
<li>Complemented by filters</li>
<li>Plugins can add items to the permission system</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman has a fine granular permission system which is abstracted to roles. There are some provided by default,
but you can create your own. The permissions are complemented by filters allowing to give a permission only to
some specific hosts for example.</p>

<p>Every plugin can add additional permissions and pre-defined roles based on its needs, so make sure to review permissions
for non-administrative accounts after installing plugins.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="03_permissions" id="usermanagement_03_permissions2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/03_permissions:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 6.2: Add unprivileged users</h1>

<ul>
<li>Objective:

<ul>
<li>Grant access and privileges for some unprivileged users</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Assign the role "Viewer" to the user "viewer"</li>
<li>Create a role "Selfservice" to allow creation of new hosts and management of own hosts</li>
<li>Assign the new role "Selfservice" to the user "selfservice"</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="04_auditing" id="usermanagement_04_auditing" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/04_auditing">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Auditing</h1>

<ul>
<li>Almost all changes from WebGUI and API</li>
<li>User, timestamp, change and parent object</li>
<li>For templates additional diff of the changes</li>
<li>Browse and searchable in the WebGUI</li>
</ul>

<div style="text-align:center">
<img src="./file/usermanagement/_images/foreman_auditing.png" style="float: center; width: 95%; border-style: solid; border-width: 1px;" alt="Foreman Auditing">
</div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman logs almost all changes from the WebGUI and API including the user, a timestamp, the change and
the parent object like the host or a parameter got changed. For templates an additional diff of the changes
is provided.</p>

<div class="pagebreak">continued...</div>

<p>All this auditing data are browse and searchable in the WebGUI via "Monitor &gt; Audits". To get detailed
auditing data or specific change history simply select an entry.</p>

<p>The events can be deleted or anonymized via cron as needed. This will be covered in a later section of the
training material.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="05_notification" id="usermanagement_05_notification1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/05_notification:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Internal Notifications</h1>

<ul>
<li>Notification for own actions</li>
<li>Used by Foreman and many plugins</li>
<li>Also integrates the Foreman RSS feed</li>
</ul>

<div style="text-align:right">
<img src="./file/usermanagement/_images/foreman_notification.png" style="float: right, max-width:200px; max-height: 300px; width: auto; height: auto; margin-top: 95px; margin-right: 95px; border-style: solid; border-width: 1px;" alt="Foreman Notification">
</div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman provides a new notification feature to notify about your own actions since 1.15 which is already used by Foreman and
many plugins. This allows to keep track of actions run independently.</p>

<p>Furthermore it integrates the Foreman RSS feed to keep the user updated, but also to provide some numbers to the Foreman Project.
You can simply opt-out via the setting "RSS enable" on the "Administer &gt; Settings &gt; Notification" tab.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="05_notification" id="usermanagement_05_notification2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/05_notification:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Email Notifications</h1>

<ul>
<li>General configuration via Foreman Installer or configuration file </li>
<li>Optional setting by user</li>
</ul>

<div style="text-align:right">
<img src="./file/usermanagement/_images/foreman_email.png" style="float: center; max-width:1000px; max-height: 400px; width: auto; height: auto; margin-top: 50px; border-style: solid; border-width: 1px;" alt="Foreman Email">
</div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman can send email notifications to the user. This requires email settings configured in Foreman via the Foreman Installer
or manual editing of the configuration file "/etc/foreman/email.yaml". With this configuration in place a user can decide to
opt-in for several kinds of notification. Which options are available depends on installed plugins.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="usermanagement" data-title="06_sshkeys" id="usermanagement_06_sshkeys" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="usermanagement/06_sshkeys">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>SSH Key Management</h1>

<ul>
<li>SSH Keys provided by Users</li>
<li>Available as parameter on hosts owned</li>
<li>Used in snippet "create_users" during provisioning</li>
<li>Example code for Puppet</li>
</ul>

<div style="text-align:right">
<img src="./file/usermanagement/_images/foreman_usersshkey.png" style="float: center; max-width: 95%; border-style: solid; border-width: 1px;" alt="Foreman User SSH Keys">
</div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman provides a feature allowing users to manage their own SSH keys which is made available as parameter on
hosts owned by the user or its groups. An example for usage during provisioning is provided in the snippet "create_users".
Some example code for using this with Puppet exists in the git repositoy at <a href="https://github.com/theforeman/puppet-foreman_simple_user" target="_blank">https://github.com/theforeman/puppet-foreman_simple_user</a>.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="00_overview" id="plugins_00_overview1" class="slide subsection" data-transition="none">
<div class="content subsection" ref="plugins/00_overview:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>7 Plugins</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="00_overview" id="plugins_00_overview2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/00_overview:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Plugins</h1>

<ul>
<li>
<p>Extend Foreman</p>

<ul>
<li>Add permissions and roles</li>
<li>Alter the menu </li>
<li>Provide dashboard widgets and pagelets</li>
<li>Add URLs and actions</li>
<li>Deface existing views and add new ones</li>
<li>Add parameters to a host</li>
<li>Authenticate a Smart proxy</li>
<li>Add to the database</li>
<li>Create their own logging</li>
<li>Create their own notification</li>
</ul>
</li>
<li>
<p>Extend Smart Proxy</p>

<ul>
<li>Additional providers for existing services</li>
<li>Additional services</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Plugins can extend Foreman and the Smart proxy in many different ways and depending on the needs
it can be very simple or highly complex.</p>

<p>Some of the options will be shown in the next slides where some of the plugins are introduced.</p>

<p>For all options have a look at the "how to create a plugin" at <a href="https://github.com/theforeman/foreman/blob/develop/developer_docs/how_to_create_a_plugin.asciidoc" target="_blank">https://github.com/theforeman/foreman/blob/develop/developer_docs/how_to_create_a_plugin.asciidoc</a>
or "how to create a Smart Proxy plugin" at <a href="https://projects.theforeman.org/projects/foreman/wiki/How_to_Create_a_Smart-Proxy_Plugin" target="_blank">https://projects.theforeman.org/projects/foreman/wiki/How_to_Create_a_Smart-Proxy_Plugin</a>.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="01_default_hostgroup" id="plugins_01_default_hostgroup" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/01_default_hostgroup">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Default Hostgroup</h1>

<ul>
<li>Sets a default hostgroup on host creation</li>
<li><p>Configured as a yaml hash</p></li>
<li>
<p><u>Use case:</u> </p>

<ul>
<li>Introduce Foreman in an already puppetized environment</li>
<li>Combines well with Ansible setup and callback</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>If a host does not already exist, it will be created when the first puppet run (or a different report) triggers
the upload of the facts. Normally the host is added without any additional configuration
in Foreman, the plugin "Default Hostgroup" simply adds the possibility to set a default
hostgroup to assign to these newly created hosts. This allows to add a classification
via the hostgroup already on the first run and without manual intervention.</p>

<div class="pagebreak">continued...</div>

<p>To use it simply install the package and create a file "/etc/foreman/plugins/default_hostgroup.yaml"
containing a hash which maps facts to hostgroups to assign.</p>

<pre><code>---
:default_hostgroup:
  :facts_map:
    "Default":
      "hostname": ".*"
</code></pre>

<p><br></p>

<p>This could also be configured using the installer, but managing complex hashes with it can be difficult.</p>

<p>The plugin is very useful if you plan to embed Foreman in an already puppetized
environment as Puppet ENC. It also works fine with Ansible setup module and 
callback plugin to get hosts in Foreman. A similar workflow should be available
for all other configuration management solutions.</p>

<p>More details on: <a href="https://github.com/theforeman/foreman_default_hostgroup" target="_blank">https://github.com/theforeman/foreman_default_hostgroup</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="02_templates" id="plugins_02_templates1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/02_templates:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Templates</h1>

<ul>
<li>
<p>Creates a synchronisation job for templates</p>

<ul>
<li>Community Templates</li>
<li>Your own git repository</li>
</ul>
</li>
<li>
<p><u>Use case:</u></p>

<ul>
<li>Get additional templates maintained by the community</li>
<li>Manage your own templates with external versioning</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>By installing the plugin you get a synchronisation job for templates which per default
import the community templates from <a href="https://github.com/theforeman/community-templates" target="_blank">https://github.com/theforeman/community-templates</a>
which was deprecated in favor of having provisioning templates in the main project underneath
"/app/views/unattended" and other templates in their matching project. </p>

<div class="pagebreak">continued...</div>

<p>This job can also be used to import your own git repository if you want to manage the templates on
an external version control system. In addition the imported templates will also be associated
to the existing operating systems. Another option is to use the export function for syncing
changes back to a repository.</p>

<p>More details on: <a href="https://theforeman.org/plugins/foreman_templates/8.0/index.html" target="_blank">https://theforeman.org/plugins/foreman_templates/8.0/index.html</a></p>

<p>A different approach is provided by the plugin "foreman_git_templates" which directly
uses the templates stored in git without syncing them to Foreman.</p>

<p>For details visit: <a href="https://github.com/dm-drogeriemarkt/foreman_git_templates" target="_blank">https://github.com/dm-drogeriemarkt/foreman_git_templates</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="02_templates" id="plugins_02_templates2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/02_templates:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 7.1: Templates</h1>

<ul>
<li>Objective:

<ul>
<li>Import the Community templates</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman Plugin Templates</li>
<li>Change settings to import from the current repository</li>
<li>Run the synchronisation job</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="03_dhcp_browser" id="plugins_03_dhcp_browser1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/03_dhcp_browser:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>DHCP Browser</h1>

<ul>
<li>
<p>Adds the DHCP management interface</p>

<ul>
<li>Browse DHCP reservations</li>
<li>Create DHCP reservations for hosts not managed by Foreman</li>
</ul>
</li>
<li><p><u>Use case:</u> More transparency for the DHCP management</p></li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The Foreman Plugin DHCP Browser adds a DHCP management interface to the Foreman WebGUI next to the
subnets which allows to browse DHCP reservations and it is also quite useful for managing reservations
for hosts not managed by the Foreman.</p>

<p>More details on: <a href="https://github.com/theforeman/foreman_dhcp_browser" target="_blank">https://github.com/theforeman/foreman_dhcp_browser</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="03_dhcp_browser" id="plugins_03_dhcp_browser2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/03_dhcp_browser:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 7.2: DHCP Browser</h1>

<ul>
<li>Objective:

<ul>
<li>Inspect DHCP reservations</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman Plugin DHCP Browser</li>
<li>Inspect DHCP reservations via the Plugin</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="04_hooks" id="plugins_04_hooks1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/04_hooks:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Hooks</h1>

<ul>
<li>Foreman plugin Webhooks allows to call webhooks</li>
<li>Smart Proxy plugin Shellhooks provides webhook to execute scripts</li>
<li>
<p>Add both to trigger actions on events in Foreman</p>

<ul>
<li>Call webhooks or run additional scripts on events</li>
<li>Log execution</li>
<li>Do not block Foreman</li>
</ul>
</li>
<li>
<p><u>Use case:</u> </p>

<ul>
<li>Extend the Foreman without writing a plugin</li>
<li>Work around the limitations and problems of existing tools</li>
</ul>
</li>
</ul>





<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The Foreman plugin Webhooks allows to add scripts on events handled by the Foreman. Typically it is used
to integrate other tools during the orchestration process of deploying new hosts instead of writing
a new plugin. This can be done by calling a webhook or by utilizing the Smart Proxy plugin Shellhook to
execute a script.</p>

<p>Another use case is to work around the limitations and problems of tools like changing parameters of
VMs which is only available after the creation but are required before starting them.</p>

<p>This plugin is a new solution replacing another one called Hooks, with some other design decisions
like having it not blocking and rolling back the action in Foreman.</p>

<p>More details on: <a href="https://docs.theforeman.org/3.9/Administering_Project/index-katello.html#Using_Webhooks_admin" target="_blank">https://docs.theforeman.org/3.9/Administering_Project/index-katello.html#Using_Webhooks_admin</a></p>

</div>
<div class="notes-section notes">

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="04_hooks" id="plugins_04_hooks2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/04_hooks:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 7.3: Hooks</h1>

<ul>
<li>Objective:

<ul>
<li>Execute a shell script printing arguments when entering build mode</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman plugin Webhooks and Smart Proxy plugin Shellhooks</li>
<li>Configure a Webhook to trigger the Shellhook print_args</li>
<li>Increase the log level of Smart Proxy to DEBUG</li>
<li>Activate build mode of a Host and inspect the Smart Proxy's log</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="05_puppetdb" id="plugins_05_puppetdb" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/05_puppetdb">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>PuppetDB</h1>

<ul>
<li>Disable hosts in the PuppetDB during deletion</li>
<li><p>Display the PuppetDB in the dashboard</p></li>
<li><p><u>Use case:</u> Should always be installed when using PuppetDB with Foreman</p></li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>When PuppetDB is used with Foreman there is normally no interaction between both, they are completely
two different independent report targets. With this plugin a host is also disabled in PuppetDB when it is deleted in
Foreman.</p>

<p>In addition the PuppetDB dashboard is also integrated in the Foreman WebGUI to display the performance of
the backend.</p>

<p>More details on: <a href="https://github.com/theforeman/puppetdb_foreman" target="_blank">https://github.com/theforeman/puppetdb_foreman</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="06_expire_hosts" id="plugins_06_expire_hosts1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/06_expire_hosts:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Expire Hosts</h1>

<ul>
<li>
<p>Set an expiration date on hosts</p>

<ul>
<li>Notify owners and admins in advance</li>
<li>Shutdown on expiration date</li>
<li>Delete afterwards</li>
</ul>
</li>
<li>
<p><u>Use case:</u> </p>

<ul>
<li>Autoremove virtual machines of developers and testers</li>
<li>At least notify for hardware machines no longer required</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The Foreman Plugin Expire Hosts allows to add an expiration date on hosts and to
configure notifications for owners and admins in advance, automatically shutdown
when the hosts is expired and delete it also automatically afterwards. This is
quite useful on virtual machines used for development and testing, for hardware
shutdown and deletion can not be automated but it will at least notify.</p>

<div class="pagebreak">continued...</div>

<p>More details on: <a href="https://github.com/theforeman/foreman_expire_hosts" target="_blank">https://github.com/theforeman/foreman_expire_hosts</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="06_expire_hosts" id="plugins_06_expire_hosts2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/06_expire_hosts:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 7.4: Expire Hosts</h1>

<ul>
<li>Objective:

<ul>
<li>Set a host to expire</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman Plugin Expire Hosts</li>
<li>Configure notifications</li>
<li>Set a host to expire</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="07_monitoring" id="plugins_07_monitoring1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/07_monitoring:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Monitoring</h1>

<ul>
<li>
<p>Integrates a monitoring solution</p>

<ul>
<li>Shows monitoring status in Foreman</li>
<li>Manages monitoring objects during provisioning</li>
</ul>
</li>
<li>
<p>Supported monitoring solutions</p>

<ul>
<li>Icinga 2</li>
<li>Icinga 2 and Icinga Web 2 Director</li>
</ul>
</li>
<li>
<p><u>Use case:</u></p>

<ul>
<li>Integrate monitoring into provisioning</li>
<li>Get state for running systems from Foreman</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The Monitoring integration is done via a Foreman plugin for the graphical part and a
Smart proxy plugin for the communication. So it shows a global and detailed monitoring
status for hosts, manages monitoring objects during provisioning and deprovisioning and
allows to set downtimes.</p>

<div class="pagebreak">continued...</div>

<p>For now it only supports Icinga 2 as monitoring solution and if requiring a more comfortable
administration Icinga 2 and in addition its graphical frontend Icinga Web 2 Director.</p>

<p>More details on: <br>
 <a href="https://github.com/theforeman/foreman_monitoring" target="_blank">https://github.com/theforeman/foreman_monitoring</a> <br>
 <a href="https://github.com/theforeman/smart_proxy_monitoring" target="_blank">https://github.com/theforeman/smart_proxy_monitoring</a> <br></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="07_monitoring" id="plugins_07_monitoring2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/07_monitoring:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 7.5: Monitoring Integration</h1>

<ul>
<li>Objective:

<ul>
<li>Integrate Monitoring into Foreman</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install Foreman plugin and Smart proxy plugin</li>
<li>Configure Smart proxy to communicate with Icinga 2 and Icinga Web 2 Director</li>
<li>Configure Foreman default actions for monitoring</li>
<li>Active integration for one host</li>
<li>Verify monitoring integration</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="08_openscap" id="plugins_08_openscap1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/08_openscap:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>OpenSCAP</h1>

<ul>
<li>Open Source implementation of Security Content Automation Protocol</li>
<li>Combines different security standards</li>
<li>Validate systems for security compliance

<ul>
<li>Provides guides</li>
<li>Provides reports and remediation</li>
</ul>
</li>
<li>Profiles provided by different resources

<ul>
<li>Files to start with included</li>
<li>Other resources like the "National Institute of Standards and Technology"</li>
</ul>
</li>
<li>
<p>Client provided in a separate Client repository</p>

<ul>
<li>Installation via Puppet, Ansible or manual</li>
</ul>
</li>
<li><p><u>Use case:</u> Collect security compliance reports in the WebGUI</p></li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>OpenSCAP is the Open Source implementation of Security Content Automation Protocol which combines
different pre-existing security standards like CVE, CCE, CPE, CVSS, XCCDF, OVAL, OCIL, AI, ARF, CCSS
and TMSAD.  All these informations are combined in datastream files which can contain different profiles
a system can be validated against. To get a compliant system a guide can be created or a compliance report
including some remediation scripts. The required files can be created by hand but are in XML so best practice is to use
a tool like the Workbench to tailor the existing files like of the one provided by the OpenSCAP project or
the "National Institute of Standards and Technology" (NIST).</p>

<p>Not used by Foreman for now is the Anaconda Plugin OpenSCAP which can also add security compliance
as part of the installation process. Also the remediation scripts in bash and/or Ansible are not used
for now.</p>

<p>To customize the policy the Plugin was enhanced to support tailoring files.</p>

<p>The Client is provided by the Foreman Project in a separate Client repository and for installation and configuration
a Puppet module exists in the puppet Forge, an Ansible role in th Ansible galaxy, and instructions for manually doing
it is provided by the Foreman Webinterface.</p>

<div class="pagebreak">continued...</div>

<p>More details on: <a href="https://docs.theforeman.org/3.9/Administering_Project/index-katello.html#Managing_Security_Compliance_admin" target="_blank">https://docs.theforeman.org/3.9/Administering_Project/index-katello.html#Managing_Security_Compliance_admin</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="08_openscap" id="plugins_08_openscap2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/08_openscap:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 7.6: OpenSCAP - Serverside Preparation</h1>

<ul>
<li>Objective:

<ul>
<li>Prepare the server to inspect the Security compliance of your system</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Install the Foreman and Smart Proxy Plugin OpenSCAP</li>
<li>Make the Puppet Module "foreman_scap_client" or the Ansible Role "theforeman.foreman_scap_client" available</li>
<li>Parameterize the Puppet Module / Ansible Role</li>
<li>Create a Hostgroup</li>
<li>Create a Policy for CentOS and assign it to a Hostgroup</li>
<li>Assign the Hostgroup to the host</li>
<li>Create an Activation key</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>The lastest version of the Puppet module is currently not on the forge, so get it from <a href="https://github.com/theforeman/puppet-foreman_scap_client" target="_blank">https://github.com/theforeman/puppet-foreman_scap_client</a></p>

<p>Examples for SCAP policy files provided by the ComplianceAsCode project can be found in the release zip archives at <a href="https://github.com/ComplianceAsCode/content/releases" target="_blank">https://github.com/ComplianceAsCode/content/releases</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="plugins" data-title="08_openscap" id="plugins_08_openscap3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="plugins/08_openscap:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 7.7: OpenSCAP - Clientside Preparation</h1>

<ul>
<li>Objective:

<ul>
<li>Prepare the client to inspect the Security compliance of your system</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Register the Host to get client certificates</li>
<li>Make the Foreman client repository available to one host</li>
<li>Initiate a Puppet agent run or play the Ansible roles on the host</li>
<li>Create a report on the host</li>
</ul>
</li>
<li>Optional:

<ul>
<li>Customize the Policy with a tailor file</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="01_overview" id="katello_01_overview" class="slide subsection" data-transition="none">
<div class="content subsection" ref="katello/01_overview">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>8 Katello</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="02_content" id="katello_02_content1" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="katello/02_content:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Content management - Products</h1>

<ul>
<li>Content management is based on products</li>
<li>Products consists of one or more repositories of any content type</li>
</ul>

<div style="text-align: center"><img src="./file/katello/_images/products.png" style="float: center; max-width: 95%; height: auto; border-style: solid; border-width: 1px;" alt="Katello - Products"></div>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="02_content" id="katello_02_content2" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="katello/02_content:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Content management - Lifecycle Environments</h1>

<ul>
<li>Lifecycle Environments represent different stages</li>
<li>Multiple Lifecycle Environments Paths allow different staging models</li>
</ul>

<div style="text-align: center"><img src="./file/katello/_images/lifecycle.png" style="float: center; max-width: 95%; height: auto; border-style: solid; border-width: 1px;" alt="Katello - Lifecycle Environments"></div>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="02_content" id="katello_02_content3" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="katello/02_content:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Content management - Content Views</h1>

<ul>
<li>Content Views create versioned snapshots of one or more repositories</li>
<li>Allow to filter several software packages</li>
<li>Incremental Content Views provide faster workflow for security fixes</li>
<li>Composite Content Views are possible</li>
</ul>

<div style="text-align:center"><img src="./file/katello/_images/contentviews.png" style="float: center; max-width: 95%; height: auto; border-style: solid; border-width: 1px;" alt="Katello - Content Views"></div>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="02_content" id="katello_02_content4" class="slide smbullets small noprint" data-transition="none">
<div class="content smbullets small noprint" ref="katello/02_content:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Content management - Content Hosts</h1>

<ul>
<li>Consumer of content and subscriptions 

<ul>
<li>different view on a host than Hosts in Foreman</li>
<li>ongoing work to integrate this completely</li>
</ul>
</li>
<li>Remote Execution allows to execute commands</li>
<li>Client tools report installed packages and required restarts</li>
</ul>

<div style="text-align: center"><img src="./file/katello/_images/contenthost.png" style="float: center; max-width: 95%; height: auto; border-style: solid; border-width: 1px" alt="Katello - Content Host"></div>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="03_subscription" id="katello_03_subscription1" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="katello/03_subscription:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Subscription management - Classic</h1>

<ul>
<li>
<p>Red Hat</p>

<ul>
<li>Subscription Manifest - certificates for communication and subscription data</li>
<li>Red Hat Repositories - available products and repositories</li>
<li>Products and Repositories on click</li>
<li>Content Hosts consume subscriptions</li>
</ul>
</li>
<li>
<p>SUSE</p>

<ul>
<li>Similar workflow to Red Hat via Plugin</li>
</ul>
</li>
<li>
<p>Other software</p>

<ul>
<li>Tracks subscribed Content Hosts for products</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Subscription management is primarily implemented for cosuming Red Hat Content you subcribed.</p>

<div class="pagebreak">continued...</div>

<p>Red Hat allows to create a Subscription Manifest to move Subscription management from Red Hat
Network to your environment. This manifest includes the certificates required for communication
and the subscription data. Red Hat Repositories View shows available products and repositories
covered by the subscription data and allows to select them which will automatically create and
synchronize them to your system.</p>

<p>For SUSE a similar workflow can be enabled when using the Foreman SCC Manager plugin which is
available as package and you can find upstream at <a href="https://github.com/ATIX-AG/foreman_scc_manager" target="_blank">https://github.com/ATIX-AG/foreman_scc_manager</a>.</p>

<p>The Content Hosts cosume these subscriptions in the same way like they were directly connected to
the Red Hat Network. If you purchased Virtual Subscriptions it requires you to run virt-what and
report your virtualization hosts before you can consume subscriptions with the virtual machines.</p>

<p>For other software Subscription Management can also be useful by simply tracking all subscribed
Content Hosts for products.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="03_subscription" id="katello_03_subscription2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="katello/03_subscription:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Subscription management - Simple Content Access</h1>

<ul>
<li>New option which is default since Katello 4.7</li>
<li>Subscriptions are only required for upstream access</li>
<li>No Subscription assigned to clients</li>
<li>Access to all repositories by default

<ul>
<li>Limited to only consumable ones (only RPM for dnf, DEB for apt)</li>
<li>Support for restricting access by operating system (RHEL only)</li>
<li>Custom repositories disabled by default</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>To simplify content management Katello introduced Simple Content Access which does remove the
need to assign subscriptions to clients, so a subcription to access upstream repositories is
still needed.</p>

<div class="pagebreak">continued...</div>

<p>Without the subscription limiting access to repositories a cleint can access all repositories
by default. This is limited to only consumable ones, so a system using dnf will only get
RPM repositories and using apt will only provide access to DEB repositories.
A solution using product certificates and operating system id allows RHEL system to automatically
restrict access to repositories for the correct version for Red Hat repositories and by assigning
such a restriction to a custom repository to expand it.
Custom repositories are disabled by default now to prevent accidential access, so enabling them
via Activation key is required.</p>

<p>Future improvements are very likely with ATIX already working on expanding the subscription-manager
to provide the operating system version so it could be utilized in a similar fashion for all systems
by Katello.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="04_demo" id="katello_04_demo1" class="slide center noprint" data-transition="none">
<div class="content center noprint" ref="katello/04_demo:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Demo</h1>

<div class="div_center">Katello Demo</div>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="katello" data-title="04_demo" id="katello_04_demo2" class="slide center noprint" data-transition="none">
<div class="content center noprint" ref="katello/04_demo:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Try it yourself</h1>

<div class="div_center">Try it yourself</div>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="00_overview" id="advanced_00_overview" class="slide subsection" data-transition="none">
<div class="content subsection" ref="advanced/00_overview">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>9 Advanced Topics</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="01_web" id="advanced_01_web1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/01_web:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>WebGUI</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="01_web" id="advanced_01_web2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/01_web:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Searches</h1>

<ul>
<li>Almost all views are simple lists</li>
<li>Some views like "Reports" have a default filter</li>
<li>Most views provide additional searches</li>
<li>Bookmark and share your own search</li>
</ul>

<div style="text-align:center">
<img src="./file/advanced/_images/foreman-searches.png" style="float: center; max-width: 95%; max-height: 300px; width: auto; height: auto; border-style: solid; border-width: 1px;" alt="Foreman Searches">
</div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>In the Foreman WebGUI almost all views are simple unfiltered lists, some views like the "Reports" view are filtered by
default using a search and most provide additional searches to quickly filter for typically views like 'all hosts
out of sync'. But the WebGUI is not limited to these searches you can always create your own and bookmark it for later.
Setting a bookmark to public allows to share it with other users.</p>

<p>The search field can be used for a free text search but gets more powerful if using the autosuggestions. It provides
different comparison operators depending on the type of the field compared including SQL like wildcard matching.</p>

<p>For more details see: <a href="http://theforeman.org/manuals/latest/index.html#4.1.5Searching" target="_blank">http://theforeman.org/manuals/latest/index.html#4.1.5Searching</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="01_web" id="advanced_01_web3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/01_web:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Trends</h1>

<ul>
<li>Graphs changes in your enviroment</li>
<li>Configured in the WebGUI and collected by a background task</li>
<li>Internal Host parameters or Facts provided by Configuration Management</li>
<li>Moved to a separate plugin with Foreman 2.2</li>
</ul>

<div style="text-align:center">
<img src="./file/advanced/_images/foreman-trend-puppetversion.png" style="float: center; max-width: 95%; max-height: 300px; width: auto; height: auto; border-style: solid; border-width: 1px;" alt="Foreman Trends">
</div>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p><br>
Foreman can provide graphs about changes in your environment. Those are configured and displayed in the WebGUI in
"Monitor &gt; Trends" and collected by the background task "Trend Counter Job". By default this tasks runs every 30 minutes matching 
Puppet's default run interval because most trends will be based on the facts collected by the configuration management
solution, another source are Foreman's internal parameters like the operatingsystem of the host.</p>

<p>This functionality was moved to a separate plugin with Foreman 2.2 which can enabled using <code>foreman-installer --enable-foreman-plugin-statistics</code>.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/02_cleanup:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Cleanup / Backup / Restore / Upgrade</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/02_cleanup:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Cleanup</h1>

<ul>
<li>
<p>Reports are send to the Foreman and stored in the database</p>

<ul>
<li>Puppet reports every 30 minutes</li>
<li>Chef reports every 30 minutes</li>
<li>Salt reports every 10 minutes</li>
<li>Ansible reports on every run</li>
<li>Requires a lot of space</li>
</ul>
</li>
<li>
<p>Cleanup job is provided by the Foreman</p>

<ul>
<li>Executed via cron</li>
<li>Can run with different parameters</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The configuration management solution sends reports to Foreman which are then stored in the database afterwards.
Depending on the solution, configuration and interval the required storage space can differ.</p>

<div class="pagebreak">continued...</div>

<p>Foreman provides a cleanup job for this in form of a cronjob. Best Practice would be to adjust is based on your needs. The command takes parameters
for the maximum age to keep the status of the reports.</p>

<p>For example configure the daily cronjob like this to delete all reports 'without event' 'after one day' and
those with events 'after 7 days'.</p>

<pre><code># vi /etc/cron.d/foreman
foreman-rake reports:expire days=1 status=0
foreman-rake reports:expire days=7
</code></pre>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/02_cleanup:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Backup</h1>

<ul>
<li><p><u>In a regular interval, at least before an upgrade!</u></p></li>
<li>
<p>Foreman </p>

<ul>
<li>Configuration - Archive the configuration directory</li>
<li>Database - Backupjob provided by Foreman</li>
</ul>
</li>
<li>
<p>Puppet </p>

<ul>
<li>CA - Archive the certificates </li>
<li>Puppet Code - Archive the modules</li>
</ul>
</li>
<li>
<p>Smart proxies </p>

<ul>
<li>Smart proxies itself - Archive the Smart proxy configuration </li>
<li>Managed Service - Follow instructions for the service</li>
</ul>
</li>
<li>
<p>Katello</p>

<ul>
<li>Candlepin - Database backup</li>
<li>Pulp - Database backup + Content archive</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Backup should be done in a regular interval, but at least performed before any upgrade, and it should cover all components.</p>

<p>Foreman backup can be done by archiving the configuration directory "/etc/foreman" and for the database a dump can
be generated with the following command "foreman-rake db:dump" provided by the Foreman.</p>

<p>The Puppet backup should include the certificates which are located in "/var/lib/puppet/ssl" on the Puppet CA server and the
Puppet Code underneath "/etc/puppet/environments". Other configuration management solutions will be handled in a similar
way.</p>

<p>To backup the Smart proxy, archive the folder "/etc/foreman-proxy" and do not forget about the managed service. 
For this follow the instructions for the service. With the "Orchestration rebuilder" feature, the Foreman can also rebuild all configuration issued via the Smart proxy from the "All Hosts" menu as an action.</p>

<p>Katello adds to additional components requiring backup. Candlepin uses its own database which needs to be backuped. The same with Pulp which also requires you to archive the content if not everything could be downloaded again.
The recommended way to run a backup for Katello is using foreman-maintain, we will discuss at the end of the section.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/02_cleanup:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Restore</h1>

<ul>
<li><p><u>Always stop the service before doing any restore!</u></p></li>
<li>
<p>Foreman </p>

<ul>
<li>Configuration - Restore the configuration directory</li>
<li>Database - Restorejob provided by Foreman</li>
</ul>
</li>
<li>
<p>Puppet </p>

<ul>
<li>CA - Restore the certificates </li>
<li>Puppet Code - Restore the modules</li>
</ul>
</li>
<li>
<p>Smart proxies </p>

<ul>
<li>Smart proxies itself - Restore the Smart proxy configuration </li>
<li>Managed Service - Follow instructions for the service</li>
</ul>
</li>
<li>
<p>Katello</p>

<ul>
<li>Candlepin - Database needs to be restored</li>
<li>Pulp - Database + Content needs to be restored</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Before starting a restore always stop the service!</p>

<p>Restore the configuration directory of the Foreman carefully and inspect it before overwritting the current one. The database
dump can be restored with the command "foreman-rake db:import_dump file=/usr/share/foreman/db/foreman.TIMESTAMP.sql". Drop
an existing database in advance to have a clean restore.</p>

<p>For Puppet restore simply copy back the files, the same goes for the Smart proxy. The managed services should be restored according to
their instructions.</p>

<p>Katello's additional services also need to be restored using foreman-maintain.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup5" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/02_cleanup:5">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Upgrade</h1>

<ul>
<li><p><u>Always follow the instructions in the Foreman documentation!</u></p></li>
<li>
<p>In General:</p>

<ul>
<li><u>Backup</u></li>
<li>Change package repository to the new release</li>
<li>Update the packages</li>
<li><em>Run the foreman-installer to:</em></li>
<li>Run Database migration and seed script</li>
<li>Clear the cache and sessions</li>
<li>Restart the service</li>
</ul>
</li>
<li>
<p>Operating System upgrade:</p>

<ul>
<li>Use Leapp for switching EL7 to EL8</li>
</ul>
</li>
<li>
<p>Katello:</p>

<ul>
<li>No separate update of Foreman, always wait for Katello release</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Always follow the instructions in the Foreman documentation providing release and operating system specific steps to do.</p>

<p>In general you should start by creating an up to date backup of the old configuration. Afterwards you have to change the package repository to the newest release because Foreman is always providing a separate repository for any major release. Then cleanup the package metadata and update the packages. 
Run the foreman-installer to execute the database migration and seed script, clear the cache and existing sessions, and restarts the services.</p>

<p>Foreman provided also support for using Leapp for switching from EL7 to EL8 to help with changing from SCL to Modules. In other cases nothing special is required for an operating system upgrade.</p>

<p>Updating Katello requires to have both parts releases to be announced, so after a Foreman release was announced waiting normally 2 to 3 weeks for the corresponding Katello release is required.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="02_cleanup" id="advanced_02_cleanup6" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/02_cleanup:6">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman Maintain</h1>

<ul>
<li>A tool developed to automate the previous tasks</li>
<li>Handles multiple strategies for

<ul>
<li>Backup</li>
<li>Restore</li>
</ul>
</li>
<li>Handles Updates including Health checks</li>
<li>Maintenance mode prevents access to Foreman</li>
<li>Yum plugin prevents unexpected package sources</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman Maintain is a newly developed tool which tries to automate the previous tasks. It can handle multiple strategies for backup and restore,
like offline and online, full and incremental. It ensures system health during Update and its maintenance mode prevents access to Foreman.</p>

<p>The yum plugin "foreman-protector" is created to prevent accidental updates of packages from unexpected sources.</p>

<p>For more information: <a href="https://theforeman.org/plugins/foreman_maintain/0.2/index.html" target="_blank">https://theforeman.org/plugins/foreman_maintain/0.2/index.html</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="03_api" id="advanced_03_api1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/03_api:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>API</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="03_api" id="advanced_03_api2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/03_api:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>API</h1>

<ul>
<li>Version 1 of the API is deprecated</li>
<li>Version 2 

<ul>
<li>JSON API</li>
<li>Shared with Katello</li>
<li>Requires username and password</li>
<li>Collections are paged</li>
<li>Search strings like provided in the WebGUI</li>
<li>Apidoc generated on your system at /apidoc</li>
</ul>
</li>
<li>GraphQL

<ul>
<li>Available since 1.22, still considered experimental</li>
<li>Intended for development</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<div class="pagebreak">continued...</div>

<p>Foreman provides a web based JSON API which is shared with Katello. This is Version 2 of the
API which is favored instead of the already deprecated version 1. It requires an authentication
by username and password. Perhaps unusal is the handling of collections which are paged in the
same way like in the webinterface. The same way it handles search strings like they are provided
in the WebGUI but they have to be URL encoded.</p>

<p>Another API was introduced with GraphQL in 1.22. This API is more intended for development of
plugins instead of scripting and still considered experimental, but should cover all objects
of the core now and be available for a good number of plugins already.</p>

<p>Usage explainations can be found at <a href="http://theforeman.org/manuals/latest/index.html#5.1API" target="_blank">http://theforeman.org/manuals/latest/index.html#5.1API</a></p>

<p>API documentation is located at <a href="http://theforeman.org/api/2.0/index.html" target="_blank">http://theforeman.org/api/2.0/index.html</a> or on your system at /apidocs.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="03_api" id="advanced_03_api3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/03_api:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 9.1: Working with the API</h1>

<ul>
<li>Objective:

<ul>
<li>Use the API to query, create and update objects</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Query the API for all subnets</li>
<li>Query the API for all Debian hosts</li>
<li>Create a hostgroup "training" using the API</li>
<li>Change the root password for the hostgroup "training" using the API</li>
</ul>
</li>
</ul>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="04_cli" id="advanced_04_cli1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/04_cli:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>CLI</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="04_cli" id="advanced_04_cli2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/04_cli:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Hammer CLI</h1>

<ul>
<li>Written in Ruby based on clamp</li>
<li>Modular CLI

<ul>
<li>Basicly a framework</li>
<li>Plugins for Foreman</li>
<li>Some Foreman plugins provide a Hammer plugin</li>
<li>Other tools (especially around Katello)</li>
<li>Create your own plugin</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The commandline interface for Foreman is based on the Hammer CLI which is basicly a framework
written in Ruby based on clamp. Foreman provides a plugin to manage most aspects of Foreman
like the WebGUI and the API. Some of the Foreman plugins also provide a Hammer plugin, like 
some other tools especially around Katello do. But the framework is not limited to the Foreman
environment, so feel free to create your own plugins to solve your own administrative tasks.</p>

<p><br></p>

<p>An possibly incomplete list of plugins is provided by the Github page of the framework: <a href="https://theforeman.github.io/foreman-plugin-overview/" target="_blank">https://theforeman.github.io/foreman-plugin-overview/</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="04_cli" id="advanced_04_cli3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/04_cli:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Lab 9.2: Working with the CLI</h1>

<ul>
<li>Objective:

<ul>
<li>Use the CLI to prepare a new Operatingsystem entry</li>
</ul>
</li>
<li>Steps:

<ul>
<li>Make sure to provide the correct credentials.</li>
<li>Create the new Operatingsystem entry for "CentOS Stream 9"</li>
<li>Optionally add the parameter "enable-official-puppet7-repo"</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>For CentOS no need to associate templates occurs as there is a new feature handling this provided since Foreman 3.5, other Distributions than RHEL derivates still lack this feature, so additional steps are required.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="05_multitenancy" id="advanced_05_multitenancy1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/05_multitenancy:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Multitenancy</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="05_multitenancy" id="advanced_05_multitenancy2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/05_multitenancy:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Multitenancy</h1>

<ul>
<li>Adds Organizations and/or Locations

<ul>
<li>Can be nested</li>
</ul>
</li>
<li>All Objects require one context</li>
<li>User

<ul>
<li>can have multiple contexts</li>
<li>can have a default context</li>
<li>keep care of in which context he works</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Foreman has built-in multitenancy enabled by default. 
Depending on your needs you can add Organizations and/or Locations. Every object will require 
exactly one context with the exception of users who can have multiple contexts and one of these assigned
as their default context. But he has to keep care of in which context he works because objects he creates
will be in this context.</p>

<div class="pagebreak">continued...</div>

<p>Organization and Location can both be nested to represent a hierarchy with a top-down approach.
Katello is limiting nesting to Locations and does not support it for Organizations.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="06_troubleshooting" id="advanced_06_troubleshooting1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/06_troubleshooting:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Troubleshooting</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="06_troubleshooting" id="advanced_06_troubleshooting2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/06_troubleshooting:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Logging</h1>

<ul>
<li>
<p>Foreman</p>

<ul>
<li>Increase log level in general</li>
<li>Enable additional specific logs</li>
</ul>
</li>
<li>
<p>Smart proxy</p>

<ul>
<li>Increase log level</li>
<li>Smart proxies log can be read on the WebGUI</li>
</ul>
</li>
<li><p>Plugins can add their own logging</p></li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Both Foreman and the Smart proxy write an excellent log file.</p>

<p>Foreman log files are located in "/var/log/foreman" and its main log is called "production.log".
You can find all accessed URLs and errors generated by accessing it. If the standard log level 
does not provide any information it is possible to increase the log level by changing the configuration
in the "/etc/foreman/settings.yaml".</p>

<pre><code>:logging:
  :level: debug
</code></pre>

<p>Furthermore it is possible to enable additional specific loggers.</p>

<ul>
<li>app - web requests and all general application logs (default: true)</li>
<li>ldap - high level LDAP queries (e.g. find users in group) and LDAP operations performed (default: false)</li>
<li>permissions - evaluation of user roles, filters and permissions when loading pages (default: false)</li>
<li>sql - SQL queries made through Rails ActiveRecord, only debug (default: false)</li>
</ul>

<p>For those add following to the configuration:</p>

<pre><code>:loggers:
  :ldap:
    :enabled: true
</code></pre>

<p>The log files of the Smart proxy are located in "/var/log/foreman-proxy" containing all errors issued by the
Smart proxy like downloading of boot images failed and failed updates of services. If additional details are
needed increase the log level in "/etc/foreman-proxy/settings.yml".</p>

<pre><code>:log_level: DEBUG
</code></pre>

<p>Plugins to both components can add directly to the log or write their own, so have a look into their configuration
if attempting any troubleshooting with a specific plugin.</p>

<p>You can enable Logs access from the WebGUI by adding in
"/etc/foreman-proxy/settings.d/logs.yml":</p>

<pre><code>:enabled: https
</code></pre>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="06_troubleshooting" id="advanced_06_troubleshooting3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/06_troubleshooting:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Provisioning process</h1>

<ul>
<li>Watch the output in the WebGUI</li>
<li>Spoof the provisioning configuration</li>
<li>Find the communication in Foreman log</li>
<li>In the Smart proxy log

<ul>
<li>Download of boot images</li>
<li>Configuration changes failing</li>
</ul>
</li>
<li>On the TFTP server

<ul>
<li>Checksum of boot image</li>
<li>PXE configuration</li>
</ul>
</li>
<li>Reports of configuration management</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Troubleshooting of the provisioning process can be required if deployment of a system fails or differs from expectation.
In most cases the output of the WebGUI is quite useful, but sometimes a deeper look is required to find a solution.</p>

<p>In addition to the template preview at the host you can get the provisioning configuration files by spoofing the URL:</p>

<pre><code> https://foreman.localdomain/unattended/provision?spoof=10.0.0.100
</code></pre>

<p>In this URL you can change the template type provision to every other type to get those files.</p>

<p>If everything here seems to be correct, check the communication in the Foreman log. Getting the exact URLs from the log
and browsing them can help to find issues like token on a boot disk expired.</p>

<p>Next step would be to look for errors in the Smart proxy log if the download of the boot images or some configuration
changes issued to the managed services have failed.</p>

<p>On the TFTP server have a look at the boot image, it is downloaded only once during the first deployment of a host started.
If somehow the image was already downloaded you will not find any new log entry about the failed download. Also in some rare
cases distribution releases a newer version of the boot image to fix some installation issues. So check the size and checksum
of the image if the boot fails. </p>

<div class="pagebreak">continued...</div>

<p>In the case there is no PXE configuration you can cancel and restart the build process or execute a rebuild from the "All Hosts" menu.</p>

<p>If the deployment of the system works but something is not configured in the expected way have a look in the reports of
the configuration management. In many cases Puppet code is not well designed or has some cross system dependencies so
the agent has to run more than once to complete the full configuration.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="06_troubleshooting" id="advanced_06_troubleshooting4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/06_troubleshooting:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Upstream support</h1>

<ul>
<li>Common issues in the Wiki</li>
<li>IRC

<ul>
<li>User channel for support</li>
<li>Developer channel for development support</li>
</ul>
</li>
<li>Community Platform based on Discourse</li>
<li>Server fault</li>
<li>Youtube</li>
<li>Issue tracker</li>
<li>Gathering information

<ul>
<li>Debug tool (to be deprecated)</li>
<li>sosreport</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>The Foreman team tries to help with issues as good as they can. To achieve this there are several ways to get support available.</p>

<p>First have a look into the Wiki page collecting common issues: <a href="http://projects.theforeman.org/projects/1/wiki/Troubleshooting" target="_blank">http://projects.theforeman.org/projects/1/wiki/Troubleshooting</a></p>

<p>If your problem is not covered there the fastest way to get in touch with the team is the IRC Channel. The channel #theforeman is
hosted on irc.freenode.net, the developer channel #theforeman-dev is only for support on development of Foreman and plugins.</p>

<p>The mailing lists have been replaced with Discourse to provide a Community Platform which is basicly a forum with mailing list support.
You can get help here, discuss development and follow release workflow including test weeks.</p>

<p>On 'Server Fault' you can ask questions and find answers tagged with foreman: <a href="http://serverfault.com/questions/tagged/foreman" target="_blank">http://serverfault.com/questions/tagged/foreman</a></p>

<p>On Youtube in the Foreman channel you can find introductions, deep dives, community demos and other ressources which can also
be very useful: <a href="https://www.youtube.com/channel/UCCo7AZ1oG6TbG0-dwjRqCmw" target="_blank">https://www.youtube.com/channel/UCCo7AZ1oG6TbG0-dwjRqCmw</a></p>

<p>Looking at all those resources will solve most issues, if not it is probably a bug, so search for it in the issue tracker
and if you can not find a similar issue file create a new one with as much information as possible to help fixing the bug and others with the same issue. 
<a href="http://projects.theforeman.org/projects/foreman/issues" target="_blank">http://projects.theforeman.org/projects/foreman/issues</a></p>

<p>Sometimes you could be asked to send a debug report which could be generated with "foreman-debug" including the complete
configuration stripped of security data. With "foreman-debug -u" it could be uploaded to a location only accessable by the
Foreman core developers. This tool is going to be deprecated and be replaced by a plugin for sosreport.</p>

<p>Sosreport can collect even more system information and based other already existing plugins also those of required or managed
services. The only feature missing is the built-in upload of the report.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="07_monitoring" id="advanced_07_monitoring1" class="slide subsectionnonum" data-transition="none">
<div class="content subsectionnonum" ref="advanced/07_monitoring:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Monitoring</h1>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="07_monitoring" id="advanced_07_monitoring2" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/07_monitoring:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Foreman &amp; Smart Proxy</h1>

<ul>
<li>
<p>Foreman</p>

<ul>
<li>Webinterface should be available using HTTPs include "LoginPage"</li>
<li>Provisioning requires also HTTP requests being answered</li>
<li>Foreman log should not have entries "500 Internal Server Error"</li>
</ul>
</li>
<li>
<p>Smart proxy</p>

<ul>
<li>Query the feature list for expected features</li>
<li>Smart proxies log should not have entries "ERROR"</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>For monitoring Foreman you should include a check to verify if the Webinterface is available using HTTPs and
if it includes the string "Welcome to foreman" as it is possible that it shows a stracktrace if something is
goes wrong. If using monitoring plugins with Icinga or something similar you could use check_http.</p>

<div class="pagebreak">continued...</div>

<pre><code>check_http -H foreman.localdomain -p 443 -S -f follow -s 'LoginPage'
</code></pre>

<p>During provisioning also plain HTTP requests will be required, but you can not simulate exactly this request
because of redirect rules directing the request to HTTPs.</p>

<pre><code>check_http -H foreman.localdomain -e 301
</code></pre>

<p>Log entries containing "500 Internal Server Error" will typically indicate a software failure caused by
something not running properly or a bug. Check_logfiles provided at <a href="http://labs.consol.de" target="_blank">http://labs.consol.de</a> could be used
to monitor.</p>

<pre><code>check_logfiles --logfile /var/log/foreman/production.log --rotation loglogdate8logdate8gz \
--criticalpattern '500 Internal Server Error' --tag foreman
</code></pre>

<p>To monitor the Smart proxy query the feature list for expected features as a feature will be deactivated if
an error during startup occures. Remember the default port 8443 is changed to 9090 when using Katello because of Candlepin.</p>

<pre><code>check_http -H foreman.localdomain -S -p 8443 -u /features -s '["dhcp","dns","logs","puppet","puppetca","tftp"]'
</code></pre>

<p>In the log monitor for entries marked as "ERROR".</p>

<pre><code>check_logfiles --logfile /var/log/foreman-proxy/proxy.log --rotation loglogdate8gz \
--criticalpattern 'ERROR' --tag foreman-proxy
</code></pre>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="07_monitoring" id="advanced_07_monitoring3" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/07_monitoring:3">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Managed Services</h1>

<ul>
<li>Puppet: Query for a catalog</li>
<li>TFTP: Try to get a small file like pxelinux.cfg/default</li>
<li>DNS: Query DNS for a specific combination of name and address</li>
<li>DHCP: Try to get a DHCPOFFER from a system not being the DHCP server</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>Best way to verify that Puppet is available is trying to get a catalog and check it for some
content like the name. It will require to use the client certificate of the host for authentication.
Which are not accessable by an unprivileged user by default.</p>

<p>For Puppet 7 this could look like this.</p>

<pre><code>check_http -H foreman.localdomain -S -p 8140 \ 
-J /etc/puppetlabs/puppet/ssl/certs/foreman.localdomain.pem \
-K /etc/puppetlabs/puppet/ssl/private_keys/foreman.localdomain.pem \
-u '/puppet/v3/catalog/foreman.localdomain?environment=production' \
-s '"name":"foreman.localdomain"'
</code></pre>

<p><br></p>

<p>To verify TFTP working fine try to get a small file like pxelinux.cfg/default (which you need to create).
There are several plugins available like the one provided at <a href="http://william.leibzon.org/nagios/" target="_blank">http://william.leibzon.org/nagios/</a></p>

<pre><code>check_tftp foreman.localdomain pxelinux.cfg/default
</code></pre>

<p>DNS functionality is best checked by a specific combination of name and address and could be simply included
for every host.</p>

<pre><code>check_dns -s foreman.localdomain -H foreman.localdomain -a 10.0.0.2
</code></pre>

<p>DHCP providing DHCPOFFERS can only be verifed from systems not being the DHCP server and should ask a specific
DHCP server to ensure answers are not provided from another system.</p>

<pre><code>check_dhcp -s 10.0.0.2 -r 10.0.0.102 -u
</code></pre>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="advanced" data-title="07_monitoring" id="advanced_07_monitoring4" class="slide smbullets small" data-transition="none">
<div class="content smbullets small" ref="advanced/07_monitoring:4">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Katello</h1>

<ul>
<li>Service status via Systemd and Journal</li>
<li>Functionality:

<ul>
<li>Synchronization of the Products</li>
<li>Patch level of Hosts</li>
</ul>
</li>
</ul>



<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<div class="notes-section handouts">

<hr>

<p>In most cases it should be enough to verify the services are running and watch for errors in the journal to verify
Candlepin and Pulp are working. Candlepin is a Java application running on Tomcat and Pulp requires a bunch of services
starting with pulp, pulpworker being instanciated multiple times with the exact number depending on your tuning.
Best check known is check_systemd_service which only verifies the service being active. To query the journal another check is
needed but there is none to recommend.</p>

<div class="pagebreak">continued...</div>

<p>Checking the functionality is another way to monitor Katello. The two checks check_katello_sync for the synchronization of the Products and
check_katello_currency for the patch level of Hosts from Christian Stankowic are good ones to start with as the verify the most important
functionalities. <a href="https://github.com/stdevel?tab=repositories&amp;q=katello" target="_blank">https://github.com/stdevel?tab=repositories&amp;q=katello</a></p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Post" data-title="01_Feedback" id="global_Post_01_Feedback" class="slide noprint center" data-transition="none">
<div class="content noprint center" ref="global/Post/01_Feedback">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>FEEDBACK</h1>

<div class="div_center">We look forward to your feedback</div>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Post" data-title="02_Thanks" id="global_Post_02_Thanks" class="slide noprint center" data-transition="none">
<div class="content noprint center" ref="global/Post/02_Thanks">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>THANK YOU</h1>

<div class="div_center">Thank you for your attention!</div>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Post" data-title="03_Contributors" id="global_Post_03_Contributors1" class="slide noprint center" data-transition="none">
<div class="content noprint center" ref="global/Post/03_Contributors:1">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Contributing</h1>

<p>Contribute to the Foreman training on <a href="https://github.com/NETWAYS/foreman-training" target="_blank">Github</a> to make it even better.</p>

<p>Material is licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International</a>.</p>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="global/Post" data-title="03_Contributors" id="global_Post_03_Contributors2" class="slide noprint center" data-transition="none">
<div class="content noprint center" ref="global/Post/03_Contributors:2">
<div class="net-header">
    <img src="./file//global/_images/foreman/foremanhelmet.png" alt: width: height:>
</div>

<h1>Contributors</h1>

<p></p>
<center><pre>
David Okon
Dirk Götz
Julien Pivotto
Mark Hlawatschek
Markus Opolka
Markus Waldmüller
Simon Hönscheid
Tobias Bauriedel
</pre></center>

<div class="net-footer">
    <p id="footer-left">Official Foreman Training</p>
    <p id="footer-right">by NETWAYS GmbH (www.netways.de)</p>
</div>
</div>
<canvas class="annotations"></canvas>
</div>
</div>
<div id="buttonNav">
  <div id="buttonPrev"><i class="fa fa-chevron-left fa-lg"></i> Previous</div><div id="buttonNext">Next <i class="fa fa-chevron-right fa-lg"></i></div>
</div>
<div id="pauseScreen">
  PAUSED
</div>

  <script defer type="text/javascript">
    // We want the audience members to see automatic tours. We can assume that they won't be
    // using many server domains like the presenter might.
    var autoTour = true;

    $( document ).ready(function() {
      if(presenter && !window.opener) {
        alert('This is an audience view designed for interactivity. If you are placing this window on a projector, you should use the Display View instead.');
      }

      tours['showoff:activity'] = [
        {
          element: ".currentSlide .activityToggle",
          intro: I18n.t('tour.activity.complete')
        }
      ];

      tours['showoff:form'] = [
        {
          element: ".currentSlide input.save",
          intro: I18n.t('tour.form.save')
        }
      ];

      tours['showoff:menu'] = [
        {
          element: "#hamburger",
          intro: I18n.t('tour.menu.start')
        },
        {
          element: "#navToggle",
          intro: I18n.t('tour.menu.navigation')
        },
        {
          element: "#fileDownloads",
          intro: I18n.t('tour.menu.download')
        },
        {
          element: "#paceFaster",
          intro: I18n.t('tour.menu.pace')
        },
        {
          element: "#questionToggle",
          intro: I18n.t('tour.menu.questions')
        },
        {
          element: "#feedbackToggle",
          intro: I18n.t('tour.menu.feedback')
        }
      ].filter(function(item) { return (document.querySelector(item['element'])) });
      // display tips for only the enabled features
    });
  </script>

</body>
</html>
